[
  {
    "id": "green_maintenance_check",
    "type": "SPELL",
    "name": { "str": "Green maintenance Badge Trait" },
    "description": "Adds trait for badge check",
    "valid_targets": [ "hostile" ],
    "flags": [ "MUTATE_TRAIT", "SILENT" ],
    "message": "the drone scans for your ID badge.",
    "min_damage": 10000,
    "max_damage": 10000,
    "min_range": 15,
    "max_range": 15,
    "max_level": 1,
    "shape": "line",
    "effect": "mutate",
    "effect_str": "GREEN_MAINTENANCE_ALARM"
  },
  {
    "type": "mutation",
    "id": "GREEN_MAINTENANCE_ALARM",
    "name": { "str": "valued employee" },
    "points": 2,
    "description": "A silent mutation to work with lab security drones and badges.",
    "purifiable": false,
    "player_display": false
  },
  {
    "type": "effect_on_condition",
    "id": "bot_green_maintenance_badge_check",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "not": { "u_has_item": "id_science_maintenance_green" } }, { "u_has_trait": "GREEN_MAINTENANCE_ALARM" } ] },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "bots_center_garage", "om_terrain": "lab_CORE_2x1_EC_ground" }
    ]
  },
  {
    "//": "Opens bot release if you lack a green maintenance ID card.",
    "type": "mapgen",
    "update_mapgen_id": "bots_center_garage",
    "method": "json",
    "object": { "set": [ { "line": "terrain", "id": "t_thconc_r", "x": 1, "y": 11, "x2": 1, "y2": 12 } ] }
  },
  {
    "type": "effect_on_condition",
    "id": "bot_green_maintenance_alarm_remove",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "u_has_item": "id_science_maintenance_green" }, { "u_has_trait": "GREEN_MAINTENANCE_ALARM" } ] },
    "effect": [
      { "u_message": "Hello, valued employee." },
      { "u_message": "lab_safety_maintenance_snippets", "snippet": true },
      { "u_lose_trait": "GREEN_MAINTENANCE_ALARM" }
    ]
  },
  {
    "id": "mon_lab_security_drone_GM",
    "copy-from": "base_drone",
    "type": "MONSTER",
    "name": { "str": "GM security drone" },
    "description": "A small drone, it has a camera and speaker visible.",
    "diff": 2,
    "speed": 190,
    "color": "light_green",
    "hp": 500,
    "melee_cut": 12,
    "default_faction": "science",
    "special_attacks": [
      {
        "type": "spell",
        "spell_data": { "id": "green_maintenance_check" },
        "cooldown": 120,
        "monster_message": "Remain still.  Scanning for authorization."
      }
    ],
    "revert_to_itype": "bot_lab_security_drone_GM",
    "flags": [ "COLDPROOF", "PRIORITIZE_TARGETS" ],
    "death_drops": { "groups": [ [ "robots", 4 ], [ "eyebot", 1 ] ] },
    "death_function": { "corpse_type": "BROKEN" }
  },
  {
    "id": "yellow_maintenance_check",
    "type": "SPELL",
    "name": { "str": "Yellow maintenance Badge Trait" },
    "description": "Adds trait for badge check",
    "valid_targets": [ "hostile" ],
    "flags": [ "MUTATE_TRAIT", "SILENT" ],
    "message": "the drone scans for your ID badge.",
    "min_damage": 10000,
    "max_damage": 10000,
    "min_range": 15,
    "max_range": 15,
    "max_level": 1,
    "shape": "line",
    "effect": "mutate",
    "effect_str": "YELLOW_MAINTENANCE_ALARM"
  },
  {
    "type": "mutation",
    "id": "YELLOW_MAINTENANCE_ALARM",
    "name": { "str": "valued employee" },
    "points": 2,
    "description": "A silent mutation to work with lab security drones and badges.",
    "purifiable": false,
    "player_display": false
  },
  {
    "type": "effect_on_condition",
    "id": "bot_yellow_maintenance_badge_check",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": {
      "and": [ { "not": { "u_has_item": "id_science_maintenance_yellow" } }, { "u_has_trait": "YELLOW_MAINTENANCE_ALARM" } ]
    },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "concrete_wall_o_lab_res_8_NW", "om_terrain": "lab_res_8_NWD" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "bot_yellow_maintenance_badge_check_2",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": {
      "and": [ { "not": { "u_has_item": "id_science_maintenance_yellow" } }, { "u_has_trait": "YELLOW_MAINTENANCE_ALARM" } ]
    },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "concrete_wall_o_lab_res_8_NE", "om_terrain": "lab_res_8_NED" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "bot_yellow_maintenance_alarm_remove",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "u_has_item": "id_science_maintenance_yellow" }, { "u_has_trait": "YELLOW_MAINTENANCE_ALARM" } ] },
    "effect": [
      { "u_message": "Hello, valued employee." },
      { "u_message": "lab_safety_maintenance_snippets", "snippet": true },
      { "u_lose_trait": "YELLOW_MAINTENANCE_ALARM" }
    ]
  },
  {
    "id": "mon_lab_security_drone_YM",
    "copy-from": "base_drone",
    "type": "MONSTER",
    "name": { "str": "YM security drone" },
    "description": "A small drone, it has a camera and speaker visible.",
    "diff": 2,
    "speed": 190,
    "color": "yellow",
    "hp": 500,
    "melee_cut": 12,
    "default_faction": "science",
    "special_attacks": [
      {
        "type": "spell",
        "spell_data": { "id": "yellow_maintenance_check" },
        "cooldown": 120,
        "monster_message": "Remain still.  Scanning for authorization."
      }
    ],
    "revert_to_itype": "bot_manhack",
    "flags": [ "COLDPROOF", "PRIORITIZE_TARGETS" ],
    "death_drops": { "groups": [ [ "robots", 4 ], [ "eyebot", 1 ] ] },
    "death_function": { "corpse_type": "BROKEN" }
  },
  {
    "id": "blue_maintenance_check",
    "type": "SPELL",
    "name": { "str": "Blue maintenance Badge Trait" },
    "description": "Adds trait for badge check",
    "valid_targets": [ "hostile" ],
    "flags": [ "MUTATE_TRAIT", "SILENT" ],
    "message": "the drone scans for your ID badge.",
    "min_damage": 10000,
    "max_damage": 10000,
    "min_range": 15,
    "max_range": 15,
    "max_level": 1,
    "shape": "line",
    "effect": "mutate",
    "effect_str": "BLUE_MAINTENANCE_ALARM"
  },
  {
    "type": "mutation",
    "id": "BLUE_MAINTENANCE_ALARM",
    "name": { "str": "valued employee" },
    "points": 2,
    "description": "A silent mutation to work with lab security drones and badges.",
    "purifiable": false,
    "player_display": false
  },
  {
    "type": "effect_on_condition",
    "id": "bot_blue_maintenance_badge_check",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "not": { "u_has_item": "id_science_maintenance_blue" } }, { "u_has_trait": "BLUE_MAINTENANCE_ALARM" } ] },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "concrete_wall_o_lab_res_8_NW", "om_terrain": "lab_2x2_cargo_NW" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "bot_blue_maintenance_badge_check_2",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "not": { "u_has_item": "id_science_maintenance_blue" } }, { "u_has_trait": "BLUE_MAINTENANCE_ALARM" } ] },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "concrete_wall_o_lab_res_8_NE", "om_terrain": "lab_2x2_cargo_NE" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "bot_blue_maintenance_alarm_remove",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "u_has_item": "id_science_maintenance_blue" }, { "u_has_trait": "YELLOW_MAINTENANCE_ALARM" } ] },
    "effect": [
      { "u_message": "Hello, valued employee." },
      { "u_message": "lab_safety_maintenance_snippets", "snippet": true },
      { "u_lose_trait": "BLUE_MAINTENANCE_ALARM" }
    ]
  },
  {
    "id": "mon_lab_security_drone_BM",
    "copy-from": "base_drone",
    "type": "MONSTER",
    "name": { "str": "BM security drone" },
    "description": "A small drone, it has a camera and speaker visible.",
    "diff": 2,
    "speed": 190,
    "color": "blue",
    "hp": 500,
    "melee_cut": 12,
    "default_faction": "science",
    "special_attacks": [
      {
        "type": "spell",
        "spell_data": { "id": "blue_maintenance_check" },
        "cooldown": 120,
        "monster_message": "Remain still.  Scanning for authorization."
      }
    ],
    "revert_to_itype": "bot_manhack",
    "flags": [ "COLDPROOF", "PRIORITIZE_TARGETS" ],
    "death_drops": { "groups": [ [ "robots", 4 ], [ "eyebot", 1 ] ] },
    "death_function": { "corpse_type": "BROKEN" }
  },
  {
    "id": "blue_maintenance_check2",
    "type": "SPELL",
    "name": { "str": "Blue maintenance Badge Trait" },
    "description": "Adds trait for badge check",
    "valid_targets": [ "hostile" ],
    "flags": [ "MUTATE_TRAIT", "SILENT" ],
    "message": "the drone scans for your ID badge.",
    "min_damage": 10000,
    "max_damage": 10000,
    "min_range": 15,
    "max_range": 15,
    "max_level": 1,
    "shape": "line",
    "effect": "mutate",
    "effect_str": "BLUE_MAINTENANCE_ALARM2"
  },
  {
    "type": "mutation",
    "id": "BLUE_MAINTENANCE_ALARM2",
    "name": { "str": "valued employee" },
    "points": 2,
    "description": "A silent mutation to work with lab security drones and badges.",
    "purifiable": false,
    "player_display": false
  },
  {
    "type": "effect_on_condition",
    "id": "bot_blue_maintenance_badge_check2a",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "not": { "u_has_item": "id_science_maintenance_blue" } }, { "u_has_trait": "BLUE_MAINTENANCE_ALARM2" } ] },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "lab_security_corridor_e", "om_terrain": "underground_lab_central_-6W" },
      { "mapgen_update": "lab_security_corridor_f", "om_terrain": "underground_lab_central_-6E" }
    ]
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "lab_security_corridor_e",
    "method": "json",
    "object": {
      "place_terrain": [
        { "ter": "t_thconc_r", "x": 17, "y": 4 },
        { "ter": "t_thconc_r", "x": 17, "y": 6 },
        { "ter": "t_thconc_r", "x": 6, "y": 4 },
        { "ter": "t_thconc_r", "x": 6, "y": 6 }
      ]
    }
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "lab_security_corridor_f",
    "method": "json",
    "object": {
      "place_terrain": [
        { "ter": "t_thconc_r", "x": 17, "y": 13 },
        { "ter": "t_thconc_r", "x": 17, "y": 15 },
        { "ter": "t_thconc_r", "x": 6, "y": 13 },
        { "ter": "t_thconc_r", "x": 6, "y": 15 }
      ]
    }
  },
  {
    "type": "effect_on_condition",
    "id": "bot_blue_maintenance_alarm_remove2",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "u_has_item": "id_science_maintenance_blue" }, { "u_has_trait": "YELLOW_MAINTENANCE_ALARM2" } ] },
    "effect": [
      { "u_message": "Hello, valued employee." },
      { "u_message": "lab_safety_maintenance_snippets", "snippet": true },
      { "u_lose_trait": "BLUE_MAINTENANCE_ALARM2" }
    ]
  },
  {
    "id": "mon_lab_security_drone_BM2",
    "copy-from": "base_drone",
    "type": "MONSTER",
    "name": { "str": "BM security drone" },
    "description": "A small drone, it has a camera and speaker visible.",
    "diff": 2,
    "speed": 190,
    "color": "cyan",
    "hp": 500,
    "melee_cut": 12,
    "default_faction": "science",
    "special_attacks": [
      {
        "type": "spell",
        "spell_data": { "id": "blue_maintenance_check2" },
        "cooldown": 120,
        "monster_message": "Remain still.  Scanning for authorization."
      }
    ],
    "revert_to_itype": "bot_manhack",
    "flags": [ "COLDPROOF", "PRIORITIZE_TARGETS" ],
    "death_drops": { "groups": [ [ "robots", 4 ], [ "eyebot", 1 ] ] },
    "death_function": { "corpse_type": "BROKEN" }
  },
  {
    "id": "green_researcher_check",
    "type": "SPELL",
    "name": { "str": "Green researcher Badge Trait" },
    "description": "Adds trait for badge check",
    "valid_targets": [ "hostile" ],
    "flags": [ "MUTATE_TRAIT", "SILENT" ],
    "message": "the drone scans for your ID badge.",
    "min_damage": 10000,
    "max_damage": 10000,
    "min_range": 15,
    "max_range": 15,
    "max_level": 1,
    "shape": "line",
    "effect": "mutate",
    "effect_str": "GREEN_RESEARCHER_ALARM"
  },
  {
    "type": "mutation",
    "id": "GREEN_RESEARCHER_ALARM",
    "name": { "str": "valued employee" },
    "points": 2,
    "description": "A silent mutation to work with lab security drones and badges.",
    "purifiable": false,
    "player_display": false
  },
  {
    "type": "effect_on_condition",
    "id": "bot_green_researcher_badge_check",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "not": { "u_has_item": "id_science_researcher_green" } }, { "u_has_trait": "GREEN_RESEARCHER_ALARM" } ] },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "bot_release_rearcher_green", "om_terrain": "lab_res_8_NW" },
      { "mapgen_update": "bot_release_rearcher_green_2", "om_terrain": "lab_res_8_NE" },
      { "mapgen_update": "bot_release_rearcher_green", "om_terrain": "lab_res_8_NWD" }
    ]
  },
  {
    "//": "Opens bot release if you lack a green researcher ID card.",
    "type": "mapgen",
    "update_mapgen_id": "bot_release_rearcher_green",
    "method": "json",
    "object": { "set": [ { "line": "terrain", "id": "t_thconc_r", "x": 19, "y": 15, "x2": 19, "y2": 16 } ] }
  },
  {
    "//": "Opens bot release if you lack a green researcher ID card.",
    "type": "mapgen",
    "update_mapgen_id": "bot_release_rearcher_green_2",
    "method": "json",
    "object": { "set": [ { "line": "terrain", "id": "t_thconc_r", "x": 4, "y": 15, "x2": 4, "y2": 16 } ] }
  },
  {
    "type": "effect_on_condition",
    "id": "bot_green_researcher_alarm_remove",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "u_has_item": "id_science_researcher_green" }, { "u_has_trait": "GREEN_RESEARCHER_ALARM" } ] },
    "effect": [ { "u_message": "Hello, valued employee." }, { "u_lose_trait": "GREEN_RESEARCHER_ALARM" } ]
  },
  {
    "id": "mon_lab_security_drone_GR",
    "copy-from": "base_drone",
    "type": "MONSTER",
    "name": { "str": "GR security drone" },
    "description": "A small drone, it has a camera and speaker visible.",
    "diff": 2,
    "speed": 190,
    "color": "light_green",
    "hp": 500,
    "melee_cut": 12,
    "default_faction": "science",
    "special_attacks": [
      {
        "type": "spell",
        "spell_data": { "id": "green_researcher_check" },
        "cooldown": 120,
        "monster_message": "Remain still.  Scanning for authorization."
      }
    ],
    "revert_to_itype": "bot_lab_security_drone_GR",
    "flags": [ "COLDPROOF", "PRIORITIZE_TARGETS" ],
    "death_drops": { "groups": [ [ "robots", 4 ], [ "eyebot", 1 ] ] },
    "death_function": { "corpse_type": "BROKEN" }
  },
  {
    "id": "black_security_check",
    "type": "SPELL",
    "name": { "str": "Black security Badge Trait" },
    "description": "Adds trait for badge check",
    "valid_targets": [ "hostile" ],
    "flags": [ "MUTATE_TRAIT", "SILENT" ],
    "message": "the drone scans for your ID badge.",
    "min_damage": 10000,
    "max_damage": 10000,
    "min_range": 15,
    "max_range": 15,
    "max_level": 1,
    "shape": "line",
    "effect": "mutate",
    "effect_str": "BLACK_SECURITY_ALARM"
  },
  {
    "type": "mutation",
    "id": "BLACK_SECURITY_ALARM",
    "name": { "str": "valued employee" },
    "points": 2,
    "description": "A silent mutation to work with lab security drones and badges.",
    "purifiable": false,
    "player_display": false
  },
  {
    "type": "effect_on_condition",
    "id": "bot_black_security_badge_check",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "not": { "u_has_item": "id_science_security_black" } }, { "u_has_trait": "BLACK_SECURITY_ALARM" } ] },
    "effect": [
      { "u_message": "Remain in place, unauthorized person.  Security has been activated." },
      { "mapgen_update": "toxic_gas_corridor", "om_terrain": "underground_lab_central_-6W" },
      { "mapgen_update": "lab_security_corridor_c", "om_terrain": "underground_lab_central_-6W" },
      { "mapgen_update": "lab_security_corridor_d", "om_terrain": "underground_lab_central_-6E" }
    ]
  },
  {
    "//": "Releases if you lack a black security ID card.",
    "type": "mapgen",
    "update_mapgen_id": "toxic_gas_corridor",
    "method": "json",
    "object": {
      "place_fields": [
        { "field": "fd_toxic_gas", "x": 0, "y": 10, "intensity": 2, "age": 20 },
        { "field": "fd_toxic_gas", "x": 3, "y": 16, "intensity": 2, "age": 20 },
        { "field": "fd_toxic_gas", "x": 20, "y": 10, "intensity": 2, "age": 20 },
        { "field": "fd_toxic_gas", "x": 23, "y": 16, "intensity": 2, "age": 20 }
      ]
    }
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "lab_security_corridor_c",
    "method": "json",
    "object": {
      "place_terrain": [
        { "ter": "t_thconc_r", "x": 19, "y": 8 },
        { "ter": "t_thconc_r", "x": 19, "y": 10 },
        { "ter": "t_thconc_r", "x": 4, "y": 8 },
        { "ter": "t_thconc_r", "x": 4, "y": 10 }
      ]
    }
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "lab_security_corridor_d",
    "method": "json",
    "object": {
      "place_terrain": [
        { "ter": "t_thconc_r", "x": 19, "y": 17 },
        { "ter": "t_thconc_r", "x": 19, "y": 19 },
        { "ter": "t_thconc_r", "x": 4, "y": 17 },
        { "ter": "t_thconc_r", "x": 4, "y": 19 }
      ]
    }
  },
  {
    "type": "effect_on_condition",
    "id": "bot_black_security_alarm_remove",
    "recurrence_min": 10,
    "recurrence_max": 60,
    "condition": { "and": [ { "u_has_item": "id_science_black_security" }, { "u_has_trait": "BLACK_SECURITY_ALARM" } ] },
    "effect": [ { "u_message": "Hello, valued employee." }, { "u_lose_trait": "BLACK_SECURITY_ALARM" } ]
  },
  {
    "id": "mon_lab_security_drone_BS",
    "copy-from": "base_drone",
    "type": "MONSTER",
    "name": { "str": "BS security drone" },
    "description": "A small drone, it has a camera and speaker visible.",
    "diff": 2,
    "speed": 190,
    "color": "dark_gray",
    "hp": 500,
    "melee_cut": 12,
    "default_faction": "science",
    "special_attacks": [
      {
        "type": "spell",
        "spell_data": { "id": "black_security_check" },
        "cooldown": 60,
        "monster_message": "Remain still.  Scanning for authorization."
      }
    ],
    "revert_to_itype": "bot_lab_security_drone_BS",
    "flags": [ "COLDPROOF", "PRIORITIZE_TARGETS" ],
    "death_drops": { "groups": [ [ "robots", 4 ], [ "eyebot", 1 ] ] },
    "death_function": { "corpse_type": "BROKEN" }
  }
]
