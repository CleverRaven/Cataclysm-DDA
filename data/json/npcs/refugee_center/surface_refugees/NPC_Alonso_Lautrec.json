[
  {
    "type": "npc",
    "id": "refugee_AlonsoLautrec",
    "name_unique": "Alonso Lautrec",
    "gender": "male",
    "name_suffix": "refugee",
    "class": "NC_REFUGEE_Alonso",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_REFUGEE_Alonso_1",
    "faction": "free_merchants"
  },
  {
    "type": "npc_class",
    "id": "NC_REFUGEE_Alonso",
    "name": { "str": "Refugee" },
    "job_description": "I'm just trying to survive.",
    "common": false,
    "//": "Alonso wants to be the town bicycle, but isn't getting as much interest as he'd hoped.  He'll trade a morale bonus for condoms.",
    "bonus_str": { "rng": [ -2, 1 ] },
    "bonus_dex": { "rng": [ -2, 4 ] },
    "bonus_int": { "rng": [ -2, 2 ] },
    "bonus_per": { "rng": [ -2, 2 ] },
    "worn_override": "REFUGEE_Alonso_worn",
    "carry_override": "REFUGEE_Alonso_carried",
    "weapon_override": "REFUGEE_Alonso_wield",
    "traits": [ { "trait": "PRETTY" }, { "group": "Appearance_demographics" } ],
    "skills": [
      { "skill": "ALL", "level": { "mul": [ { "one_in": 3 }, { "sum": [ { "dice": [ 2, 2 ] }, { "rng": [ 0, -5 ] } ] } ] } },
      { "skill": "barter", "bonus": { "rng": [ 0, 1 ] } }
    ]
  },
  {
    "type": "item_group",
    "id": "REFUGEE_Alonso_worn",
    "subtype": "collection",
    "entries": [
      { "item": "boxer_briefs" },
      { "item": "socks" },
      { "item": "tshirt" },
      { "item": "jacket_leather" },
      { "item": "fancy_sunglasses" },
      { "item": "dress_shoes" }
    ]
  },
  {
    "type": "item_group",
    "id": "REFUGEE_Alonso_carried",
    "subtype": "collection",
    "entries": [ { "item": "mag_porn" }, { "item": "vibrator" }, { "item": "condom" } ]
  },
  {
    "type": "item_group",
    "id": "REFUGEE_Alonso_wield",
    "subtype": "collection",
    "entries": [ { "item": "cudgel" } ]
  },
  {
    "type": "effect_type",
    "id": "Alonso_condoms_restored",
    "//": "Applied as a timer to make Alonso's condoms run out over time."
  },
  {
    "type": "talk_topic",
    "//": "common talk responses",
    "id": [ "TALK_REFUGEE_Alonso_2", "TALK_REFUGEE_Alonso_Background", "TALK_REFUGEE_Alonso_Situation" ],
    "responses": [
      { "text": "You seem a little forward…", "topic": "TALK_REFUGEE_Alonso_Forward" },
      {
        "text": "[PERCEPTION 10] What is up with you?  What's with the fake accent, and speaking in the third person?",
        "topic": "TALK_REFUGEE_Alonso_CalledOut1",
        "condition": {
          "and": [
            { "u_has_perception": 10 },
            { "not": { "npc_has_var": "Alonso_accent", "type": "general", "context": "none", "value": "asked" } }
          ]
        }
      },
      { "text": "What's your story?", "topic": "TALK_REFUGEE_Alonso_Background" },
      { "text": "How are things here?", "topic": "TALK_REFUGEE_Alonso_Situation" },
      {
        "text": "[PRETTY] Remember that nice thing I did for you?  Can you do something nice for me?",
        "topic": "TALK_REFUGEE_Alonso_Pretty_Action",
        "condition": { "and": [ { "u_has_trait": "PRETTY" }, { "npc_has_effect": "Alonso_condoms_restored" } ] }
      },
      {
        "text": "So about those condoms.  I thought of a good use for them…",
        "topic": "TALK_REFUGEE_Alonso_Normal_Action",
        "condition": {
          "and": [
            { "not": { "u_has_trait": "PRETTY" } },
            { "not": { "u_has_trait": "UGLY" } },
            { "npc_has_effect": "Alonso_condoms_restored" }
          ]
        }
      },
      {
        "text": "[UGLY] I'm desperate.  You're my only chance.",
        "topic": "TALK_REFUGEE_Alonso_Ugly_Action",
        "condition": { "and": [ { "u_has_trait": "UGLY" }, { "npc_has_effect": "Alonso_condoms_restored" } ] }
      },
      {
        "text": "Are you okay Alonso, you don't seem like yourself?",
        "topic": "MISSION_REFUGEE_Alonso_condoms2",
        "condition": {
          "and": [
            { "u_has_var": "Alonso_condoms", "type": "mission", "context": "flag", "value": "yes" },
            { "not": { "npc_has_effect": "Alonso_condoms_restored" } }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_1",
    "dynamic_line": {
      "u_has_var": "u_met_Alonso_Lautrec",
      "type": "general",
      "context": "meeting",
      "value": "yes",
      "yes": "Hello again, gorgeous",
      "no": {
        "u_male": true,
        "yes": "Oh my, it's good to see such a strong and handsome fellow around here.  They call me Alonso.",
        "no": "Oh my, you're a beautiful lady, so nice to see you.  They call me Alonso."
      }
    },
    "responses": [
      {
        "text": "Nice to meet you, Alonso.",
        "effect": { "u_add_var": "u_met_Alonso_Lautrec", "type": "general", "context": "meeting", "value": "yes" },
        "condition": { "not": { "u_has_var": "u_met_Alonso_Lautrec", "type": "general", "context": "meeting", "value": "yes" } },
        "topic": "TALK_REFUGEE_Alonso_1_firstmeet"
      },
      {
        "text": "Hi, Alonso.  What's up?",
        "topic": "TALK_REFUGEE_Alonso_2",
        "condition": { "u_has_var": "u_met_Alonso_Lautrec", "type": "general", "context": "meeting", "value": "yes" }
      },
      {
        "text": "Hi Alonso, nice to meet you.  I gotta go though.",
        "effect": { "u_add_var": "u_met_Alonso_Lautrec", "type": "general", "context": "meeting", "value": "yes" },
        "condition": { "not": { "u_has_var": "u_met_Alonso_Lautrec", "type": "general", "context": "meeting", "value": "yes" } },
        "topic": "TALK_DONE"
      },
      {
        "text": "Hi Alonso.  I can't stay to talk.",
        "condition": { "u_has_var": "u_met_Alonso_Lautrec", "type": "general", "context": "meeting", "value": "yes" },
        "topic": "TALK_DONE"
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_1_firstmeet",
    "dynamic_line": "Nice to meet you too.  Very nice.  It gets so lonely here in the center.",
    "responses": [
      { "text": "What's up?", "topic": "TALK_REFUGEE_Alonso_2" },
      { "text": "Actually I'm just heading out.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_2",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "Now that you are here, everything.  Is there anything Alonso can… *do for you*?",
      "yes": "Well, it's a lot better now that you're here.  Nice to see a familiar face."
    },
    "responses": [
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_Forward",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "Alonso cannot help himself, in the face of someone so fine as you.",
      "yes": "You know me, I gotta be me, right?"
    },
    "responses": [
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_CalledOut1",
    "dynamic_line": {
      "u_male": true,
      "yes": "Aw man, why you gotta be like that?  I'm just tryin' to get an air of mystery okay?  Nobody wants to be with a slutty guy from Brooklyn, but Alonso the mysterious is another story.",
      "no": "Aw come on, why you gotta be like that?  I'm just tryin' to get an air of mystery okay?  Nobody wants to be with a slutty guy from Brooklyn, but Alonso the mysterious is another story."
    },
    "responses": [
      { "text": "And how is that working out for you?", "topic": "TALK_REFUGEE_Alonso_CalledOut2" },
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_CalledOut2",
    "dynamic_line": "Better'n you'd maybe think, okay?  Can we drop it?",
    "responses": [
      {
        "text": "Just stop talking like that around me, maybe?  It's really obnoxious.",
        "topic": "TALK_REFUGEE_Alonso_CalledOut3",
        "effect": { "npc_add_var": "Alonso_accent", "type": "general", "context": "none", "value": "asked" }
      },
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'll leave you to it then.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_CalledOut3",
    "dynamic_line": "Fine.  As a favor to you, I'll be a guy from Brooklyn.",
    "responses": [ { "text": "Thanks.  I'd better get going.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_Background",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "Alonso has many a tale to tell, all slow and drawn-out like, a sensual seduction of the -- how you say?  Ears.  There are dark days ahead, but perhaps together we can bring a little light?  Or at least a little heat.  This is a science joke I make for you.  Friction, it is the joke.",
      "yes": "I'm tryin' ta forget, y'know?  Don't like thinkin' about the past.  Better to plan for the future, even if the future looks grim."
    },
    "responses": [
      { "text": "Why aren't you wearing any pants?", "topic": "TALK_REFUGEE_Alonso_Pants1" },
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_Pants1",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "Why were you looking though?  I kid, I know she is hard to miss!  In English, the penis she is a woman no?  No.  I see.  And so do you it seems.  Yes.  There was such a clown, a clown of enormous physical beauty.  The pale, perfect skin, the ruby red lips, amazing hair, and what a sense of humor.  I laugh still, though I have lost everything.  My pants, my money, my many illegal imported triple magnum condoms I stole from a priest.  All lost to that one beautiful night.  The candles, the balloons, the singing.  It was the most romantic childrens' birthday party you could hope to imagine.  I would do it all again, and there was so much we did.  It was the end of that party, but the beginning of something beautiful, for several hours in that open minivan we found.  But you do not want to hear of such pleasures, I do not want to get you excited, for what can I do when I look so foolish, and lack the protection needed for more serious excitement.  Though and you must understand, the non-penetrative sex is good and fine too, and Alonso's tongue is good for more than just the telling of long and saucy stories yes?",
      "yes": "Yeah, I fucked up and got drunk at a kiddy party I crashed, broke into a van with the party clown I was bangin' (hey don't judge me, it took me a long time to make that happen, clowns are very givin' lovers) and I lost my pants, includin' all my money and all my triple magnum condoms I stole off a dead priest at a bar.  I'd be mad, but at least I'm safe, I made it here.  But I got no game here y'know?  I look like the clown when I should be knee deep in hotness here.  Look around, it's straight hotties!"
    },
    "responses": [
      { "text": "Can I help you out?", "topic": "MISSION_REFUGEE_Alonso_condoms" },
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_Situation",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "Here in the center, Alonso is a bit lonely.  We get a few brave, strong travelers like yourself, though, and seeing them brightens Alonso's day.",
      "yes": "Could be better.  I don't really got any friends here in the center, but seeing travelers like you always brightens my day."
    },
    "responses": [
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "id": "MISSION_REFUGEE_Alonso_condoms",
    "type": "mission_definition",
    "name": { "str": "Alonso must have condoms" },
    "goal": "MGOAL_FIND_ITEM",
    "difficulty": 2,
    "value": 1000,
    "item": "condom",
    "start": {
      "assign_mission_target": { "om_terrain": "sewer", "reveal_radius": 1, "random": true, "search_range": 120, "z": -1 },
      "update_mapgen": { "om_terrain": "sewer", "place_item": [ { "item": "condom", "x": 5, "y": 16 } ] },
      "effect": { "u_add_var": "Alonso_condoms", "type": "mission", "context": "flag", "value": "in_progress" }
    },
    "end": {
      "effect": [
        { "u_add_var": "Alonso_condoms", "type": "mission", "context": "flag", "value": "yes" },
        { "npc_add_effect": "Alonso_condoms_restored", "duration": 100000 }
      ]
    },
    "origins": [ "ORIGIN_SECONDARY" ],
    "dialogue": {
      "describe": "I think I might know where those special condoms might be though…",
      "offer": "This clown was into some of the different things, not the vanilla, you understand me?  Yes.  I think you will find my valuables in a sewer not so so far.",
      "accepted": "You make me so happy I could give you little kisses, and some big kisses, and then something else maybe.",
      "rejected": "I know that you cannot resist me long.  I will wait, and perhaps some other pretty thing will help me instead?",
      "advice": "It can be wet there.  Aha.  Gushy too you see.  Maybe some of the galoshes to bring?",
      "inquire": "Have you found what it is that you seek?  There may be something in it for you no?  Something big, but we take it slow yes?",
      "success": "This is the best news since those lonely teachers asked me to be a nude model at the college for the blind.  Surely we will find some use for them.  It has been a while, I am, how to say, very prepared.",
      "success_lie": "You give me confidence.  I trust you.  I do not know why this is.",
      "failure": "Disaster, but I thank you for to try.  You want a backrub some time, it will happen for sure.  And maybe you give me a rub too?"
    }
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_Pretty_Action",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "My jewel of the New England, I give to you my biggest prize.",
      "yes": "Yo, you're crazy hot!  I'm not stupid!"
    },
    "speaker_effect": { "sentinel": "service_provided", "effect": { "u_add_effect": "VIBE", "duration": 360 } },
    "responses": [
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_Normal_Action",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "I give to you what of I got.  And this is Alonso so I mean it's a lot.",
      "yes": "Yeeeeah it's on!"
    },
    "speaker_effect": { "sentinel": "service_provided", "effect": { "u_add_effect": "VIBE", "duration": 360 } },
    "responses": [
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_REFUGEE_Alonso_Ugly_Action",
    "dynamic_line": {
      "npc_has_var": "Alonso_accent",
      "type": "general",
      "context": "none",
      "value": "asked",
      "no": "Oh, I mean Alonso is flattered but yes that is for certainly going to happen.",
      "yes": "Woo!  I got no standards at all!  Sorry, I shouldn't have said that out loud, I will make it up to you."
    },
    "speaker_effect": { "sentinel": "service_provided", "effect": { "u_add_effect": "VIBE", "duration": 360 } },
    "responses": [
      { "text": "What were you saying before?", "topic": "TALK_NONE" },
      { "text": "I'd better get going.", "topic": "TALK_DONE" }
    ]
  },
  {
    "id": "MISSION_REFUGEE_Alonso_condoms2",
    "type": "mission_definition",
    "name": { "str": "Alonso needs more condoms" },
    "goal": "MGOAL_FIND_ANY_ITEM",
    "difficulty": 1,
    "value": 1000,
    "item": "condom",
    "start": { "effect": { "u_add_var": "Alonso_condoms2", "type": "mission", "context": "flag", "value": "in_progress" } },
    "end": {
      "effect": [
        { "u_add_var": "Alonso_condoms2", "type": "mission", "context": "flag", "value": "yes" },
        { "npc_add_effect": "Alonso_condoms_restored", "duration": 100000 }
      ]
    },
    "origins": [ "ORIGIN_SECONDARY" ],
    "dialogue": {
      "describe": "I tried to save them as long as I could but they're all gone…",
      "offer": "I swear to you I did not waste one, each produced the maximum possible benefit to the community.  Yes, I am as of a saint for this service I provide to the people.  But tragedy has stroke and Alonso is left with nothing to console the public.  Will you help me again?  I can make do with any condoms, the life she finds a way.",
      "accepted": "You make me so happy I could give you little kisses, and some big kisses, and then something else maybe.",
      "rejected": "I know that you cannot resist me long.  I will wait, and perhaps some other pretty thing will help me instead?",
      "advice": "I think the places of shopping and the homes will have something?",
      "inquire": "Have you found what it is that you seek?  There may be something in it for you no?  Something big, but we take it slow yes?",
      "success": "I haven't been this happy since I went to the club and it was crazy.  You cannot believe.  I never see bingo played like that.",
      "success_lie": "You give me confidence.  I trust you.  I do not know why this is.",
      "failure": "Disaster, but I thank you for to try.  You want a backrub some time, it will happen for sure.  And maybe you give me a rub too?"
    }
  }
]
