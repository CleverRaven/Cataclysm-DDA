[
  {
    "type": "npc",
    "id": "NPC_scrap_trader",
    "class": "NC_SCAVENGER",
    "name_suffix": "scrapper",
    "attitude": 0,
    "mission": 3,
    "chat": "TALK_NPC_SCRAP_TRADER",
    "faction": "wasteland_scavengers",
    "mission_offered": "MISSION_SCRAP_TRADER_GET_25_MAGNETRON"
  },
  {
    "type": "npc_class",
    "id": "NC_Scavenger",
    "name": { "str": "Merchant" },
    "job_description": "I'm a local shopkeeper.",
    "common": true,
    "sells_belongings": false,
    "bonus_str": 2,
    "shopkeeper_item_group": [ { "group": "SCRAPPER_Shop", "rigid": true } ],
    "shopkeeper_consumption_rates": "basic_shop_rates"
    "shopkeeper_price_rules": [
      { "item": "scrap", "fixed_price": 20 },
      { "item": "sheet_metal_small", "fixed_price": 50 },
      { "item": "steel_chunk", "fixed_price": 100 },
      { "item": "steel_lump", "fixed_price": 300 },
      { "item": "sheet_metal", "fixed_price": 500 },
      { "item": "lc_steel_lump", "fixed_price": 600 },
      { "item": "mc_steel_lump", "fixed_price": 800 },
      { "item": "hc_steel_lump", "fixed_price": 1000 },
      { "item": "scrap_aluminum", "fixed_price": 300 },
      { "item": "scrap_bronze", "fixed_price": 500 },
      { "item": "bismuth", "fixed_price": 10 },
      { "item": "zinc_metal", "fixed_price": 10 },
      { "item": "lead", "fixed_price": 12 },
      { "item": "scrap_copper", "fixed_price": 140 },
      { "item": "tin", "fixed_price": 18 },
      { "item": "magnesium", "fixed_price": 20 },
      { "item": "silver_small", "fixed_price": 28 },
      { "item": "gold_small", "fixed_price": 100 },
      { "item": "platinum_small", "fixed_price": 150 }
    ]
  },
  {
    "type": "item_group",
    "id": "SCRAPPER_Shop",
    "subtype": "collection",
    "items": [
      { "item": "scrap", "count": [ 200, 300 ] },
      { "item": "sheet_metal_small", "count": [ 50, 100 ] },
      { "item": "steel_chunk", "count": [ 100, 200 ] },
      { "item": "steel_lump", "count": [ 50, 100 ] },
      { "item": "sheet_metal", "count": [ 25, 50 ] },
      { "item": "lc_steel_lump", "count": [ 25, 50 ] },
      { "item": "mc_steel_lump", "count": [ 25, 50 ] },
      { "item": "hc_steel_lump", "count": [ 25, 50 ] },
      { "item": "scrap_aluminum", "count": [ 200, 300 ], "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "scrap_bronze", "count": [ 200, 300 ], "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "bismuth", "container": "bag_zipper", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "zinc_metal", "container": "jar_glass_sealed", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "lead", "container": "bag_zipper", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "scrap_copper", "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "tin", "container": "bag_zipper", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "magnesium", "container": "bag_zipper", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "silver_small", "container": "bag_zipper", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "gold_small", "container": "bag_zipper", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} },
      { "item": "platinum_small", "container": "jar_glass_sealed", "count": 100, "condition": { "npc_has_var": "specific_metal_tradeable"} }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER",
    "dynamic_line": {
      "npc_has_var": "talked_to_trader",
      "type": "dialogue",
      "context": "first_meeting",
      "value": "yes",
      "yes": "Hello there.  Nice to see you, <name_g>.",
      "no": "Haven't seen another face in quite a while.  Not a living one, at least.  State your business.  Maybe you got some use for some of this scrap metal?"
    },
    "speaker_effect": { "effect": { "npc_add_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" } },
    "responses": [
      {
        "text": "Nice to meet you.",
        "topic": "TALK_NPC_SCRAP_TRADER_INTRO",
        "condition": { "not": { "npc_has_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" } }
      },
      {
        "text": "Hands up, <name_b>!",
        "trial": { "type": "INTIMIDATE", "difficulty": 30 },
        "success": { "topic": "TALK_WEAPON_DROPPED", "effect": "drop_weapon", "opinion": { "trust": -4, "fear": 3 } },
        "failure": { "topic": "TALK_DONE", "effect": "hostile" },
        "condition": { "not": { "npc_has_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" } }
      },
      {
        "text": "Pleasure to see you again, <name_g>.",
        "topic": "TALK_NPC_SCRAP_TRADER_INTRO",
        "condition": { "npc_has_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" }
      },
      { "text": "See ya.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_INTRO",
    "dynamic_line": "Do you need something?",
    "responses": [
      { "text": "What's your story?", "topic": "TALK_NPC_SCRAP_TRADER_STORY" },
      { "text": "Why stay here of all places?", "topic": "TALK_NPC_SCRAP_TRADER_FORT" },
      { "text": "Can I buy anything?", "topic": "TALK_SCRAP_TRADER_BULK_SELL" },
      {
        "text": "Any jobs you need done?",
        "condition": { "and": [ { "not": "has_assigned_mission" }, { "not": "has_many_assigned_missions" } ] },
        "topic": "TALK_MISSION_LIST"
      },
      { "text": "Nah, see ya.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_STORY",
    "dynamic_line": "Well, I held a modest job here as a scrap yard worker.  Business was fair most days, but when <the_cataclysm> hit, I was on a solo shift.  With all the craziness going on in the cities and whatnot, I decided to just stay here for while.  I figure someone might find a use for the leftover metal lying around, so I started selling it to anyone who passed by.",
    "responses": [ { "text": "Hmm.", "topic": "TALK_NONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_FORT",
    "dynamic_line": "Like I said, I was already here when the dead got pissed off.  This place had some barbed wire, metalworking tools, and plenty of stuff to make weapons out of.  Even the walls are my own making.",
    "responses": [
      { "text": "Interesting.", "topic": "TALK_NONE" },
      { "text": "Think I could stay here?", "topic": "TALK_NPC_SCRAP_TRADER_HOME_STAY" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_HOME_STAY",
    "dynamic_line": "Sure, I'm fine with it.  There's a spare bed over there for anyone who needs it.  Just don't hog it.  Someone else might come along.",
    "responses": [ { "text": "Thanks, <name_g>.", "topic": "TALK_NPC_SCRAP_TRADER_INTRO" } ]
  },
  {
    "id": "TALK_SCRAP_TRADER_BULK_SELL",
    "//": "this is all the dialogue related to buying bulk metal or scrap.",
    "type": "talk_topic",
    "dynamic_line": [ "Sure thing.  I've got a few things on hand.  What'll ya have?" ],
    "responses": [
      { "text": "Nevermind.", "topic": "TALK_NONE" },
      { "text": "Let's take a look at your stock.", "topic": "TALK_SCRAP_TRADER_BULK_SELL_END", "effect": "start_trade" }
    ]
  },
  {
    "id": "TALK_SCRAP_TRADER_BULK_SELL_END",
    "type": "talk_topic",
    "dynamic_line": [ "Anything else you need?" ],
    "responses": [
      { "text": "No, that's all.", "topic": "TALK_DONE" },
      { "text": "Yes, actually.", "topic": "TALK_SCRAP_TRADER_BULK_SELL_END", "effect": "start_trade" }
    ]
  }
]
