[
  {
    "type": "talk_topic",
    "id": "TALK_TEST_START",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SIMPLE_STATS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      { "text": "This is a strength test response.", "topic": "TALK_DONE", "condition": { "u_has_strength": 7 } },
      { "text": "This is a dexterity test response.", "topic": "TALK_DONE", "condition": { "u_has_dexterity": 7 } },
      {
        "text": "This is an intelligence test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_intelligence": 7 }
      },
      { "text": "This is a perception test response.", "topic": "TALK_DONE", "condition": { "u_has_perception": 7 } }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NEGATED_STATS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a low strength test response.",
        "topic": "TALK_DONE",
        "condition": { "not": { "u_has_strength": 7 } }
      },
      {
        "text": "This is a low dexterity test response.",
        "topic": "TALK_DONE",
        "condition": { "not": { "u_has_dexterity": 7 } }
      },
      {
        "text": "This is a low intelligence test response.",
        "topic": "TALK_DONE",
        "condition": { "not": { "u_has_intelligence": 7 } }
      },
      {
        "text": "This is a low perception test response.",
        "topic": "TALK_DONE",
        "condition": { "not": { "u_has_perception": 7 } }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_WEARING_AND_TRAIT",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a trait test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_any_trait": [ "CANINE_EARS", "LUPINE_EARS", "FELINE_EARS", "URSINE_EARS", "ELFA_EARS" ] }
      },
      {
        "text": "This is a short trait test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_trait": "ELFA_EARS" }
      },
      {
        "text": "This is a wearing test response.",
        "topic": "TALK_DONE",
        "condition": { "u_is_wearing": "badge_marshal" }
      },
      {
        "text": "This is a npc trait test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_any_trait": [ "CANINE_EARS", "LUPINE_EARS", "FELINE_EARS", "URSINE_EARS", "ELFA_EARS" ] }
      },
      {
        "text": "This is a npc short trait test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_trait": "ELFA_EARS" }
      },
      {
        "text": "This is a trait flags test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_flag": "CANNIBAL" }
      },
      {
        "text": "This is a npc trait flags test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_flag": "CANNIBAL" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_EFFECT",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is an npc effect test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_effect": "gave_quest_item" }
      },
      {
        "text": "This is a player effect test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_effect": "gave_quest_item" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SERVICE",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      { "text": "This is a cash test response.", "topic": "TALK_DONE", "condition": { "u_has_cash": 500 } },
      { "text": "This is an npc service test response.", "topic": "TALK_DONE", "condition": { "npc_service": true } },
      { "text": "This is an npc available test response.", "topic": "TALK_DONE", "condition": "npc_available" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_LOCATION",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a om_location_field test response.",
        "topic": "TALK_DONE",
        "condition": { "u_at_om_location": "field" }
      },
      {
        "text": "This is a faction camp any test response.",
        "topic": "TALK_DONE",
        "condition": { "u_at_om_location": "FACTION_CAMP_ANY" }
      },
      {
        "text": "This is a om_location_field direction variant response.",
        "topic": "TALK_DONE",
        "condition": { "u_at_om_location": "evac_center_7" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NPC_ROLE",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a nearby role test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_role_nearby": "TEST_ROLE" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NPC_CLASS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a class test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_class": "NC_TEST_CLASS" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NPC_ALLIES",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      { "text": "This is a npc allies 1 test response.", "topic": "TALK_DONE", "condition": { "npc_allies": 1 } },
      {
        "text": "This an error!  npc allies 2 test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_allies": 2 }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NPC_RULES",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a npc engagement rule test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_engagement_rule": "ENGAGE_ALL" }
      },
      {
        "text": "This is a npc aim rule test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_aim_rule": "AIM_SPRAY" }
      },
      { "text": "This is a npc rule test response.", "topic": "TALK_DONE", "condition": { "npc_rule": "use_silent" } }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NPC_NEEDS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a npc thirst test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_need": "thirst", "amount": 75 }
      },
      {
        "text": "This is a npc hunger test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_need": "hunger", "amount": 75 }
      },
      {
        "text": "This is a npc fatigue test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_need": "fatigue", "level": "DEAD_TIRED" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_MISSION_GOAL",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a mission goal test response.",
        "topic": "TALK_DONE",
        "condition": { "mission_goal": "MGOAL_ASSASSINATE" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SEASON",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a season spring test response.",
        "topic": "TALK_DONE",
        "condition": { "is_season": "spring" }
      },
      {
        "text": "This is a days since Cataclysm 30 test response.",
        "topic": "TALK_DONE",
        "condition": { "days_since_cataclysm": 30 }
      },
      {
        "text": "This is a season summer test response.",
        "topic": "TALK_DONE",
        "condition": { "is_season": "summer" }
      },
      {
        "text": "This is a days since Cataclysm 120 test response.",
        "topic": "TALK_DONE",
        "condition": { "days_since_cataclysm": 120 }
      },
      {
        "text": "This is a season autumn test response.",
        "topic": "TALK_DONE",
        "condition": { "is_season": "autumn" }
      },
      {
        "text": "This is a days since Cataclysm 210 test response.",
        "topic": "TALK_DONE",
        "condition": { "days_since_cataclysm": 210 }
      },
      {
        "text": "This is a season winter test response.",
        "topic": "TALK_DONE",
        "condition": { "is_season": "winter" }
      },
      {
        "text": "This is a days since Cataclysm 300 test response.",
        "topic": "TALK_DONE",
        "condition": { "days_since_cataclysm": 300 }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_TIME",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      { "text": "This is a is day test response.", "topic": "TALK_DONE", "condition": "is_day" },
      { "text": "This is a is night test response.", "topic": "TALK_DONE", "condition": { "not": "is_day" } }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SWITCH",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is an switch 1 test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_cash": 500 },
        "switch": true
      },
      {
        "text": "This is an switch 2 test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_cash": 50 },
        "switch": true
      },
      {
        "text": "This is an switch default 1 test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_cash": 5 },
        "switch": true,
        "default": true
      },
      { "text": "This is an switch default 2 test response.", "topic": "TALK_DONE", "switch": true, "default": true },
      { "text": "This is another basic test response.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_OR",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is an or trait test response.",
        "topic": "TALK_DONE",
        "condition": {
          "or": [
            { "u_has_any_trait": [ "CANINE_EARS", "LUPINE_EARS", "FELINE_EARS", "URSINE_EARS", "ELFA_EARS" ] },
            "npc_available",
            { "u_has_cash": 500 }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_AND",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is an and cash, available, trait test response.",
        "topic": "TALK_DONE",
        "condition": {
          "and": [
            { "u_has_any_trait": [ "CANINE_EARS", "LUPINE_EARS", "FELINE_EARS", "URSINE_EARS", "ELFA_EARS" ] },
            "npc_available",
            { "u_has_cash": 500 }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NESTED",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a complex nested test response.",
        "topic": "TALK_DONE",
        "condition": {
          "and": [
            { "not": { "or": [ { "u_has_strength": 10 }, { "u_has_dexterity": 10 } ] } },
            { "or": [ { "not": "npc_available" }, { "u_has_intelligence": 10 } ] },
            { "u_has_cash": 500 }
          ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_TRUE_FALSE_CONDITIONAL",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "truefalsetext": {
          "condition": { "u_has_cash": 500 },
          "true": "This is a true/false true response.",
          "false": "This is a true/false false response."
        },
        "topic": "TALK_DONE"
      },
      {
        "text": "This is a conditional trial response.",
        "trial": { "type": "CONDITION", "condition": { "u_has_cash": 500 } },
        "success": { "topic": "TALK_TEST_TRUE_CONDITION_NEXT" },
        "failure": { "topic": "TALK_TEST_FALSE_CONDITION_NEXT" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_EFFECTS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a u_add_effect - infection response",
        "topic": "TALK_DONE",
        "effect": { "u_add_effect": "infection", "duration": 10 }
      },
      {
        "text": "This is a npc_add_effect - infection response",
        "topic": "TALK_DONE",
        "effect": { "npc_add_effect": "infection", "duration": "PERMANENT" },
        "//": "Response 2"
      },
      {
        "text": "This is a u_lose_effect - infection response",
        "topic": "TALK_DONE",
        "effect": { "u_lose_effect": "infection" }
      },
      {
        "text": "This is a npc_lose_effect - infection response",
        "topic": "TALK_DONE",
        "effect": { "npc_lose_effect": "infection" },
        "//": "Response 4"
      },
      {
        "text": "This is a u_add_trait - FED MARSHALL response",
        "topic": "TALK_DONE",
        "effect": { "u_add_trait": "PROF_FED" }
      },
      {
        "text": "This is a npc_add_trait - FED MARSHALL response",
        "topic": "TALK_DONE",
        "effect": { "npc_add_trait": "PROF_FED" }
      },
      {
        "text": "This is a u_lose_trait - FED MARSHALL response",
        "topic": "TALK_DONE",
        "effect": { "u_lose_trait": "PROF_FED" }
      },
      {
        "text": "This is a npc_lose_trait - FED MARSHALL response",
        "topic": "TALK_DONE",
        "effect": { "npc_lose_trait": "PROF_FED" },
        "//": "Response 8"
      },
      {
        "text": "This is a u_buy_item bottle of beer response",
        "topic": "TALK_DONE",
        "effect": { "u_buy_item": "beer", "cost": 500, "count": 2, "container": "bottle_glass" }
      },
      {
        "text": "This is a u_spawn_item plastic bottle response",
        "topic": "TALK_DONE",
        "effect": { "u_spawn_item": "bottle_plastic" }
      },
      { "text": "This is a u_spend_cash response", "topic": "TALK_DONE", "effect": { "u_spend_cash": 500 } },
      {
        "text": "This is a multi-effect response",
        "topic": "TALK_DONE",
        "effect": [
          { "u_add_effect": "infected", "duration": 10 },
          { "npc_add_effect": "infected", "duration": "PERMANENT" },
          { "u_add_trait": "PROF_SWAT" },
          { "npc_add_trait": "PROF_SWAT" },
          { "u_spend_cash": 1000 },
          { "u_spawn_item": "manual_speech" },
          { "u_spawn_item": "dnd_handbook" },
          "hostile"
        ],
        "//": "Response 12"
      },
      {
        "text": "This is an opinion response",
        "topic": "TALK_DONE",
        "opinion": { "trust": 10, "fear": 11, "value": 12, "anger": 13, "owed": 14 }
      },
      {
        "text": "This is a u_sell_item plastic bottle response",
        "topic": "TALK_DONE",
        "effect": [ { "u_sell_item": "bottle_plastic" }, { "u_sell_item": "beer", "count": 2 } ],
        "//": "Response 14"
      },
      {
        "text": "This is a npc_consume_item beer response",
        "topic": "TALK_DONE",
        "effect": { "npc_consume_item": "beer", "count": 1 },
        "//": "Response 15, out of order"
      },
      {
        "text": "This is a u_spawn_item beer response",
        "topic": "TALK_DONE",
        "effect": { "u_spawn_item": "beer", "container": "bottle_glass" }
      },
      {
        "text": "This is a u_consume_item beer response",
        "topic": "TALK_DONE",
        "effect": { "u_consume_item": "beer", "count": 1 },
        "//": "Response 17"
      },
      {
        "text": "This is a npc_class_change response",
        "topic": "TALK_DONE",
        "effect": { "npc_change_class": "NC_NONE" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_HAS_ITEM",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a u_has_item beer test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_item": "beer" }
      },
      {
        "text": "This is a u_has_item bottle_glass test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_item": "bottle_glass" }
      },
      {
        "text": "This is a u_has_items beer test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_items": { "item": "beer", "count": 2 } }
      },
      {
        "text": "Test failure!  This is a u_has_items test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_items": { "item": "bottle_glass", "count": 2 } }
      },
      {
        "text": "This is a u_has_item_category manuals test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_item_category": "manuals" }
      },
      {
        "text": "This is a u_has_item_category manuals count 2 test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_item_category": "manuals", "count": 2 }
      },
      {
        "text": "Failure!  This is a u_has_item_category manuals count 3 test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_item_category": "manuals", "count": 3 }
      }
    ],
    "repeat_responses": {
      "for_item": "manual_speech",
      "response": { "text": "This is a repeated item manual_speech test response", "topic": "TALK_DONE" }
    }
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_ITEM_REPEAT",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ],
    "repeat_responses": [
      {
        "for_item": [ "beer", "bottle_glass" ],
        "response": { "text": "This is a repeated item beer, bottle_glass test response", "topic": "TALK_DONE" }
      },
      {
        "for_category": "manuals",
        "response": { "text": "This is a repeated category manuals test response", "topic": "TALK_DONE" }
      },
      {
        "for_category": [ "manuals", "food" ],
        "response": { "text": "This is a repeated category manuals, food test response", "topic": "TALK_DONE" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_VARS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a u_add_var test response.",
        "topic": "TALK_DONE",
        "effect": { "u_add_var": "test", "type": "test", "context": "var_test", "value": "beer" },
        "condition": { "not": { "u_has_var": "test", "type": "test", "context": "var_test", "value": "beer" } }
      },
      {
        "text": "This is a npc_add_var test response.",
        "topic": "TALK_DONE",
        "effect": { "npc_add_var": "test", "type": "test", "context": "var_test", "value": "reeb" },
        "condition": { "not": { "u_has_var": "test", "type": "test", "context": "var_test", "value": "beer" } }
      },
      {
        "text": "This is a u_has_var, u_remove_var test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_var": "test", "type": "test", "context": "var_test", "value": "beer" },
        "effect": { "u_lose_var": "test", "type": "test", "context": "var_test" }
      },
      {
        "text": "This is a npc_has_var, npc_remove_var test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_var": "test", "type": "test", "context": "var_test", "value": "reeb" },
        "effect": { "npc_lose_var": "test", "type": "test", "context": "var_test" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_VARS_TIME",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a u_add_var time test response.",
        "topic": "TALK_DONE",
        "effect": { "u_add_var": "test", "type": "test", "context": "var_time_test", "time": true },
        "condition": { "not": { "u_has_var": "test", "type": "test", "context": "var_time_test", "time": true } }
      },
      {
        "text": "This is a npc_add_var time test response.",
        "topic": "TALK_DONE",
        "effect": { "npc_add_var": "test", "type": "test", "context": "var_time_test", "time": true },
        "condition": { "not": { "u_has_var": "test", "type": "test", "context": "var_time_test", "time": true } }
      },
      {
        "text": "This is a u_compare_var time test response for > 3_days.",
        "topic": "TALK_DONE",
        "condition": { "u_compare_time_since_var": "test", "type": "test", "context": "var_time_test", "op": ">", "time": "3 days" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_ADJUST_VARS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a u_adjust_var test response that increments by 1.",
        "topic": "TALK_DONE",
        "effect": { "u_adjust_var": "test", "type": "test", "context": "var_adjust_test", "adjustment": 1 }
      },
      {
        "text": "This is a u_adjust_var test response that decrements by 1.",
        "topic": "TALK_DONE",
        "effect": { "u_adjust_var": "test", "type": "test", "context": "var_adjust_test", "adjustment": -1 }
      },
      {
        "text": "This is a npc_adjust_var test response that increments by 1.",
        "topic": "TALK_DONE",
        "effect": { "npc_adjust_var": "test", "type": "test", "context": "var_adjust_test", "adjustment": 1 }
      },
      {
        "text": "This is a npc_adjust_var test response that decrements by 1.",
        "topic": "TALK_DONE",
        "effect": { "npc_adjust_var": "test", "type": "test", "context": "var_adjust_test", "adjustment": -1 }
      },
      {
        "text": "This is a u_compare_var test response for == 0.",
        "topic": "TALK_DONE",
        "condition": { "u_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "==", "value": 0 }
      },
      {
        "text": "This is a u_compare_var test response for != 0.",
        "topic": "TALK_DONE",
        "condition": { "u_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "!=", "value": 0 }
      },
      {
        "text": "This is a u_compare_var test response for <= 0.",
        "topic": "TALK_DONE",
        "condition": { "u_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "<=", "value": 0 }
      },
      {
        "text": "This is a u_compare_var test response for >= 0.",
        "topic": "TALK_DONE",
        "condition": { "u_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": ">=", "value": 0 }
      },
      {
        "text": "This is a u_compare_var test response for < 0.",
        "topic": "TALK_DONE",
        "condition": { "u_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "<", "value": 0 }
      },
      {
        "text": "This is a u_compare_var test response for > 0.",
        "topic": "TALK_DONE",
        "condition": { "u_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": ">", "value": 0 }
      },
      {
        "text": "This is a npc_compare_var test response for == 0.",
        "topic": "TALK_DONE",
        "condition": { "npc_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "==", "value": 0 }
      },
      {
        "text": "This is a npc_compare_var test response for != 0.",
        "topic": "TALK_DONE",
        "condition": { "npc_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "!=", "value": 0 }
      },
      {
        "text": "This is a npc_compare_var test response for <= 0.",
        "topic": "TALK_DONE",
        "condition": { "npc_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "<=", "value": 0 }
      },
      {
        "text": "This is a npc_compare_var test response for >= 0.",
        "topic": "TALK_DONE",
        "condition": { "npc_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": ">=", "value": 0 }
      },
      {
        "text": "This is a npc_compare_var test response for < 0.",
        "topic": "TALK_DONE",
        "condition": { "npc_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": "<", "value": 0 }
      },
      {
        "text": "This is a npc_compare_var test response for > 0.",
        "topic": "TALK_DONE",
        "condition": { "npc_compare_var": "test", "type": "test", "context": "var_adjust_test", "op": ">", "value": 0 }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_BIONICS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a u_has_bionics bio_ads test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_bionics": "bio_ads" }
      },
      {
        "text": "Failure!  This is a npc_has_bionics bio_ads test response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_bionics": "bio_ads" }
      },
      {
        "text": "This is a npc_has_bionics ANY response.",
        "topic": "TALK_DONE",
        "condition": { "npc_has_bionics": "ANY" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_SIMPLE",
    "speaker_effect": { "effect": { "u_spend_cash": 500 } },
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_SIMPLE_CONDITIONAL",
    "speaker_effect": { "condition": { "u_has_cash": 750 }, "effect": { "u_spend_cash": 500 } },
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_SENTINEL",
    "speaker_effect": { "sentinel": "spend500", "effect": { "u_spend_cash": 500 } },
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_SENTINEL_CONDITIONAL",
    "speaker_effect": { "sentinel": "spend500", "condition": { "u_are_owed": 750 }, "effect": { "u_spend_cash": 500 } },
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_COMPOUND",
    "speaker_effect": [ { "effect": { "u_spend_cash": 500 } }, { "effect": { "u_spend_cash": 500 } } ],
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_COMPOUND_CONDITIONAL",
    "speaker_effect": [
      { "condition": { "u_are_owed": 1500 }, "effect": { "u_spend_cash": 1000 } },
      { "condition": { "u_are_owed": 750 }, "effect": { "u_spend_cash": 500 } }
    ],
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_COMPOUND_SENTINEL",
    "speaker_effect": [ { "sentinel": "spend250", "effect": { "u_spend_cash": 250 } }, { "effect": { "u_spend_cash": 500 } } ],
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SPEAKER_EFFECT_COMPOUND_SENTINEL_CONDITIONAL",
    "speaker_effect": [
      { "sentinel": "spend250", "condition": { "u_are_owed": 750 }, "effect": { "u_spend_cash": 250 } },
      { "sentinel": "spend500", "condition": { "u_are_owed": 750 }, "effect": { "u_spend_cash": 500 } }
    ],
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [ { "text": "This is a basic test response.", "topic": "TALK_DONE" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_MAPGEN",
    "dynamic_line": [ "This is an example of mapgen_update effect variations" ],
    "responses": [
      {
        "text": "Please test some simple remote mapgen",
        "topic": "TALK_DONE",
        "effect": { "mapgen_update": "faction_wall_level_N_0", "origin_npc": true }
      },
      {
        "text": "Please test mapgen_update multiples",
        "topic": "TALK_DONE",
        "effect": [
          { "mapgen_update": "faction_wall_level_E_0", "origin_npc": true, "offset_y": 1 },
          { "mapgen_update": "faction_wall_level_W_0", "origin_npc": true, "offset_x": 1 }
        ]
      },
      {
        "text": "Please test mapgen_update linked",
        "topic": "TALK_DONE",
        "effect": { "mapgen_update": [ "faction_wall_level_S_1", "faction_wall_level_N_1" ], "origin_npc": true, "offset_y": -1 }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SIMPLE_SKILLS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a driving test response.",
        "topic": "TALK_DONE",
        "condition": { "u_has_skill": { "skill": "driving", "level": 7 } }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_NEGATED_SKILLS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is a low driving test response.",
        "topic": "TALK_DONE",
        "condition": { "not": { "u_has_skill": { "skill": "driving", "level": 7 } } }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_SET_TOPIC",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      {
        "text": "This is an npc_first_topic test response.",
        "topic": "TALK_DONE",
        "effect": { "npc_first_topic": "TALK_TEST_SET_TOPIC" }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_COMPARE_INT_OP",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "Two = five.", "topic": "TALK_DONE", "condition": { "compare_int": [ { "const": 2 }, "=", { "const": 5 } ] } },
      {
        "text": "Two == five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 2 }, "==", { "const": 5 } ] }
      },
      {
        "text": "Two != five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 2 }, "!=", { "const": 5 } ] }
      },
      {
        "text": "Two <= five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 2 }, "<=", { "const": 5 } ] }
      },
      {
        "text": "Two >= five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 2 }, ">=", { "const": 5 } ] }
      },
      {
        "text": "Two < five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 2 }, "<", { "const": 5 } ] }
      },
      {
        "text": "Two > five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 2 }, ">", { "const": 5 } ] }
      },
      {
        "text": "Five = five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "=", { "const": 5 } ] }
      },
      {
        "text": "Five == five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "==", { "const": 5 } ] }
      },
      {
        "text": "Five != five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "!=", { "const": 5 } ] }
      },
      {
        "text": "Five <= five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "<=", { "const": 5 } ] }
      },
      {
        "text": "Five >= five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, ">=", { "const": 5 } ] }
      },
      {
        "text": "Five < five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "<", { "const": 5 } ] }
      },
      {
        "text": "Five > five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, ">", { "const": 5 } ] }
      },
      {
        "text": "Five = two.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "=", { "const": 2 } ] }
      },
      {
        "text": "Five == two.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "==", { "const": 2 } ] }
      },
      {
        "text": "Five != two.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "!=", { "const": 2 } ] }
      },
      {
        "text": "Five <= two.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "<=", { "const": 2 } ] }
      },
      {
        "text": "Five >= two.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, ">=", { "const": 2 } ] }
      },
      {
        "text": "Five < two.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, "<", { "const": 2 } ] }
      },
      {
        "text": "Five > two.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "const": 5 }, ">", { "const": 2 } ] }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_TAGS",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "Avatar tag is set to <u_val:test_var>.", "topic": "TALK_DONE" },
      { "text": "NPC tag is set to <npc_val:test_var>.", "topic": "TALK_DONE" },
      { "text": "Global tag is set to <global_val:test_var>.", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_COMPARE_INT",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      {
        "text": "This is a u_adjust_var test response that increments by 1.",
        "topic": "TALK_DONE",
        "effect": { "u_adjust_var": "test", "type": "test", "context": "var_compare_test", "adjustment": 1 }
      },
      {
        "text": "This is an npc_adjust_var test response that increments by 2.",
        "topic": "TALK_DONE",
        "effect": { "npc_adjust_var": "test", "type": "test", "context": "var_compare_test", "adjustment": 2 }
      },
      {
        "text": "This is a u_add_var time test response.",
        "topic": "TALK_DONE",
        "effect": { "u_add_var": "test", "type": "test", "context": "var_time_test", "time": true },
        "condition": { "not": { "u_has_var": "test", "type": "test", "context": "var_time_test", "time": true } }
      },
      {
        "text": "PC strength is five.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "strength" }, "=", { "const": 5 } ] }
      },
      {
        "text": "PC dexterity is six.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "dexterity" }, "=", { "const": 6 } ] }
      },
      {
        "text": "PC intelligence is seven.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "intelligence" }, "=", { "const": 7 } ] }
      },
      {
        "text": "PC perception is eight.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "perception" }, "=", { "const": 8 } ] }
      },
      {
        "text": "NPC strength is nine.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "npc_val": "strength" }, "=", { "const": 9 } ] }
      },
      {
        "text": "NPC dexterity is ten.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "npc_val": "dexterity" }, "=", { "const": 10 } ] }
      },
      {
        "text": "NPC intelligence is eleven.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "npc_val": "intelligence" }, "=", { "const": 11 } ] }
      },
      {
        "text": "NPC perception is twelve.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "npc_val": "perception" }, "=", { "const": 12 } ] }
      },
      {
        "text": "PC Custom var is one.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "u_val": "var", "var_name": "test", "type": "test", "context": "var_compare_test" }, "=", { "const": 1 } ]
        }
      },
      {
        "text": "NPC Custom var is two.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "npc_val": "var", "var_name": "test", "type": "test", "context": "var_compare_test" }, "=", { "const": 2 } ]
        }
      },
      {
        "text": "This is a u_var time test response for > 3_days.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "u_val": "var", "var_name": "test", "type": "test", "context": "var_time_test" }, ">", { "time": "3 days" } ]
        }
      },
      {
        "text": "time_since_cataclysm > 3_days.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "time_since_cataclysm": "turns" }, ">", { "time": "3 days" } ] }
      },
      {
        "text": "time_since_cataclysm in days > 3",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "time_since_cataclysm": "days" }, ">", { "const": 3 } ] }
      },
      {
        "text": "This is a time since u_var test response for > 3_days.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [
            { "u_val": "time_since_var", "var_name": "test", "type": "test", "context": "var_time_test" },
            ">",
            { "time": "3 days" }
          ]
        }
      },
      {
        "text": "Allies equals 1",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "allies" }, "=", { "const": 1 } ] }
      },
      {
        "text": "Cash equals 13",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "cash" }, "=", { "const": 13 } ] }
      },
      {
        "text": "Owed amount equals 14",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "owed" }, "=", { "const": 14 } ] }
      },
      {
        "text": "Driving skill more than or equal to 5",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "skill_level", "skill": "driving" }, ">=", { "const": 5 } ] }
      },
      {
        "text": "A random number between 0 and 10 equals 11.",
        "topic": "TALK_DONE",
        "//": "Should never be true, kept here to show how the syntax is used.",
        "condition": { "compare_int": [ { "rand": 10 }, "=", { "const": 11 } ] }
      },
      {
        "text": "Temperature is 21.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "weather": "temperature" }, "=", { "const": 21 } ] }
      },
      {
        "text": "Windpower is 15.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "weather": "windpower" }, "=", { "const": 15 } ] }
      },
      {
        "text": "Humidity is 16.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "weather": "humidity" }, "=", { "const": 16 } ] }
      },
      {
        "text": "Pressure is 17.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "weather": "pressure" }, "=", { "const": 17 } ] }
      },
      {
        "text": "Pos_x is 18.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "pos_x" }, "=", { "const": 18 } ] }
      },
      {
        "text": "Pos_y is 19.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "pos_y" }, "=", { "const": 19 } ] }
      },
      {
        "text": "Pos_z is 20. This should be cause for alarm.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "pos_z" }, "=", { "const": 20 } ] }
      },
      {
        "text": "Pain level is 21.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "pain" }, "=", { "const": 21 } ] }
      },
      {
        "text": "Bionic power is 22.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "power" }, "=", { "const": 22 } ] }
      },
      {
        "text": "Bionic power max is 44.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "power_max" }, "=", { "const": 44 } ] }
      },
      {
        "text": "Bionic power is at 50%.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "power_percentage" }, "=", { "const": 50 } ] }
      },
      {
        "text": "Morale is 23.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "morale" }, "=", { "const": 23 } ] }
      },
      {
        "text": "Focus is 24.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "focus" }, "=", { "const": 24 } ] }
      },
      {
        "text": "Mana is 25.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "mana" }, "=", { "const": 25 } ] }
      },
      {
        "text": "Mana max is 900.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "mana_max" }, "=", { "const": 900 } ] }
      },
      {
        "text": "Mana is at 2%.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "mana_percentage" }, "=", { "const": 2 } ] }
      },
      {
        "text": "Hunger is 26.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "hunger" }, "=", { "const": 26 } ] }
      },
      {
        "text": "Thirst is 27.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "thirst" }, "=", { "const": 27 } ] }
      },
      {
        "text": "Stored kcal is 55'000.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "stored_kcal" }, "=", { "const": 55000 } ] }
      },
      {
        "text": "Stored kcal is at 100% of healthy.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "stored_kcal_percentage" }, "=", { "const": 100 } ] }
      },
      {
        "text": "Has 3 glass bottles.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "item_count", "item": "bottle_glass" }, "=", { "const": 3 } ] }
      },
      {
        "text": "Has more or equal to 35 experience.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "exp" }, ">=", { "const": 35 } ] }
      },
      {
        "text": "Highest spell level in school test_trait is 1.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "spell_level", "school": "test_trait" }, "==", { "const": 1 } ] }
      },
      {
        "text": "Spell level of Pew, Pew is 4.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "spell_level", "spell": "test_spell_pew" }, "==", { "const": 4 } ] }
      },
      {
        "text": "Spell level of highest spell is 12.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "spell_level" }, "==", { "const": 12 } ] }
      },
      {
        "text": "Exp of Pew, Pew is -1.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "spell_exp", "spell": "test_spell_pew" }, "==", { "const": -1 } ] }
      },
      {
        "text": "Exp of Pew, Pew is 11006.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "spell_exp", "spell": "test_spell_pew" }, "==", { "const": 11006 } ] }
      },
      {
        "text": "Test Proficiency learning is 5 out of 10.",
        "topic": "TALK_DONE",
        "condition": { "compare_int": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": 10 }, "==", { "const": 5 } ] }
      },
      {
        "text": "Test Proficiency learning done is 12 hours total.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "time_spent" }, "==", { "time": "12h" } ]
        }
      },
      {
        "text": "Test Proficiency learning is 50% learnt.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "percent" }, "==", { "const": 50 } ]
        }
      },
      {
        "text": "Test Proficiency learning is 500 permille learnt.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "permille" }, "==", { "const": 500 } ]
        }
      },
      {
        "text": "Test Proficiency total learning time is 24 hours.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "total_time_required" }, "==", { "time": "24h" } ]
        }
      },
      {
        "text": "Test Proficiency time lest to learn is 12h.",
        "topic": "TALK_DONE",
        "condition": {
          "compare_int": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "time_left" }, "==", { "time": "12h" } ]
        }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_ARITHMETIC_OP",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      {
        "text": "Sets time since cataclysm to 2 * 5 turns.  (10)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 2 }, "*", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to 15 / 5 turns.  (3)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 15 }, "/", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to 2 + 5 turns.  (7)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 2 }, "+", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to 5 - 2 turns.  (3)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 5 }, "-", { "const": 2 } ] }
      },
      {
        "text": "Sets time since cataclysm to 15 % 10 turns.  (5)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 15 }, "%", { "const": 10 } ] }
      },
      {
        "text": "Sets time since cataclysm to 3 & 6 turns.  (2)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 3 }, "&", { "const": 6 } ] }
      },
      {
        "text": "Sets time since cataclysm to 2 | 4 turns.  (6)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 2 }, "|", { "const": 6 } ] }
      },
      {
        "text": "Sets time since cataclysm to 3 << 2 turns.  (12)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 3 }, "<<", { "const": 2 } ] }
      },
      {
        "text": "Sets time since cataclysm to 12 >> 2 turns.  (3)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 12 }, ">>", { "const": 2 } ] }
      },
      {
        "text": "Sets time since cataclysm to  ~5 turns.  (?)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 5 }, "~" ] }
      },
      {
        "text": "Sets time since cataclysm to 2 ^ 5 turns.  (7)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 2 }, "^", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to 5 turns.  (5)",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to *= 5 turns.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "*=", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to /= 5 turns.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "/=", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to += 5 turns.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "+=", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to -= 5 turns.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "-=", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm to %= 5 turns.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "%=", { "const": 5 } ] }
      },
      {
        "text": "Sets time since cataclysm++.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "++" ] }
      },
      {
        "text": "Sets time since cataclysm--.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "--" ] }
      }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_ARITHMETIC",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      {
        "text": "Sets time since cataclysm to 1.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "time_since_cataclysm": "turns" }, "=", { "const": 1 } ] }
      },
      {
        "text": "Sets temperature to 2.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "weather": "temperature" }, "=", { "const": 2 } ] }
      },
      {
        "text": "Sets windpower to 3.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "weather": "windpower" }, "=", { "const": 3 } ] }
      },
      {
        "text": "Sets humidity to 4.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "weather": "humidity" }, "=", { "const": 4 } ] }
      },
      {
        "text": "Sets pressure to 5.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "weather": "pressure" }, "=", { "const": 5 } ] }
      },
      {
        "text": "Sets base strength to 6.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "strength_base" }, "=", { "const": 6 } ] }
      },
      {
        "text": "Sets base dexterity to 7.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "dexterity_base" }, "=", { "const": 7 } ] }
      },
      {
        "text": "Sets base intelligence to 8.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "intelligence_base" }, "=", { "const": 8 } ] }
      },
      {
        "text": "Sets base perception to 9.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "perception_base" }, "=", { "const": 9 } ] }
      },
      {
        "text": "Sets custom var to 10.",
        "topic": "TALK_DONE",
        "effect": {
          "arithmetic": [ { "u_val": "var", "var_name": "test", "type": "test", "context": "var_time_test" }, "=", { "const": 10 } ]
        }
      },
      {
        "text": "Sets time since var to 11.",
        "topic": "TALK_DONE",
        "effect": {
          "arithmetic": [ { "u_val": "time_since_var", "var_name": "test", "type": "test", "context": "var_time_test" }, "=", { "const": 11 } ]
        }
      },
      {
        "text": "Sets owed to 12.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "owed" }, "=", { "const": 12 } ] }
      },
      {
        "text": "Sets skill level in driving to 10.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "skill_level", "skill": "driving" }, "=", { "const": 10 } ] }
      },
      {
        "text": "Sets pos_x to 14.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "pos_x" }, "=", { "const": 14 } ] }
      },
      {
        "text": "Sets pos_y to 15.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "pos_y" }, "=", { "const": 15 } ] }
      },
      {
        "text": "Sets pos_z to 16.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "pos_z" }, "=", { "const": 16 } ] }
      },
      {
        "text": "Sets pain to 17.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "pain" }, "=", { "const": 17 } ] }
      },
      {
        "text": "Sets power to 18.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "power" }, "=", { "const": 18 } ] }
      },
      {
        "text": "Sets power to 20%.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "power_percentage" }, "=", { "const": 20 } ] }
      },
      {
        "text": "Sets focus to 19.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "focus" }, "=", { "const": 19 } ] }
      },
      {
        "text": "Sets mana to 21.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "mana" }, "=", { "const": 21 } ] }
      },
      {
        "text": "Sets mana to 25%.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "mana_percentage" }, "=", { "const": 25 } ] }
      },
      {
        "text": "Sets thirst to 22.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "thirst" }, "=", { "const": 22 } ] }
      },
      {
        "text": "Sets stored_kcal to 23.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "stored_kcal" }, "=", { "const": 23 } ] }
      },
      {
        "text": "Sets stored_kcal_percentage to 50.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "stored_kcal_percentage" }, "=", { "const": 50 } ] }
      },
      {
        "text": "Sets pew pew's level to -1.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "spell_level", "spell": "test_spell_pew" }, "=", { "const": -1 } ] }
      },
      {
        "text": "Sets pew pew's level to 4.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "spell_level", "spell": "test_spell_pew" }, "=", { "const": 4 } ] }
      },
      {
        "text": "Sets pew pew's exp to -1.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "spell_exp", "spell": "test_spell_pew" }, "=", { "const": -1 } ] }
      },
      {
        "text": "Sets pew pew's exp to 11006.",
        "topic": "TALK_DONE",
        "effect": { "arithmetic": [ { "u_val": "spell_exp", "spell": "test_spell_pew" }, "=", { "const": 11006 } ] }
      },
      {
        "text": "Sets Test Proficiency learning done to 12 hours total.",
        "topic": "TALK_DONE",
        "effect": {
          "arithmetic": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "time_spent" }, "=", { "time": "12h" } ]
        }
      },
      {
        "text": "Sets Test Proficiency learning done to -1.",
        "topic": "TALK_DONE",
        "effect": {
          "arithmetic": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "time_spent" }, "=", { "const": -1 } ]
        }
      },
      {
        "text": "Sets Test Proficiency learning done to 24h.",
        "topic": "TALK_DONE",
        "effect": {
          "arithmetic": [ { "u_val": "proficiency", "proficiency_id": "prof_test", "format": "time_spent" }, "=", { "time": "24h" } ]
        }
      }
    ]
  },
  {
    "type": "item_group",
    "id": "test_npc_belt",
    "items": [ [ "leather_belt", 50 ], [ "tool_belt", 10 ] ]
  },
  {
    "type": "item_group",
    "id": "test_npc_eyes",
    "items": [ [ "glasses_safety", 20 ], [ "sunglasses", 20 ], [ "fancy_sunglasses", 10 ] ]
  },
  {
    "type": "item_group",
    "id": "test_npc_hat",
    "items": [
      [ "hat_ball", 20 ],
      [ "hat_hard", 5 ],
      [ "hat_boonie", 5 ],
      [ "hat_cotton", 20 ],
      [ "hat_fur", 5 ],
      [ "hat_knit", 20 ],
      [ "hat_newsboy", 10 ],
      [ "cowboy_hat", 10 ],
      [ "hat_sombrero", 5 ],
      [ "10gal_hat", 5 ],
      [ "straw_hat", 5 ],
      [ "hat_hunting", 10 ],
      [ "hat_hard_hooded", 5 ],
      [ "helmet_bike", 10 ],
      [ "helmet_riot", 5 ],
      [ "helmet_motor", 5 ],
      [ "helmet_skid", 5 ],
      [ "helmet_ball", 5 ],
      [ "helmet_football", 5 ],
      [ "pot_helmet", 10 ],
      [ "firehelmet", 5 ],
      [ "helmet_army", 5 ]
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_FACTION_TRUST",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      { "text": "Faction trust is at least 20.", "topic": "TALK_DONE", "condition": { "u_has_faction_trust": 20 } },
      { "text": "Add 50 to faction trust.", "topic": "TALK_DONE", "effect": { "u_add_faction_trust": 50 } },
      { "text": "Start trade.", "topic": "TALK_DONE", "effect": "start_trade" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_TEST_META",
    "dynamic_line": "This is a test conversation that shouldn't appear in the game.",
    "responses": [
      { "text": "This is a basic test response.", "topic": "TALK_DONE" },
      { "text": "Mod TESTING DATA is loaded.", "topic": "TALK_DONE", "condition": { "mod_is_loaded": "test_data" } },
      { "text": "Mod Innawood is loaded.", "topic": "TALK_DONE", "condition": { "mod_is_loaded": "innawood" } }
    ]
  },
  {
    "type": "npc_class",
    "id": "test_shop_class",
    "name": { "str": "Test NPC class" },
    "job_description": "Participating in unit tests.",
    "common": false,
    "bonus_str": { "rng": [ -4, 0 ] },
    "bonus_dex": { "rng": [ -2, 0 ] },
    "bonus_int": { "rng": [ 1, 5 ] },
    "skills": [
      {
        "skill": "ALL",
        "level": { "mul": [ { "one_in": 3 }, { "sum": [ { "dice": [ 2, 2 ] }, { "constant": -2 }, { "one_in": 4 } ] } ] }
      }
    ],
    "shopkeeper_item_group": [
      { "group": "test_npc_belt" },
      { "group": "test_npc_eyes", "trust": 10 },
      { "group": "test_npc_hat", "trust": 40, "strict": true }
    ]
  },
  {
    "type": "npc",
    "id": "test_shopkeep",
    "//": "NPC in unit tests",
    "name_suffix": "Tester",
    "class": "test_shop_class",
    "attitude": 1,
    "mission": 0,
    "chat": "TALK_TEST_FACTION_TRUST",
    "faction": "free_merchants"
  },
  {
    "type": "npc",
    "id": "test_talker",
    "//": "NPC in unit tests",
    "name_suffix": "Tester",
    "class": "NC_DOCTOR",
    "attitude": 1,
    "mission": 0,
    "chat": "TALK_TEST_START",
    "faction": "tacoma_commune",
    "talk_friend_guard": "TALK_TEST_GUARD"
  },
  {
    "id": [ "TALK_TEST_GUARD" ],
    "type": "talk_topic",
    "responses": [ { "text": "I have a custom response to a common topic", "topic": "TALK_TEST_FACTION_TRUST" } ]
  }
]
