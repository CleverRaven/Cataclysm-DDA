[
  {
    "type": "npc",
    "id": "ranch_scrapper_1",
    "//": "Flavor",
    "name_suffix": "Scrapper",
    "class": "NC_HUNTER",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_RANCH_SCRAPPER",
    "faction": "tacoma_commune"
  },
  {
    "type": "talk_topic",
    "id": "TALK_RANCH_SCRAPPER",
    "dynamic_line": "Don't mind me.",
    "responses": [
      {
        "text": "The doctor needs some help building an anesthetic machine.  Do you have anything that could help?",
        "topic": "TALK_RANCH_SCRAPPER_ANESTHETIC_FOR_DOCTOR",
        "condition": {
          "and": [
            { "u_has_mission": "MISSION_RANCH_DOCTOR_MEDICAL_ANESTHETIC" },
            {
              "not": { "u_has_var": "doctor_anesthetic_scrappers_helped", "type": "mission", "context": "tacoma_ranch", "value": "yes" }
            }
          ]
        }
      },
      {
        "text": "Here's the tools you asked for.",
        "topic": "TALK_RANCH_SCRAPPER_ANESTHETIC_FOR_DOCTOR_TOOLS",
        "condition": {
          "and": [
            { "u_has_mission": "MISSION_RANCH_DOCTOR_MEDICAL_ANESTHETIC" },
            {
              "not": { "u_has_var": "doctor_anesthetic_scrappers_helped", "type": "mission", "context": "tacoma_ranch", "value": "yes" }
            },
            {
              "npc_has_var": "doctor_anesthetic_scrapper_needs_tools",
              "type": "mission",
              "context": "tacoma_ranch",
              "value": "yes"
            },
            { "u_has_item": "angle_grinder" },
            { "u_has_item": "hacksaw" }
          ]
        },
        "effect": [
          { "u_sell_item": "angle_grinder" },
          { "npc_consume_item": "angle_grinder" },
          { "u_sell_item": "hacksaw" },
          { "npc_consume_item": "hacksaw" },
          {
            "npc_add_var": "doctor_anesthetic_scrapper_needs_tools",
            "type": "mission",
            "context": "tacoma_ranch",
            "value": "no"
          },
          {
            "u_add_var": "doctor_anesthetic_scrappers_helped",
            "type": "mission",
            "context": "tacoma_ranch",
            "value": "yes"
          }
        ]
      },
      { "text": "What is your job here?", "topic": "TALK_RANCH_SCRAPPER_JOB" },
      { "text": "Do you need any help?", "topic": "TALK_RANCH_SCRAPPER_HIRE" },
      { "text": "I've got to go…", "topic": "TALK_DONE" }
    ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_RANCH_SCRAPPER_JOB",
    "dynamic_line": "I chop up useless vehicles for spare parts and raw materials.  If we can't use a vehicle immediately, we haul it into the ring we are building to surround the outpost.  It provides a measure of defense in the event that we get attacked.",
    "responses": [ { "text": "Interesting.", "topic": "TALK_RANCH_SCRAPPER" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_RANCH_SCRAPPER_HIRE",
    "dynamic_line": "I don't personally, the teams we send out to recover the vehicles usually need a hand, but can be hard to catch since they spend most of their time outside the outpost.",
    "responses": [ { "text": "OK.", "topic": "TALK_RANCH_SCRAPPER" } ]
  },
  {
    "type": "talk_topic",
    "id": "TALK_RANCH_SCRAPPER_ANESTHETIC_FOR_DOCTOR_TOOLS",
    "dynamic_line": "Thanks, these will certainly help.  I found the parts that you needed and can work with the doctor to build the equipment whenever they are ready.",
    "responses": [ { "text": "Thanks.", "topic": "TALK_RANCH_SCRAPPER" } ]
  },
  {
    "id": "TALK_RANCH_SCRAPPER_ANESTHETIC_FOR_DOCTOR",
    "type": "talk_topic",
    "dynamic_line": {
      "npc_has_var": "doctor_anesthetic_scrapper_needs_tools",
      "type": "mission",
      "context": "tacoma_ranch",
      "value": "yes",
      "yes": "I'm still looking for the parts you need.  Do you have the angle grinder and hacksaw that I asked for?",
      "no": "Hmm, let me think.  There might be a few things I could scrounge up to help, but it's going to take some time to sort through the scrap to find exactly what you need.  How about this… some of my tools are getting a bit worn and are in need of replacement.  If you could bring me a new angle grinder and a hacksaw, I should be able to find all the parts you need by the time you get back."
    },
    "responses": [
      {
        "text": "An angle grinder and a hacksaw?  I'll see what I can do.",
        "topic": "TALK_RANCH_SCAVENGER_1",
        "effect": {
          "npc_add_var": "doctor_anesthetic_scrapper_needs_tools",
          "type": "mission",
          "context": "tacoma_ranch",
          "value": "yes"
        },
        "condition": {
          "not": {
            "npc_has_var": "doctor_anesthetic_scrapper_needs_tools",
            "type": "mission",
            "context": "tacoma_ranch",
            "value": "yes"
          }
        }
      },
      {
        "text": "Not yet…",
        "topic": "TALK_RANCH_SCAVENGER_1",
        "condition": {
          "npc_has_var": "doctor_anesthetic_scrapper_needs_tools",
          "type": "mission",
          "context": "tacoma_ranch",
          "value": "yes"
        }
      },
      {
        "text": "I've got to go…",
        "topic": "TALK_DONE",
        "condition": {
          "npc_has_var": "doctor_anesthetic_scrapper_needs_tools",
          "type": "mission",
          "context": "tacoma_ranch",
          "value": "yes"
        }
      }
    ]
  }
]
