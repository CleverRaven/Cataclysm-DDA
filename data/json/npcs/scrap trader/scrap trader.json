[
{
    "type": "npc",
    "id": "NPC_scrap_trader",
    "class": "NC_SCAVENGER",
    "name_suffix": "scrapper",
    "attitude": 0,
    "mission": 7,
    "chat": "TALK_NPC_SCRAP_TRADER",
    "faction": "wasteland_scavengers",
    "mission_offered": "MISSION_SCRAP_TRADER_GET_25_MAGNETRON"
  },
{
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER",
    "dynamic_line":
    {
      "npc_has_var": "talked_to_trader",
      "type": "dialogue",
      "context": "first_meeting",
      "value": "yes",
      "yes": "Hello there. Nice to see you <name_g>.",
      "no": "Who are you? Would you like to buy anything?"
    },
    "speaker_effect": { "effect": { "npc_add_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" } },
    "responses": [
      { 
        "text": "Nice to meet you.", 
        "topic": "TALK_NPC_SCRAP_TRADER_INTRO", 
        "condition": { "not": { "npc_has_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" } }
      },
      {
        "text": "Hands up <name_b>!",
        "trial": { "type": "INTIMIDATE", "difficulty": 30 },
        "success": { "topic": "TALK_WEAPON_DROPPED", "effect": "drop_weapon", "opinion": { "trust": -4, "fear": 3 } },
        "failure": { "topic": "TALK_DONE", "effect": "hostile" }, 
        "condition": { "not": { "npc_has_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" } }
      },
      { 
        "text": "Pleasure to see you again <name_g>.", 
        "topic": "TALK_NPC_SCRAP_TRADER_INTRO", 
        "condition": { "npc_has_var": "talked_to_trader", "type": "dialogue", "context": "first_meeting", "value": "yes" }
      },
      { "text": "See ya.", "topic": "TALK_DONE" }
    ]
  },
{
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_INTRO",
    "dynamic_line": "Do you need something?",
    "responses": [
      { "text": "What's your story?", "topic": "TALK_NPC_SCRAP_TRADER_STORY" },
      { 
        "text": "Why stay here of all places?", 
        "topic": "TALK_NPC_SCRAP_TRADER_FORT"
      },
      { 
        "text": "Can I buy anything?", 
        "topic": "TALK_SCRAP_TRADER_BULK_SELL"
      },
      {
        "text": "Any jobs you need done?",
        "condition": { "and": [ { "not": "has_assigned_mission" }, { "not": "has_many_assigned_missions" } ] },
        "topic": "TALK_MISSION_LIST"
      },
      { "text": "Nah, see ya.", "topic": "TALK_DONE" }
    ]
  },
{
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_STORY",
    "dynamic_line": "Well, I held a modest job here as a scrap yard worker. Buisness was fair most days, but when <the_cataclysm> hit, I was on a solo shift. With all the craziness going on in the cities and whatnot, I decided to just stay here for while. I figure someone might find a use for the leftover metal lying around, so I started selling it to anyone who passed by.",
    "responses": [
      { "text": "Hmm.", "topic": "TALK_NONE" }
    ]
  },
{
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_FORT",
    "dynamic_line": "Like I said, I was already here when the dead got pissed of. On another note, this place had some barbed wire and plenty of stuff to make weapons out of. The walls are my own doing.",
    "responses": [
      { "text": "Interesting.", "topic": "TALK_NONE" },
      { "text": "Think I could stay here?", "topic": "TALK_NPC_SCRAP_TRADER_HOME_STAY" }
    ]
  },
{
    "type": "talk_topic",
    "id": "TALK_NPC_SCRAP_TRADER_HOME_STAY",
    "dynamic_line": "Sure, I'm fine with it. There's a spare bed over there for anyone. Just don't hog it, someone else might come along.",
    "responses": [
      { "text": "Thanks, <name_g>.", "topic": "TALK_NPC_SCRAP_TRADER_INTRO" }
    ]
  },
{
    "id": "TALK_SCRAP_TRADER_BULK_SELL",
    "//": "this is all the dialogue related to buying bulk metal or scrap.",
    "type": "talk_topic",
    "dynamic_line": [
      "Sure thing. I've got a few things on hand, sold in batches of 10-piece each. What'll ya have?"
    ],
    "responses": [
      { "text": "Nevermind.", "topic": "TALK_NONE" },
      { 
        "text": "I'd like some specialty metals.", 
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_SPECIALTY", 
        "condition": { "npc_has_var": "specific_metal_tradeable", "type": "dialogue", "context": "trade", "value": "yes" }
      },
      {
        "text": "I'll buy some scrap fragments. [2$]",
        "effect": [ { "u_buy_item": "scrap", "cost": 200, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some small sheet metal. [10$]",
        "effect": [ { "u_buy_item": "sheet_metal_small", "cost": 1000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some steel chunks. [20$]",
        "effect": [ { "u_buy_item": "steel_chunk", "cost": 2000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some steel lumps. [60$]",
        "effect": [ { "u_buy_item": "steel_lump", "cost": 6000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some low carbon steel. [80$]",
        "effect": [ { "u_buy_item": "lc_steel_chunk", "cost": 8000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some medium carbon steel. [100$]",
        "effect": [ { "u_buy_item": "mc_steel_chunk", "cost": 10000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },      
      {
        "text": "I'll buy some high carbon steel. [120$]",
        "effect": [ { "u_buy_item": "hc_steel_chunk", "cost": 12000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      }
    ]
  },
{
    "id": "TALK_SCRAP_TRADER_BULK_SELL_END",
    "type": "talk_topic",
    "dynamic_line": [
      "Anything else you need?"
    ],
    "responses": [
      { "text": "No, that's all.", "topic": "TALK_DONE" },
      { 
        "text": "I'd like some specialty metals.", 
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_SPECIALTY", 
        "condition": { "npc_has_var": "specific_metal_tradeable", "type": "dialogue", "context": "trade", "value": "yes" }
      },
      {
        "text": "I'll buy some scrap fragments. [2$]",
        "effect": [ { "u_buy_item": "scrap", "cost": 200, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some small sheet metal. [10$]",
        "effect": [ { "u_buy_item": "sheet_metal_small", "cost": 1000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some steel chunks. [20$]",
        "effect": [ { "u_buy_item": "steel_chunk", "cost": 2000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some steel lumps. [60$]",
        "effect": [ { "u_buy_item": "steel_lump", "cost": 6000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some low carbon steel. [80$]",
        "effect": [ { "u_buy_item": "lc_steel_chunk", "cost": 8000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some medium carbon steel. [100$]",
        "effect": [ { "u_buy_item": "mc_steel_chunk", "cost": 10000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },      
      {
        "text": "I'll buy some high carbon steel. [120$]",
        "effect": [ { "u_buy_item": "hc_steel_chunk", "cost": 12000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      }
    ]
  },
{
    "id": "TALK_SCRAP_TRADER_BULK_SELL_SPECIALTY",
    "type": "talk_topic",
    "dynamic_line": [
      "I have some in the back, in batches of ten a-piece. What do you want?"
    ],
    "//": "This is meant to be more costly due to the difficulty in obtaining them.",
    "responses": [
      { "text": "Nevermind.", "topic": "TALK_NONE" },      
      {
        "text": "I'll buy some bismuth. [10$]",
        "effect": [ { "u_buy_item": "bismuth", "cost": 1000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some zinc. [10$]",
        "effect": [ { "u_buy_item": "zinc_metal", "cost": 1000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some lead. [12$]",
        "effect": [ { "u_buy_item": "lead", "cost": 1200, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some copper. [14$]",
        "effect": [ { "u_buy_item": "scrap_copper", "cost": 1400, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some tin. [18$]",
        "effect": [ { "u_buy_item": "tin", "cost": 1800, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some magnesium. [20$]",
        "effect": [ { "u_buy_item": "magnesium", "cost": 2000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some silver. [28$]",
        "effect": [ { "u_buy_item": "silver_small", "cost": 2800, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some gold. [100$]",
        "effect": [ { "u_buy_item": "gold_small", "cost": 10000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      },
      {
        "text": "I'll buy some platinum. [150$]",
        "effect": [ { "u_buy_item": "platinum_small", "cost": 15000, "count": 10 } ],
        "topic": "TALK_SCRAP_TRADER_BULK_SELL_END"
      }
    ]
  }
]