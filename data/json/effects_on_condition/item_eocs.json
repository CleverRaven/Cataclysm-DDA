[
  {
    "type": "effect_on_condition",
    "id": "get_katana",
    "global": true,
    "effect": { "u_spawn_item": "katana" }
  },
  {
    "type": "effect_on_condition",
    "id": "get_deagle_44",
    "global": true,
    "effect": { "u_spawn_item": "modular_deagle_44", "use_item_group": true }
  },
  {
    "type": "effect_on_condition",
    "id": "get_m4_carbine",
    "global": true,
    "effect": { "u_spawn_item": "modular_m4a1", "use_item_group": true }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_scan_advanced_weather",
    "condition": {
      "or": [
        { "is_weather": "portal_storm" },
        { "is_weather": "distant_portal_storm" },
        { "is_weather": "close_portal_storm" },
        { "u_near_om_location": "unvitrified_orchard", "range": 10 },
        { "u_near_om_location": "LIXA_surface_1a", "range": 10 },
        { "u_near_om_location": "temple_stairs", "range": 10 },
        { "u_near_om_location": "mine_amigara_finale_central", "range": 10 },
        { "u_near_om_location": "highlands", "range": 10 },
        { "u_near_om_location": "exodii_base_x0y0z0", "range": 10 },
        { "u_near_om_location": "microlab_portal_security1", "range": 10 },
        { "u_near_om_location": "labyrinth_entrance", "range": 10 },
        { "u_near_om_location": "corpse_surface", "range": 10 },
        { "u_near_om_location": "corpse_brain", "range": 10 },
        { "u_near_om_location": "xedra_rural_church", "range": 10 },
        { "u_near_om_location": "morgantown_2b", "range": 10 },
        { "u_near_om_location": "cabin_3_reverberation", "range": 10 },
        { "u_near_om_location": "cabin_3_reverberation_hint", "range": 10 },
        { "u_near_om_location": "radiosphere_radio_tower_top", "range": 10 }
      ]
    },
    "effect": {
      "u_message": "The instruments whir for a moment before the computer emits 3 sharp beeps.  The LED screen reads \"ANOMALOUS CONDITIONS DETECTED - FULL SCAN RECOMMENDED\"."
    },
    "false_effect": {
      "u_message": "The instruments whir for a moment before the computer beeps once.  The LED screen reads \"CONDITIONS NORMAL\"."
    }
  },
  {
    "id": "EOC_vitrified_doll_talk",
    "type": "effect_on_condition",
    "condition": { "not": { "u_has_item": "imperfect_doll_complete" } },
    "effect": { "open_dialogue": { "topic": "vitrified_doll_talk_main" } }
  },
  {
    "id": "EOC_repair_imperfect_doll",
    "type": "effect_on_condition",
    "effect": [
      { "u_remove_item_with": "imperfect_doll_features" },
      { "u_remove_item_with": "imperfect_doll_arms" },
      { "u_remove_item_with": "imperfect_doll_legs" },
      { "u_spawn_item": "imperfect_doll_complete", "suppress_message": true },
      { "u_transform_radius": 5, "ter_furn_transform": "imperfect_doll_to_couch" }
    ]
  },
  {
    "id": "EOC_vitrified_bookcase_talk",
    "type": "effect_on_condition",
    "condition": { "not": { "u_has_item": "imperfect_doll_features" } },
    "effect": { "open_dialogue": { "topic": "vitrified_bookcase_talk_main" } },
    "false_effect": { "u_message": "This bookshelf is complete, now.", "type": "good", "popup": false }
  },
  {
    "id": "EOC_swap_glass_book_for_eyes",
    "type": "effect_on_condition",
    "effect": [
      { "u_remove_item_with": "glass_book" },
      { "u_spawn_item": "imperfect_doll_features", "suppress_message": true },
      { "u_transform_radius": 5, "ter_furn_transform": "glass_book_on_shelf" }
    ]
  },
  {
    "id": "EOC_vitrified_pool_talk",
    "type": "effect_on_condition",
    "condition": { "not": { "u_has_item": "imperfect_doll_legs" } },
    "effect": { "open_dialogue": { "topic": "vitrified_pool_talk_main" } },
    "false_effect": { "u_message": "The sailboat drifts in slow circles through the sand.", "type": "good", "popup": false }
  },
  {
    "id": "EOC_swap_glass_boat_for_legs",
    "type": "effect_on_condition",
    "effect": [ { "u_remove_item_with": "glass_boat" }, { "u_spawn_item": "imperfect_doll_legs", "suppress_message": true } ]
  },
  {
    "id": "EOC_vitrified_soil_talk",
    "type": "effect_on_condition",
    "condition": { "not": { "u_has_item": "imperfect_doll_arms" } },
    "effect": { "open_dialogue": { "topic": "vitrified_soil_talk_main" } },
    "false_effect": { "u_message": "A tiny glass sprout has begun to grow here.", "type": "good", "popup": false }
  },
  {
    "id": "EOC_swap_glass_apple_for_arms",
    "type": "effect_on_condition",
    "effect": [ { "u_remove_item_with": "glass_apple" }, { "u_spawn_item": "imperfect_doll_arms", "suppress_message": true } ]
  },
  {
    "id": "EOC_toolweapon_activate",
    "type": "effect_on_condition",
    "condition": { "not": "u_is_underwater" },
    "effect": [
      {
        "if": "has_ammo",
        "then": [
          { "turn_cost": { "context_val": "turn_cost" } },
          {
            "u_make_sound": { "context_val": "success_message" },
            "type": "combat",
            "volume": { "context_val": "volume" }
          },
          { "u_message": { "context_val": "success_message" } },
          { "transform_item": { "context_val": "transform_target" }, "active": true }
        ],
        "else": { "u_message": { "context_val": "failure_message" } }
      }
    ],
    "false_effect": { "u_message": "The <npc_name> won't start underwater." }
  },
  {
    "id": "EOC_toolweapon_running",
    "type": "effect_on_condition",
    "condition": { "not": "npc_is_underwater" },
    "effect": {
      "if": { "one_in_chance": { "context_val": "sound_chance" } },
      "then": [
        { "message": { "context_val": "sound_message" }, "sound": true },
        {
          "npc_make_sound": { "context_val": "sound_message" },
          "type": "activity",
          "volume": { "context_val": "volume" },
          "ambient": true
        }
      ]
    },
    "false_effect": [
      { "u_message": "Your <npc_name> gurgles in the water and stops." },
      { "transform_item": { "context_val": "revert_to" } }
    ]
  },
  {
    "id": "EOC_toolweapon_deactivate",
    "type": "effect_on_condition",
    "effect": [ { "u_message": "Your <npc_name> goes quiet." }, { "transform_item": { "context_val": "transform_target" } } ]
  },
  {
    "type": "effect_on_condition",
    "id": "barber_hair",
    "effect": { "open_dialogue": { "topic": "TALK_CUT_YOUR_HAIR" } }
  },
  {
    "type": "effect_on_condition",
    "id": "barber_beard",
    "effect": { "open_dialogue": { "topic": "TALK_CUT_YOUR_BEARD" } }
  },
  {
    "type": "effect_on_condition",
    "id": "barber_hair_and_beard",
    "effect": { "open_dialogue": { "topic": "TALK_CUT_HAIR_OR_BEARD" } }
  },
  {
    "type": "effect_on_condition",
    "id": "reset_all_hair_types",
    "//": "This will reset all hair types for the purposes of applying new ones.",
    "effect": [
      { "u_lose_trait": "hair_buzzcut" },
      { "u_lose_trait": "hair_crewcut" },
      { "u_lose_trait": "hair_short" },
      { "u_lose_trait": "hair_short_no_fringe" },
      { "u_lose_trait": "hair_short_over_eye" },
      { "u_lose_trait": "hair_medium" },
      { "u_lose_trait": "hair_mohawk" },
      { "u_lose_trait": "hair_long" },
      { "u_lose_trait": "hair_long_mohawk" },
      { "u_lose_trait": "hair_mullet" },
      { "u_lose_trait": "hair_long_over_eye" },
      { "u_lose_trait": "hair_messy" },
      { "u_lose_trait": "hair_very_long" },
      { "u_lose_trait": "hair_extremely_long" },
      { "u_lose_trait": "hair_body_length" },
      { "u_lose_trait": "hair_modern" },
      { "u_lose_trait": "hair_puff" },
      { "u_lose_trait": "hair_beaded" },
      { "u_lose_trait": "hair_curls" },
      { "u_lose_trait": "hair_bun" },
      { "u_lose_trait": "hair_punk_long" },
      { "u_lose_trait": "hair_braid" },
      { "u_lose_trait": "hair_detective" },
      { "u_lose_trait": "hair_super_princess" },
      { "u_lose_trait": "hair_twintails" },
      { "u_lose_trait": "hair_bald" },
      { "u_lose_trait": "hair_fro" },
      { "u_lose_trait": "hair_ponytail" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "reset_all_beard_types",
    "//": "This will reset all beard types for the purposes of applying new ones.",
    "effect": [
      { "u_lose_trait": "FACIAL_HAIR_NECKBEARD" },
      { "u_lose_trait": "FACIAL_HAIR_SIDEBURNS" },
      { "u_lose_trait": "FACIAL_HAIR_SOUL_PATCH" },
      { "u_lose_trait": "FACIAL_HAIR_CHIN_STRIP" },
      { "u_lose_trait": "FACIAL_HAIR_3DAYSTUBBLE" },
      { "u_lose_trait": "FACIAL_HAIR_TOOTHBRUSH" },
      { "u_lose_trait": "FACIAL_HAIR_CHIN_STRAP" },
      { "u_lose_trait": "FACIAL_HAIR_MUSTACHE" },
      { "u_lose_trait": "FACIAL_HAIR_NECKBEARD" },
      { "u_lose_trait": "FACIAL_HAIR_WALRUS" },
      { "u_lose_trait": "FACIAL_HAIR_ZAPPA" },
      { "u_lose_trait": "FACIAL_HAIR_GOATEE" },
      { "u_lose_trait": "FACIAL_HAIR_CIRCLE" },
      { "u_lose_trait": "FACIAL_HAIR_SHORTBOXED" },
      { "u_lose_trait": "FACIAL_HAIR_HORSESHOE" },
      { "u_lose_trait": "FACIAL_HAIR_MUTTONCHOPS" },
      { "u_lose_trait": "FACIAL_HAIR_GUNSLINGER" },
      { "u_lose_trait": "FACIAL_HAIR_CHIN_CURTAIN" },
      { "u_lose_trait": "FACIAL_HAIR_HANDLEBAR" },
      { "u_lose_trait": "FACIAL_HAIR_VANDYKE" },
      { "u_lose_trait": "FACIAL_HAIR_BEARD" },
      { "u_lose_trait": "FACIAL_HAIR_ANCHOR" },
      { "u_lose_trait": "FACIAL_HAIR_ROYALE" },
      { "u_lose_trait": "FACIAL_HAIR_SHENANDOAH" },
      { "u_lose_trait": "FACIAL_HAIR_BEARD_LONG" },
      { "u_lose_trait": "FACIAL_HAIR_BEARD_VERY_LONG" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_apply_makeup",
    "condition": { "u_has_trait": "VANITY" },
    "effect": { "u_message": "You apply some makeup.  The world will now get to know the true meaning of beauty." },
    "false_effect": { "u_message": "You apply some makeup.  It feels good to take care of yourself." }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_use_microscope",
    "effect": {
      "run_eoc_selector": [ "EOC_observe_water_murky", "EOC_observe_soil", "EOC_selector_cancel" ],
      "names": [ "Murky water sample", "Soil sample", "Cancel" ],
      "hide_failing": true,
      "allow_cancel": true
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_observe_water_murky",
    "condition": { "u_has_item": "microscope_slide_water_murky" },
    "effect": {
      "u_message": "You place the slide on the stage, adjust the light and focus the lens, you manage to see  <microscope_water_murky>"
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_observe_soil",
    "condition": { "u_has_item": "microscope_slide_soil" },
    "effect": {
      "u_message": "You place the slide on the stage, adjust the light and focus the lens, you manage to see <microscope_soil>"
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_selector_cancel",
    "effect": { "u_message": "You changed your mind." }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MP3_REVERBERATION",
    "effect": [
      {
        "if": { "math": [ "has_var(u_mp3_reverberation_timer)" ] },
        "then": {
          "if": { "math": [ "u_mp3_reverberation_timer < 0" ] },
          "then": [ { "run_eocs": [ "EOC_MP3_REVERBERATION_LOCATOR" ] }, { "math": [ "u_mp3_reverberation_timer = rand(20)+20" ] } ],
          "else": [ { "math": [ "u_mp3_reverberation_timer -= 1" ] } ]
        },
        "else": { "math": [ "u_mp3_reverberation_timer = rand(20)+20" ] }
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_MP3_REVERBERATION_LOCATOR",
    "effect": [
      {
        "if": {
          "or": [
            { "u_at_om_location": "cabin_roof_3" },
            { "u_at_om_location": "cabin_roof_3_reverberation_hint" },
            { "u_at_om_location": "radio_tower_top" },
            { "u_at_om_location": "wasp_tower_top" }
          ]
        },
        "then": [
          { "u_message": "Its song drowns out the world.", "popup": true, "popup_w_interrupt_query": true },
          { "transform_item": "mp3_reverberation", "active": false },
          { "run_eocs": [ "EOC_REVERBERATION_ENTER" ], "time_in_future": "2 seconds" }
        ],
        "else": {
          "if": {
            "or": [
              { "u_near_om_location": "cabin_3", "range": 2 },
              { "u_near_om_location": "cabin_3_reverberation_hint", "range": 2 },
              { "u_near_om_location": "radio_tower", "range": 2 },
              { "u_near_om_location": "radio_tower_1", "range": 2 },
              { "u_near_om_location": "radio_tower_reverberation_mp3", "range": 2 },
              { "u_at_om_location": "radio_tower_even" },
              { "u_at_om_location": "radio_tower_odd" }
            ]
          },
          "then": { "u_message": "Its song is indescribable." },
          "else": {
            "if": {
              "or": [
                { "u_near_om_location": "cabin_3", "range": 8 },
                { "u_near_om_location": "cabin_3_reverberation_hint", "range": 8 },
                { "u_near_om_location": "radio_tower", "range": 8 },
                { "u_near_om_location": "radio_tower_1", "range": 8 },
                { "u_near_om_location": "radio_tower_reverberation_mp3", "range": 8 }
              ]
            },
            "then": { "u_message": "Its song is energetic, joyful." },
            "else": { "u_message": "Its song is quiet, reserved." }
          }
        }
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_pat_AR_activate",
    "condition": { "math": [ "robofac_pat_is_dead == 1" ] },
    "effect": { "if": { "one_in_chance": 1000 }, "then": { "u_message": "Your earpiece is eerily silent." } },
    "false_effect": { "run_eocs": [ "EOC_pat_AR_scan" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_pat_AR_scan",
    "condition": {
      "or": [
        { "u_near_om_location": "unvitrified_orchard", "range": 3 },
        { "u_near_om_location": "LIXA_surface_1a", "range": 3 },
        { "u_near_om_location": "temple_stairs", "range": 3 },
        { "u_near_om_location": "mine_amigara_finale_central", "range": 3 },
        { "u_near_om_location": "highlands", "range": 3 },
        { "u_near_om_location": "exodii_base_x0y0z0", "range": 5 },
        { "u_near_om_location": "microlab_portal_security1", "range": 3 },
        { "u_near_om_location": "labyrinth_entrance", "range": 3 },
        { "u_near_om_location": "corpse_surface", "range": 3 },
        { "u_near_om_location": "xedra_rural_church", "range": 3 },
        { "u_near_om_location": "morgantown_2b", "range": 10 },
        { "u_near_om_location": "cabin_3_reverberation", "range": 3 },
        { "u_near_om_location": "cabin_3_reverberation_hint", "range": 3 },
        { "u_near_om_location": "radiosphere_radio_tower_top", "range": 3 },
        { "u_near_om_location": "radio_tower_reverberation_mp3", "range": 3 },
        { "math": [ "robofac_pat_lost_signal_highlands == 1" ] },
        { "math": [ "robofac_pat_lost_signal_radiosphere == 1" ] },
        { "math": [ "robofac_pat_lost_signal_cabin_reverb == 1" ] },
        { "math": [ "robofac_pat_lost_signal_labyrinth == 1" ] }
      ]
    },
    "effect": [
      {
        "if": {
          "and": [
            { "u_near_om_location": "unvitrified_orchard", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_vitrified" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"I'm pickin' up some radio disturbances in the area.  Mostly, shit keeps goin' dead.  There's not much around, but it's gettin' worse the closer you get to a nearby house.  Be careful.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_vitrified", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "LIXA_surface_1a", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_lixa" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"Whatever that building is ain't on my maps.  You might be gettin' close to some government spook shit.  Watch out.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_lixa", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "temple_stairs", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_strange_temple" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece, and Pat's voice comes over the line: \"The photos I'm gettin' are worse than usual.  Somethin's fuckin' with the transmission.  I don't see anythin' on my maps, so be on lookout.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_strange_temple", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "mine_amigara_finale_central", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_amigara" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece, and Pat's voice comes over the line: \"You heah that?  Sounded like someone chatterin' on our band.  It was fuckin' spooky, too.  I dunno what kinda' trouble you're getting into down there, but the signal's too weak and I'm not getting pictures.  Be careful.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_amigara", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "highlands", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_highlands" } ] } }
          ]
        },
        "then": [
          { "u_message": "Your earpiece is filled with static and your HUD glitches.", "popup": true },
          { "u_add_var": "robofac_pat_saw_highlands", "value": "yes" },
          { "math": [ "robofac_pat_lost_signal_highlands = 1" ] }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "exodii_base_x0y0z0", "range": 5 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_exodii" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"Is that a fuckin' CASTLE?  Holy shit.  What the fuck world are we livin' in?  Anyway, get in there and bring me back a sword!\"  Pat starts to cackle and then the line cuts off with a chirp.",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_exodii", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "microlab_portal_security1", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_physics_lab" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"I'm not gettin' a good--cshhh--signal.  Yo--cshhh--eep underground.  Somethin' bad--cshhh--.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_physics_lab", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "labyrinth_entrance", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_labyrinth" } ] } }
          ]
        },
        "then": [
          { "u_message": "Your earpiece is filled with static and your HUD glitches.", "popup": true },
          { "u_add_var": "robofac_pat_saw_labyrinth", "value": "yes" },
          { "math": [ "robofac_pat_lost_signal_labyrinth = 1" ] }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "corpse_surface", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_monster_corpse" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"I'm looking at some topological maps I got from a merc, and whatever that thing is up ahead stickin' out of the ground, it isn't the only one heah.  I don't think that's a cave, pal.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_monster_corpse", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "xedra_rural_church", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_rural_church" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"Am I seeing those pictures right?  Is that thing glowin' over theah?  I checked my maps, and it should be a church.  No data on my old downloads, so I'd bet a beer it's one'a those culty ones.  Steer clear, bud.  No knowin' how crazy they got after everything that's happened.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_rural_church", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "morgantown_2b", "range": 10 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_morgantown" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"Bud, I've been watchin' for a while, and you're heading somewhere you don't wanna be.  You're close to Morgantown.  That place is fuckin' hauwnted - my uncle told me all about it.  They say it's full of ghosts and shit like that.  Wicked scary.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_morgantown", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "morgantown_2b", "range": 2 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_morgantown_2" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line in a faint whisper: \"I've just got a picture come through and I see them THINGS over theah.  Those freaky little SHITS look just like the parabolic dishes I used'ta'use to pickup sat signals.  If this ain't some tabletop RPG dumbass nerd shit I don't know what is, but I'd bet they use them to hear.  Be quiet or get the fuck outta' there.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_morgantown_2", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "cabin_3_reverberation", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_cabin_reverb" } ] } }
          ]
        },
        "then": [
          { "u_message": "Your earpiece is filled with static and your HUD glitches.", "popup": true },
          { "u_add_var": "robofac_pat_saw_cabin_reverb", "value": "yes" },
          { "math": [ "robofac_pat_lost_signal_cabin_reverb = 1" ] }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "radio_tower_reverberation_mp3", "range": 10 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_radio_tower_reverberation_mp3" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "Your earpiece is filled with static and your HUD glitches.  Suddenly, the sound of soft, slightly distorted smooth jazz starts to play in your earpiece - it continues for a moment before you hear a chirp and Pat's voice: \"What was that bullshit?  Pal, someone might be nearby with a transmitter.  There's not much but a radio tower nearby, so maybe there.  Lock and load.  Over.\"  A moment later, something, or someone, whispers an indiscernible word through the earpiece.  It then falls silent.",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_radio_tower_reverberation_mp3", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "cabin_3_reverberation_hint", "range": 10 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_cabin_reverb_hint" } ] } }
          ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line:  \"Some'a your recent images are wicked twisted with errors and noise.  Not sure what's nearby, but it's messin' with the signal.  Over.\"",
            "popup": true
          },
          { "u_add_var": "robofac_pat_saw_cabin_reverb_hint", "value": "yes" }
        ]
      },
      {
        "if": {
          "and": [
            { "u_near_om_location": "radiosphere_radio_tower_top", "range": 3 },
            { "not": { "compare_string": [ "yes", { "u_val": "robofac_pat_saw_radiosphere" } ] } }
          ]
        },
        "then": [
          { "u_message": "Your earpiece is filled with static and your HUD glitches.", "popup": true },
          { "u_add_var": "robofac_pat_saw_radiosphere", "value": "yes" },
          { "math": [ "robofac_pat_lost_signal_radiosphere = 1" ] }
        ]
      },
      {
        "if": { "and": [ { "u_near_om_location": "field", "range": 10 }, { "math": [ "robofac_pat_lost_signal_highlands == 1" ] } ] },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"Holy shit, I'm slowly gettin' pictures now.  What the fuck happened to you?  One second you're walking through that water like a moron, and the next second, you're gone!  I'll look over the images as they come through.  You take it easy.  Over.\"",
            "popup": true
          },
          { "math": [ "robofac_pat_lost_signal_highlands = 0" ] }
        ]
      },
      {
        "if": {
          "and": [ { "u_near_om_location": "field", "range": 10 }, { "math": [ "robofac_pat_lost_signal_radiosphere == 1" ] } ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"What the hell, pal, I thought you fell off that radio tower.  What happened?  Wait, wait, wait image coming through now.  It looks broken?  Where the hell were you?  Over.\"",
            "popup": true
          },
          { "math": [ "robofac_pat_lost_signal_radiosphere = 0" ] }
        ]
      },
      {
        "if": { "and": [ { "u_near_om_location": "field", "range": 10 }, { "math": [ "robofac_pat_lost_signal_labyrinth == 1" ] } ] },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"Well, welcome back.  I guess that robot wasn't kidding.  Your radio signal vanished.  I'll record all the data as it comes through.\"",
            "popup": true
          },
          { "math": [ "robofac_pat_lost_signal_labyrinth = 0" ] }
        ]
      },
      {
        "if": {
          "and": [ { "u_near_om_location": "field", "range": 10 }, { "math": [ "robofac_pat_lost_signal_cabin_reverb == 1" ] } ]
        },
        "then": [
          {
            "u_message": "You hear a chirp in your earpiece and Pat's voice comes over the line: \"I thought maybe you fell off that roof.  You alright?  I'm getting a backed up stream of shitty images now.  I'll record whatever the hell happened, I guess.  Over.\"",
            "popup": true
          },
          { "math": [ "robofac_pat_lost_signal_cabin_reverb = 0" ] }
        ]
      }
    ]
  }
]
