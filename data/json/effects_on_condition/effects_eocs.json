[
  {
    "type": "effect_on_condition",
    "id": "bad_food_mood_debuff",
    "recurrence": [ "1 hours", "2 hours" ],
    "condition": { "u_has_effect": "bad_food_ennui" },
    "//": "duration doesn't matter, since morale is added every hour, therefore it will always be mismatched with bad_food_ennui; instead, if you loose bad_food_ennui effect, you will lost the mood debuff also",
    "effect": [
      {
        "u_add_morale": "morale_bad_protein_bar",
        "bonus": { "math": [ "u_vitamin('bad_food') / -10" ] },
        "max_bonus": { "math": [ "u_vitamin('bad_food') / -4" ] },
        "duration": "1 days",
        "decay_start": "1 days"
      }
    ],
    "false_effect": [ { "u_lose_morale": "morale_bad_protein_bar" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "eoc_social_satisfied",
    "recurrence": [ "1 minutes", "5 minutes" ],
    "condition": { "u_has_effect": "social_satisfied" },
    "effect": [ { "u_add_morale": "morale_social", "bonus": 6, "max_bonus": 6, "duration": "1 days", "decay_start": "1 days" } ],
    "false_effect": [ { "u_lose_morale": "morale_social" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "eoc_social_dissatisfied",
    "recurrence": [ "1 minutes", "5 minutes" ],
    "condition": { "u_has_effect": "social_dissatisfied" },
    "effect": [
      {
        "u_add_morale": "morale_asocial",
        "bonus": { "math": [ "u_effect_intensity('social_dissatisfied') * -7" ] },
        "max_bonus": -21,
        "duration": "1 days",
        "decay_start": "1 days"
      }
    ],
    "false_effect": [ { "u_lose_morale": "morale_social_dissatisfied" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "eoc_asocial_satisfied",
    "recurrence": [ "1 minutes", "5 minutes" ],
    "condition": { "u_has_effect": "asocial_satisfied" },
    "effect": [ { "u_add_morale": "morale_asocial", "bonus": 10, "max_bonus": 10, "duration": "1 days", "decay_start": "1 days" } ],
    "false_effect": [ { "u_lose_morale": "morale_asocial" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "eoc_asocial_dissatisfied",
    "recurrence": [ "1 minutes", "5 minutes" ],
    "condition": { "u_has_effect": "asocial_dissatisfied" },
    "effect": [
      {
        "u_add_morale": "morale_social",
        "bonus": { "math": [ "u_effect_intensity('asocial_dissatisfied') * -7" ] },
        "max_bonus": -21,
        "duration": "1 days",
        "decay_start": "1 days"
      }
    ],
    "false_effect": [ { "u_lose_morale": "morale_asocial_dissatisfied" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "eoc_conjunctivitis_itch",
    "recurrence": [ "10 minutes", "45 minutes" ],
    "condition": {
      "and": [
        { "u_has_effect": "conjunctivitis", "bodypart": "eyes" },
        { "not": { "u_has_effect": "formication" } },
        { "not": { "u_has_effect": "took_antihistamine" } },
        { "not": { "u_has_effect": "sleep" } }
      ]
    },
    "effect": [ { "u_add_effect": "formication", "duration": 300, "target_part": "head" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "eoc_conjunctivitis_sting",
    "recurrence": [ "10 minutes", "45 minutes" ],
    "condition": { "and": [ { "u_has_effect": "conjunctivitis", "bodypart": "eyes" }, { "not": { "u_has_effect": "sleep" } } ] },
    "effect": [
      {
        "u_add_effect": "smoke_eyes",
        "duration": 180,
        "intensity": { "math": [ "u_effect_intensity('smoke_eyes', 'bodypart': 'eyes') + 1" ] },
        "target_part": "eyes"
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "dermatik_pregnancy_early",
    "eoc_type": "EVENT",
    "required_event": "character_gains_effect",
    "condition": { "compare_string": [ "dermatik", { "context_val": "effect" } ] },
    "effect": [
      { "queue_eocs": "dermatik_formication", "duration": "15 minutes", "target_part": "RANDOM" },
      { "queue_eocs": "dermatik_pregnancy", "time_in_future": "1 days" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "dermatik_formication",
    "effect": [
      { "u_add_effect": "formication", "duration": "15 minutes", "target_part": { "context_val": "bodypart" } },
      { "queue_eocs": "dermatik_formication", "time_in_future": [ "20 seconds", "3 days" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "dermatik_pregnancy",
    "effect": [
      { "u_message": "Your flesh crawlsâ€¦  A larva tears through your flesh and begins to emerge!", "type": "bad" },
      { "u_spawn_monster": "mon_dermatik_larva", "real_count": 1, "min_radius": 1, "max_radius": 4 },
      { "u_lose_effect": "dermatik" }
    ]
  },
  [
    {
      "type": "effect_on_condition",
      "id": "EOC_FORMICATION_INIT",
      "eoc_type": "EVENT",
      "required_event": "character_gains_effect",
      "condition": { "compare_string": [ "formication", { "context_val": "effect" } ] },
      "effect": [ { "queue_eocs": "EOC_FORMICATION", "time_in_future": "1 s" } ]
    },
    {
      "type": "effect_on_condition",
      "id": "EOC_FORMICATION",
      "condition": { "u_has_effect": "formication" },
      "effect": [
        {
          "if": { "or": [ { "u_has_effect": "narcosis" }, { "u_has_effect": "sleep" } ] },
          "else": { "run_eocs": [ "EOC_TRY_SCRATCH" ] }
        },
        { "queue_eocs": "EOC_FORMICATION", "time_in_future": "1 s" }
      ]
    },
    {
      "type": "effect_on_condition",
      "id": "EOC_TRY_SCRATCH",
      "effect": [
        {
          "if": {
            "x_in_y_chance": {
              "x": { "math": [ "u_effect_intensity('formication', 'bodypart': _bodypart)" ] },
              "y": { "math": [ "600 + 300 * u_val('intelligence')" ] }
            }
          },
          "then": [
            { "u_message": "You start scratching yourself!" },
            { "npc_message": "<npc_name> stars scratching themselves!" },
            { "turn_cost": 1.5 },
            { "math": [ "u_pain()", "++" ] },
            { "math": [ "hp(_bodypart)", "--" ] }
          ],
          "else": { "u_message": "You want to scratch yourself badly, but you force yourself to stop." }
        }
      ]
    }
  ]
]
