[
  {
    "type": "effect_on_condition",
    "id": "ROBOFAC_PAT_DEATH",
    "eoc_type": "NPC_DEATH",
    "effect": [ { "math": [ "robofac_pat_is_dead = 1" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "ROBOFAC_ROBOFAC_SCIENTIST_CHOP_SHOP_DEATH",
    "eoc_type": "NPC_DEATH",
    "effect": [
      { "math": [ "robofac_chop_shop_scientist_1_is_dead = 1" ] },
      {
        "if": {
          "and": [
            "npc_is_avatar",
            { "math": [ "robofac_chop_shop_mercs_spotted == 1" ] },
            { "not": { "math": [ "robofac_chop_shop_scientist_1_kill_orders == 1" ] } }
          ]
        },
        "then": [
          { "math": [ "faction_like('robofac') = -100" ] },
          { "math": [ "faction_respect('robofac') = -100" ] },
          { "math": [ "faction_trust('robofac') = -100" ] },
          { "run_eocs": "EOC_ROBOFAC_LOCK_INTERCOM" }
        ]
      }
    ]
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "remove_robofac_intercom",
    "object": { "remove_npcs": [ { "class": "robofac_intercom", "x": 19, "y": 11 } ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ROBOFAC_LOCK_INTERCOM",
    "global": true,
    "effect": [
      { "mapgen_update": "remove_robofac_intercom", "om_terrain": "robofachq_surface_entrance" }
    ]
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "remove_robofac_mercs",
    "object": {
      "remove_npcs": [
        { "class": "robofac_chop_shop_merc_1", "x": [ 0, 23 ], "y": [ 0, 23 ] },
        { "class": "robofac_chop_shop_merc_2", "x": [ 0, 23 ], "y": [ 0, 23 ] },
        { "class": "robofac_chop_shop_merc_3", "x": [ 0, 23 ], "y": [ 0, 23 ] },
        { "class": "robofac_chop_shop_merc_4", "x": [ 0, 23 ], "y": [ 0, 23 ] },
        { "class": "robofac_chop_shop_merc_5", "x": [ 0, 23 ], "y": [ 0, 23 ] },
        { "class": "robofac_chop_shop_merc_6", "x": [ 0, 23 ], "y": [ 0, 23 ] }
      ]
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ROBOFAC_CHOP_SHOP_CLEAN_UP_MERCS",
    "global": true,
    "effect": [
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x0y0" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x1y0" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x2y0" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x3y0" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x4y0" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x0y1" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x1y1" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x2y1" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x3y1" },
      { "mapgen_update": "remove_robofac_mercs", "om_terrain": "robofac_strip_mall_x4y1" }

    ]
  }
]
