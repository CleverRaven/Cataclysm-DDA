[
  {
    "type": "effect_on_condition",
    "id": "scenario_bad_day",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [
      { "u_add_effect": "flu", "intensity": 1, "duration": "1000 minutes" },
      { "u_add_effect": "drunk", "intensity": 1, "duration": "270 minutes" },
      {
        "u_add_morale": "morale_feeling_bad",
        "bonus": -100,
        "max_bonus": -100,
        "duration": "50 minutes",
        "decay_start": "50 minutes"
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_infected",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [
      { "u_add_effect": "infected", "intensity": 1, "duration": "PERMANENT", "target_part": "RANDOM" },
      { "assign_mission": "MISSION_INFECTED_START_FIND_ANTIBIOTICS" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_fungal_infection",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "u_add_effect": "fungus", "intensity": 1, "duration": "PERMANENT", "target_part": "RANDOM" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_paralyzepoison",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "u_add_effect": "paralyzepoison", "intensity": 3, "duration": "10 minutes" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_portal_dependent",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [
      {
        "run_eocs": [ "EOC_PORTAL_DEPENDENT_MESSAGES_BAD", "EOC_PORTAL_DEPENDENT_FOCUS_BAD", "EOC_PORTAL_DEPENDENT_DAMAGE_CONSTANT" ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_mansion_pursuit",
    "eoc_type": "SCENARIO_SPECIFIC",
    "//": "EOC_BANISH_MANSION_MONSTERS is not triggering/working at the moment.",
    "effect": [
      {
        "u_location_variable": { "u_val": "mansion_centre" },
        "target_params": { "om_terrain": "mansion_+4d", "search_range": 2, "z": -1 },
        "min_radius": 0,
        "max_radius": 0
      },
      { "location_variable_adjust": { "u_val": "mansion_centre" }, "x_adjust": 11, "y_adjust": 11 },
      { "run_eoc_with": "EOC_BANISH_MANSION_MONSTERS", "beta_loc": { "u_val": "mansion_centre" } },
      { "run_eocs": "EOC_SPAWN_MANSION_MONSTERS" },
      { "location_variable_adjust": { "u_val": "mansion_centre" }, "z_adjust": 0, "z_override": true },
      { "run_eoc_with": "EOC_BANISH_MANSION_MONSTERS", "beta_loc": { "u_val": "mansion_centre" } },
      { "run_eocs": "EOC_SPAWN_MANSION_MONSTERS" },
      { "location_variable_adjust": { "u_val": "mansion_centre" }, "z_adjust": 1, "z_override": true },
      { "run_eoc_with": "EOC_BANISH_MANSION_MONSTERS", "beta_loc": { "u_val": "mansion_centre" } },
      { "run_eocs": "EOC_SPAWN_MANSION_MONSTERS" },
      {
        "u_run_monster_eocs": [ { "id": "EOC_BANISH_MONSTERS_AROUND_PLAYER", "effect": { "run_eocs": "EOC_BANISH_SELF" } } ],
        "monster_range": 12
      },
      { "run_eocs": "EOC_SPAWN_MANSION_MONSTERS_NEAR_PLAYER" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BANISH_SELF",
    "effect": [ { "u_cast_spell": { "id": "BEGONE_SHADOW" } } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BANISH_MANSION_MONSTERS",
    "//": "Banish half the mapgen monsters from the mansion to make room for special scenario ferals",
    "effect": [
      {
        "npc_run_monster_eocs": [
          {
            "id": "EOC_BANISH_MONSTERS_AROUND_MANSION_CENTER",
            "condition": { "math": [ "rand(1)", "==", "0" ] },
            "effect": { "run_eocs": "EOC_BANISH_SELF" }
          }
        ],
        "monster_range": 36
      },
      {
        "npc_run_monster_eocs": [ { "id": "EOC_BANISH_MANSION_CIVILIANS", "effect": { "run_eocs": "EOC_BANISH_SELF" } } ],
        "mtype_ids": [
          "mon_civilian_panic",
          "mon_civilian_parent",
          "mon_civilian_police",
          "mon_civilian_stationary",
          "mon_civilian_zombiefighter"
        ],
        "monster_range": 50
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SPAWN_MANSION_MONSTERS",
    "//": "Spawn special scenario ferals out from the center of the mansion",
    "effect": [
      {
        "u_spawn_monster": "GROUP_MANSION_ARMORED",
        "group": true,
        "real_count": 1,
        "min_radius": 0,
        "max_radius": 18,
        "target_var": { "u_val": "mansion_centre" },
        "indoor_only": true
      },
      {
        "u_spawn_monster": "GROUP_MANSION_START",
        "group": true,
        "real_count": 15,
        "min_radius": 0,
        "max_radius": 36,
        "target_var": { "u_val": "mansion_centre" },
        "indoor_only": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_SPAWN_MANSION_MONSTERS_NEAR_PLAYER",
    "//": "Spawn mansion monsters near the player, either for lore or as weak obstacles.",
    "effect": [
      {
        "run_eocs": {
          "id": "EOC_SEX_LAIR_SPAWNS",
          "condition": { "and": [ { "u_near_om_location": "mansion_boarded_t2d_start" }, { "math": [ "rand(2)", "==", "0" ] } ] },
          "effect": [
            {
              "u_spawn_monster": "mon_zombie_resort_dancer",
              "real_count": { "math": [ "1 + rand(1)" ] },
              "min_radius": 3,
              "max_radius": 5
            },
            { "u_message": "What was that sound?", "type": "warning", "popup": true }
          ]
        }
      },
      {
        "run_eocs": {
          "id": "EOC_PANICROOM_SPAWNS",
          "condition": { "and": [ { "u_near_om_location": "mansion_boarded_t2_start" }, { "math": [ "rand(1)", "==", "0" ] } ] },
          "effect": [
            {
              "u_spawn_monster": "GROUP_SCENARIO_PANICROOM",
              "group": true,
              "real_count": { "math": [ "1 + rand(1)" ] },
              "max_radius": 2
            },
            { "u_message": "Is there someone else in here?", "type": "warning", "popup": true }
          ]
        }
      },
      {
        "u_spawn_monster": "GROUP_MANSION_PURSUERS",
        "group": true,
        "real_count": 5,
        "min_radius": 10,
        "max_radius": 16,
        "indoor_only": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_assassin_convict",
    "//": "Determines which prison the assassin is in currently to correctly place the target.",
    "recurrence": 1,
    "condition": { "u_has_trait": "PROF_ASSASSIN_CONVICT" },
    "deactivate_condition": { "not": { "u_has_trait": "PROF_ASSASSIN_CONVICT" } },
    "effect": [
      {
        "run_eocs": {
          "id": "EOC_ASSASSIN_CONVICT_PRISON",
          "condition": { "u_near_om_location": "prison_1_5" },
          "effect": [
            { "assign_mission": "MISSION_ASSASSIN_CONVICT_PRISON" },
            { "u_message": "Now… Where is your mark?", "type": "warning", "popup": true }
          ],
          "false_effect": {
            "run_eocs": {
              "id": "EOC_ASSASSIN_CONVICT_PRISON_ISLAND",
              "condition": { "u_near_om_location": "prison_alcatraz_3" },
              "effect": [
                { "assign_mission": "MISSION_ASSASSIN_CONVICT_PRISON_ISLAND1" },
                { "u_message": "Now… Where is your mark?", "type": "warning", "popup": true }
              ],
              "false_effect": [
                { "assign_mission": "MISSION_ASSASSIN_CONVICT_PRISON_ISLAND2" },
                { "u_message": "Now… Where is your mark?", "type": "warning", "popup": true }
              ]
            }
          }
        }
      },
      { "u_lose_trait": "PROF_ASSASSIN_CONVICT" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "faction_camp_start",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "mapgen_update": "faction_start_add" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_liam",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [
      { "open_dialogue": { "topic": "TALK_Liam_Introdialogue" } },
      { "mapgen_update": "scenario_spawn_liam", "om_terrain": "cabin_liam" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_surrounded_zombie",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "u_spawn_monster": "GROUP_ZOMBIE", "group": true, "real_count": 5, "min_radius": 12, "max_radius": 30 } ]
  },
  {
    "type": "effect_on_condition",
    "id": "scenario_surrounded_zombie_heavy",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "u_spawn_monster": "GROUP_ZOMBIE", "group": true, "real_count": 10, "min_radius": 14, "max_radius": 30 } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_lone_survivor",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [
      {
        "u_message": "They are all dead.  The group you were surviving with has been annihilated.  Their bodies are still nearby.  You are the last one left alive and their screams will haunt you.",
        "type": "warning",
        "popup": true
      },
      {
        "u_add_morale": "morale_feeling_bad",
        "bonus": -100,
        "max_bonus": -100,
        "duration": "1440 minutes",
        "decay_start": "180 minutes"
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_scenario_drunk",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [
      { "u_add_effect": "drunk", "intensity": 1, "duration": "270 minutes" },
      {
        "u_add_morale": "morale_feeling_bad",
        "bonus": -50,
        "max_bonus": -50,
        "duration": "50 minutes",
        "decay_start": "50 minutes"
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_scenario_blood",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "mapgen_update": "SCENARIO_BLOOD" } ]
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "SCENARIO_BLOOD",
    "method": "json",
    "object": { "place_fields": [ { "field": "fd_blood", "x": [ 5, 20 ], "y": [ 5, 20 ], "intensity": [ 1, 3 ], "repeat": 10 } ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_scenario_fire",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "mapgen_update": "SCENARIO_FIRE" } ]
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "SCENARIO_FIRE",
    "method": "json",
    "object": { "place_fields": [ { "field": "fd_fire", "x": [ 3, 20 ], "y": [ 3, 20 ], "intensity": [ 1, 3 ], "repeat": 15 } ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_scenario_smoke",
    "eoc_type": "SCENARIO_SPECIFIC",
    "effect": [ { "mapgen_update": "SCENARIO_SMOKE" } ]
  },
  {
    "type": "mapgen",
    "update_mapgen_id": "SCENARIO_SMOKE",
    "method": "json",
    "object": { "place_fields": [ { "field": "fd_smoke", "x": [ 3, 20 ], "y": [ 3, 20 ], "intensity": [ 1, 3 ], "repeat": 60 } ] }
  }
]
