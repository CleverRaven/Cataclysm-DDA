[
  {
    "type": "mapgen",
    "method": "json",
    "om_terrain": "road_curved",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "//": "Replace chunks road_es_bend with a quarter of a roundabout to deal with bad road spawns (perfectly circle 2x2 with nests for connections, no need for SIDEWALK bc only out of city has bad road spawns)",
      "place_nested": [
        {
          "chunks": [ "road_es_bend" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "east": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ],
            "south_east": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ],
            "south": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ]
          }
        },
        {
          "else_chunks": [ "road_es_bend" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "east": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ],
            "south_east": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ],
            "south": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ]
          }
        }
      ],
      "flags": [ "ERASE_ALL_BEFORE_PLACING_TERRAIN" ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "road_es_bend",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "//": "These nesting passes try to place curvy bends when there's just one turn or it doubles back and straight diagonal road when there's more than one while not being able to search for sepcific rotations relative to this one due to the linear id forming",
      "//1": "Check if both connections are also bends",
      "place_nested": [
        {
          "chunks": [ "road_es_bend_second_pass_A" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "east": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ],
            "south": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        {
          "else_chunks": [ "road_es_bend_second_pass_B" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "east": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ],
            "south": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "road_es_bend_second_pass_A",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "//": "Check if it doubles back",
      "place_nested": [
        {
          "chunks": [ "24x24_road_es_curvy" ],
          "x": 0,
          "y": 0,
          "neighbors": { "south_east": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ] }
        },
        {
          "else_chunks": [ "24x24_road_es_straight_middle" ],
          "x": 0,
          "y": 0,
          "neighbors": { "south_east": [ { "om_terrain": "road", "om_terrain_match_type": "PREFIX" } ] }
        }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "road_es_bend_second_pass_B",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "//": "Check if one direction is a bend",
      "place_nested": [
        {
          "chunks": [ "24x24_road_es_straight" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "east": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        {
          "else_chunks": [ "road_es_bend_third_pass" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "east": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "road_es_bend_third_pass",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "//": "Check if the other direction is a bend",
      "place_nested": [
        {
          "chunks": [ "24x24_road_es_straight" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "south": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        {
          "else_chunks": [ "24x24_road_es_curvy" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "south": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_curvy",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                      ..",
        "                  ......",
        "               .........",
        "             ...........",
        "           .............",
        "          ..............",
        "         ...............",
        "        ................",
        "        .............**.",
        "       .............***.",
        "       ..........**.*...",
        "      ..........***.....",
        "      ..........*.......",
        "      ........**........",
        "     ........**.........",
        "     ........**.........",
        "     .................  ",
        "     .......**.......   ",
        "    .......**.......    ",
        "    .......**.......    "
      ],
      "palettes": [ "road_palette" ],
      "place_nested": [
        { "chunks": [ "24x24_sidewalk_es_curvy_outer" ], "x": 0, "y": 0, "flags": { "north": [ "SIDEWALK" ] } },
        { "chunks": [ "24x24_sidewalk_es_curvy_outer" ], "x": 0, "y": 0, "flags": { "north_east": [ "SIDEWALK" ] } },
        { "chunks": [ "24x24_sidewalk_es_curvy_double" ], "x": 0, "y": 0, "flags": { "east": [ "SIDEWALK" ] } },
        { "chunks": [ "4x4_sidewalk_es_curvy_inner" ], "x": 20, "y": 20, "flags": { "south_east": [ "SIDEWALK" ] } },
        { "chunks": [ "24x24_sidewalk_es_curvy_double" ], "x": 0, "y": 0, "flags": { "south": [ "SIDEWALK" ] } },
        { "chunks": [ "24x24_sidewalk_es_curvy_outer" ], "x": 0, "y": 0, "flags": { "south_west": [ "SIDEWALK" ] } },
        { "chunks": [ "24x24_sidewalk_es_curvy_outer" ], "x": 0, "y": 0, "flags": { "west": [ "SIDEWALK" ] } },
        { "chunks": [ "24x24_sidewalk_es_curvy_outer" ], "x": 0, "y": 0, "flags": { "north_west": [ "SIDEWALK" ] } },
        { "chunks": [ "24x24_road_trash" ], "x": 0, "y": 0 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_sidewalk_es_curvy_double",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "place_nested": [
        { "chunks": [ "24x24_sidewalk_es_curvy_outer" ], "x": 0, "y": 0 },
        { "chunks": [ "4x4_sidewalk_es_curvy_inner" ], "x": 20, "y": 20 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "4x4_sidewalk_es_curvy_inner",
    "object": {
      "mapgensize": [ 4, 4 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "  __",
        " ___",
        "____",
        "____"
      ],
      "palettes": [ "road_palette" ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_sidewalk_es_curvy_outer",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "      __________________",
        "    ____________________",
        "   _____________________",
        "  _____ggggg____________",
        " _____ggggg___________  ",
        " ____ggggg________      ",
        "____ggggg______         ",
        "___ggggg_____           ",
        "___gggg____             ",
        "___ggg____              ",
        "___gg____               ",
        "___g____                ",
        "________                ",
        "_______                 ",
        "_______                 ",
        "______                  ",
        "______                  ",
        "______                  ",
        "_____                   ",
        "_____                   ",
        "_____                   ",
        "_____                   ",
        "____                    ",
        "____                    "
      ],
      "palettes": [ "road_palette" ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_straight",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                      ..",
        "                  ......",
        "                 .......",
        "                ........",
        "               .........",
        "              ..........",
        "             ...........",
        "            ............",
        "           ...........**",
        "          ........****..",
        "         ........*......",
        "        ........*.......",
        "       ........*........",
        "      ........*.........",
        "     ........*..........",
        "     ........*..........",
        "     ........*..........",
        "     ........*......... ",
        "    ........*.........  ",
        "    ........*........   "
      ],
      "//": "No SIDEWALK bc shouldn't occur in cities",
      "palettes": [ "road_palette" ],
      "place_nested": [
        {
          "chunks": [ "24x24_road_es_straight_lanky_ne" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "north_east": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        {
          "chunks": [ "24x24_road_es_straight_lanky_sw" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "south_west": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        { "chunks": [ "24x24_road_trash" ], "x": 0, "y": 0 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_straight_lanky_ne",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                       .",
        "                      ..",
        "                     ...",
        "                    ....",
        "                   ...  ",
        "                        ",
        "                        ",
        "                        ",
        "                       *",
        "                      * ",
        "                     *  ",
        "                    *   ",
        "                   *  ..",
        "                   ...  ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        "
      ],
      "//": "No SIDEWALK bc shouldn't occur in cities",
      "palettes": [ "road_palette" ],
      "place_nested": [  ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_straight_lanky_sw",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "    .       *.          ",
        "   ..      * .          ",
        "  ...     *  .          ",
        " ...     *  .           ",
        "....    *   .           "
      ],
      "//": "No SIDEWALK bc shouldn't occur in cities",
      "palettes": [ "road_palette" ],
      "place_nested": [  ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_straight_middle",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                       .",
        "                      ..",
        "                     ...",
        "                    ....",
        "                   .....",
        "                  ......",
        "                 .......",
        "                ........",
        "               ........*",
        "              ........*.",
        "             ........*..",
        "            ........*...",
        "           ........*....",
        "          ........*.....",
        "         ........*......",
        "        ........*.......",
        "       ........*........",
        "      ........*.........",
        "     ........*..........",
        "    ........*..........."
      ],
      "//": "No SIDEWALK bc shouldn't occur in cities",
      "palettes": [ "road_palette" ],
      "place_nested": [
        {
          "chunks": [ "24x24_road_es_straight_middle_lanky_ne" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "north_east": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        {
          "chunks": [ "24x24_road_es_straight_middle_lanky_sw" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "south_west": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        {
          "chunks": [ "24x24_road_es_straight_middle_lanky_both" ],
          "x": 0,
          "y": 0,
          "neighbors": {
            "north_east": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ],
            "south_west": [
              { "om_terrain": "road_ne", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_es", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_sw", "om_terrain_match_type": "EXACT" },
              { "om_terrain": "road_wn", "om_terrain_match_type": "EXACT" }
            ]
          }
        },
        { "chunks": [ "24x24_road_trash" ], "x": 0, "y": 0 }
      ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_straight_middle_lanky_sw",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                        ",
        "                        ",
        "                        ",
        "                       .",
        "                      . ",
        "                     .  ",
        "                   ..   ",
        "                  ..    ",
        "                 ..     ",
        "                ..      ",
        "               ..       ",
        "              ..        ",
        "             ..         ",
        "           ...          ",
        "          ...           ",
        "         ...            ",
        "        ...             ",
        "       ...              ",
        "      ...               ",
        "     ...                ",
        "   ....                 ",
        "  ....                  ",
        " ....                   ",
        "....                    "
      ],
      "//": "No SIDEWALK bc shouldn't occur in cities",
      "palettes": [ "road_palette" ],
      "place_nested": [  ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_straight_middle_lanky_ne",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                       .",
        "                      ..",
        "                     ...",
        "                    ....",
        "                    ... ",
        "                   ...  ",
        "                  ...   ",
        "                 ...    ",
        "                ...     ",
        "               ...      ",
        "              ...       ",
        "             ...        ",
        "             ..         ",
        "            ..          ",
        "           ..           ",
        "          ..            ",
        "         ..             ",
        "        ..              ",
        "       ..               ",
        "      ..                ",
        "      .                 ",
        "     .                  ",
        "    .                   ",
        "   .                    "
      ],
      "//": "No SIDEWALK bc shouldn't occur in cities",
      "palettes": [ "road_palette" ],
      "place_nested": [  ]
    }
  },
  {
    "type": "mapgen",
    "method": "json",
    "nested_mapgen_id": "24x24_road_es_straight_middle_lanky_both",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rotation": [ 0, 3 ],
      "rows": [
        "                       .",
        "                      ..",
        "                     ...",
        "                    ....",
        "                   .... ",
        "                  ....  ",
        "                 ....   ",
        "                ....    ",
        "               ....     ",
        "              ....      ",
        "             ....       ",
        "            ....        ",
        "           ....         ",
        "          ....          ",
        "         ....           ",
        "        ....            ",
        "       ....             ",
        "      ....              ",
        "     ....               ",
        "    ....                ",
        "   ....                 ",
        "  ....                  ",
        " ....                   ",
        "....                    "
      ],
      "//": "No SIDEWALK bc shouldn't occur in cities",
      "palettes": [ "road_palette" ],
      "place_nested": [  ]
    }
  }
]
