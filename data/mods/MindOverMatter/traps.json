[
  {
    "type": "trap",
    "id": "tr_alien_tree_trap_roots",
    "name": "alien roots",
    "color": "dark_gray",
    "symbol": "/",
    "visibility": 12,
    "avoidance": 10,
    "difficulty": 99,
    "action": "spell",
    "flags": [ "UNDODGEABLE" ],
    "spell_data": { "id": "alien_meadow_roots_trigger_spell" },
    "trigger_weight": "50000 g",
    "//": "High weight is needed to prevent the waiting predators from triggering the trap themselves",
    "trigger_message_u": "As you step on the roots, they twitch slightly.",
    "trigger_message_npc": "As <npcname>' steps on the roots, they twitch slightly."
  },
  {
    "id": "alien_meadow_roots_trigger_spell",
    "type": "SPELL",
    "name": "Summon Alien Trap Enemies",
    "description": "This spell summons hostile alien predators when the trap tree detects movement.",
    "effect": "effect_on_condition",
    "effect_str": "EOC_ALIEN_TRAP_TREE_FIND_TREE",
    "shape": "blast",
    "valid_targets": [ "ally", "hostile" ],
    "flags": [ "NO_EXPLOSION_SFX", "SILENT" ],
    "spell_class": "NONE",
    "min_range": 0,
    "max_range": 0
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ALIEN_TRAP_TREE_FIND_TREE",
    "effect": [
      {
        "u_location_variable": { "context_val": "local_alien_tree" },
        "target_max_radius": 12,
        "terrain": "t_alien_meadow_tree_trap",
        "true_eocs": [
          {
            "id": "EOC_ALIEN_TRAP_TREE_FIND_TREE_2",
            "effect": [
              {
                "u_spawn_monster": "GROUP_ALIEN_TRAP_TREE",
                "target_var": { "context_val": "local_alien_tree" },
                "real_count": [ 2, 5 ],
                "outdoor_only": true,
                "group": true,
                "min_radius": 1,
                "max_radius": 3
              }
            ]
          }
        ]
      }
    ]
  }
]
