[
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_HIDE_UGLY_INITIATE",
    "condition": { "not": { "u_has_effect": "effect_photokin_hide_ugly" } },
    "effect": [
      { "u_message": "You shroud your true form behind unassuming illusions.", "type": "good" },
      {
        "run_eocs": [ "EOC_POWER_MAINTENANCE_PLUS_ONE", "EOC_PHOTOKIN_HIDE_UGLY_SWITCHER", "EOC_PHOTOKIN_HIDE_UGLY_REMOVE_GODCO_VARS" ]
      },
      { "u_add_effect": "effect_photokin_hide_ugly", "duration": "PERMANENT" },
      { "u_cast_spell": { "id": "psionic_drained_difficulty_four", "hit_self": true } },
      {
        "queue_eocs": "EOC_PHOTOKIN_HIDE_UGLY_DRAIN",
        "time_in_future": [
          {
            "math": [ "( (u_val('spell_level', 'spell: photokinetic_hide_ugly') * 22) + 450) * (scaling_factor(u_val('intelligence') ) )" ]
          },
          {
            "math": [ "( (u_val('spell_level', 'spell: photokinetic_hide_ugly') * 55) + 800) * (scaling_factor(u_val('intelligence') ) )" ]
          }
        ]
      }
    ],
    "false_effect": [ { "run_eocs": "EOC_PHOTOKIN_REMOVE_HIDE_UGLY" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_HIDE_UGLY_SWITCHER",
    "effect": {
      "switch": { "u_val": "spell_level", "spell": "photokinetic_hide_ugly" },
      "cases": [
        { "case": 0, "effect": { "u_add_trait": "PHOTOKIN_HIDE_UGLY_01" } },
        { "case": 4, "effect": { "u_add_trait": "PHOTOKIN_HIDE_UGLY_02" } },
        { "case": 8, "effect": { "u_add_trait": "PHOTOKIN_HIDE_UGLY_03" } },
        { "case": 12, "effect": { "u_add_trait": "PHOTOKIN_HIDE_UGLY_04" } },
        { "case": 16, "effect": { "u_add_trait": "PHOTOKIN_HIDE_UGLY_05" } },
        { "case": 20, "effect": { "u_add_trait": "PHOTOKIN_HIDE_UGLY_06" } }
      ]
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_REMOVE_HIDE_UGLY",
    "condition": { "u_has_effect": "effect_photokin_hide_ugly" },
    "effect": [
      { "run_eocs": "EOC_POWER_MAINTENANCE_MINUS_ONE" },
      { "u_lose_effect": "effect_photokin_hide_ugly" },
      { "u_lose_trait": "PHOTOKIN_HIDE_UGLY_01" },
      { "u_lose_trait": "PHOTOKIN_HIDE_UGLY_02" },
      { "u_lose_trait": "PHOTOKIN_HIDE_UGLY_03" },
      { "u_lose_trait": "PHOTOKIN_HIDE_UGLY_04" },
      { "u_lose_trait": "PHOTOKIN_HIDE_UGLY_05" },
      { "u_lose_trait": "PHOTOKIN_HIDE_UGLY_06" },
      { "run_eocs": "EOC_PHOTOKIN_HIDE_UGLY_GRANT_GODCO_VARS" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_HIDE_UGLY_DRAIN",
    "condition": { "u_has_effect": "effect_photokin_hide_ugly" },
    "effect": [
      { "u_cast_spell": { "id": "psionic_maintenance_drained_difficulty_four", "hit_self": true } },
      { "math": [ "u_val('stored_kcal')", "-=", "psionics_kcal_cost(4)" ] },
      {
        "math": [ "u_val('spell_exp', 'spell: photokinetic_hide_ugly')", "+=", "(maintenance_exp_factor(u_val('focus')))" ]
      },
      { "run_eocs": "EOC_POWER_MAINTENANCE_CONCENTRATION_CHECK" },
      {
        "queue_eocs": "EOC_PHOTOKIN_HIDE_UGLY_DRAIN",
        "time_in_future": [
          {
            "math": [ "( (u_val('spell_level', 'spell: photokinetic_hide_ugly') * 22) + 450) * (scaling_factor(u_val('intelligence') ) )" ]
          },
          {
            "math": [ "( (u_val('spell_level', 'spell: photokinetic_hide_ugly') * 55) + 800) * (scaling_factor(u_val('intelligence') ) )" ]
          }
        ]
      }
    ],
    "false_effect": [  ]
  }
]
