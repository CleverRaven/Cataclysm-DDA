[
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_SNUFF_LIGHT",
    "recurrence": [ "12 hours", "24 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 20 } },
            {
              "or": [
                { "math": [ "u_spell_level('photokinetic_light_local')", ">=", "5" ] },
                { "math": [ "u_spell_level('photokinetic_create_light')", ">=", "4" ] }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_snuff_light')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_snuff_light" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_snuff_light')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_snuff_light" },
      {
        "u_message": "Use of your powers has led to an insight.  Just like you can create light, you could extinguish it, plunging an area into darkness, if you can figure out the proper technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTO_LEARNING_LIGHT_DODGE",
    "recurrence": [ "12 hours", "24 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 20 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_snuff_light')", ">=", "5" ] },
                { "math": [ "u_spell_level('photokinetic_create_light')", ">=", "5" ] }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_light_dodge')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_light_dodge" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_light_dodge')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_light_dodge" },
      {
        "u_message": "Use of your powers has led to an insight.  Instead of simply creating light you could bend it, warping it around yourself and making it hard for enemies to determine your exact position, if you can figure out the proper technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTO_LEARNING_LIGHT_BEAM",
    "recurrence": [ "12 hours", "24 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 20 } },
            {
              "or": [
                { "math": [ "u_spell_level('photokinetic_light_local')", ">=", "8" ] },
                { "math": [ "u_spell_level('photokinetic_create_light')", ">=", "6" ] }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_light_beam')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_light_beam" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_light_beam')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_light_beam" },
      {
        "u_message": "Use of your powers has led to an insight.  You could focus the light you create, making it a searing beam capable of burning your enemies, if you can figure out the proper technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTO_LEARNING_CAMOUFLAGE",
    "recurrence": [ "12 hours", "24 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 20 } },
            { "or": [ { "math": [ "u_spell_level('photokinetic_light_dodge')", ">=", "6" ] } ] }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_camouflage')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_camouflage" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_camouflage')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_camouflage" },
      {
        "u_message": "Use of your powers has led to an insight.  You could bend the light not only around yourself, but around your nearby surroundings, blending them together and making yourself very difficult to spot from a distance, if you can figure out the proper technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTO_LEARNING_RAD_IMMUNITY",
    "recurrence": [ "12 hours", "24 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 20 } },
            {
              "or": [
                { "math": [ "u_spell_level('photokinetic_light_dodge')", ">=", "9" ] },
                {
                  "and": [
                    { "math": [ "u_spell_level('photokinetic_snuff_light')", ">=", "6" ] },
                    { "math": [ "u_spell_level('photokinetic_camouflage')", ">=", "5" ] }
                  ]
                }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_rad_immunity')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_rad_immunity" } }
      ]
    },
    "deactivate_condition": {
      "or": [
        { "not": { "u_has_trait": "PHOTOKINETIC" } },
        { "math": [ "u_spell_level('photokinetic_rad_immunity')", ">=", "1" ] }
      ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_rad_immunity" },
      {
        "u_message": "Use of your powers has led to an insight.  Bending light leads to deflecting it, and you could deflect harmful light and radiation away from yourself, if you can figure out the proper technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_LIGHT_ARMS",
    "recurrence": [ "36 hours", "72 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 40 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_light_dodge')", ">=", "8" ] },
                { "math": [ "u_spell_level('photokinetic_camouflage')", ">=", "6" ] },
                { "math": [ "u_spell_level('photokinetic_light_local')", ">=", "6" ] }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_light_arms')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_light_arms" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_light_arms')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_light_arms" },
      {
        "u_message": "Use of your powers has led to an insight.  You could create illusions of your arms and weapons, making it much harder for your enemies to know where you are going to strike, if you can figure out the technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_HIDE_UGLY",
    "recurrence": [ "36 hours", "72 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 40 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_camouflage')", ">=", "8" ] },
                { "math": [ "u_spell_level('photokinetic_rad_immunity')", ">=", "5" ] }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_hide_ugly')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_hide_ugly" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_hide_ugly')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_hide_ugly" },
      {
        "u_message": "Use of your powers has led to an insight.  With a full-body wreathe of illusion, you could conceal your form, preventing anyone from reacting poorly to part of your appearance that isn't normal, if you can figure out the technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_LIGHT_IMAGE",
    "recurrence": [ "36 hours", "72 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 40 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_light_beam')", ">=", "6" ] },
                {
                  "or": [
                    { "math": [ "u_spell_level('photokinetic_camouflage')", ">=", "6" ] },
                    { "math": [ "u_spell_level('photokinetic_light_arms')", ">=", "6" ] }
                  ]
                }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_light_image')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_light_image" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_light_image')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_light_image" },
      {
        "u_message": "Use of your powers has led to an insight.  You could create an illusion of yourself, or even multiple illusions, confusion your enemies as to where you even are, if you can figure out the technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_RADIO",
    "recurrence": [ "36 hours", "72 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 40 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_rad_immunity')", ">=", "6" ] },
                {
                  "or": [
                    { "math": [ "u_spell_level('photokinetic_create_light')", ">=", "8" ] },
                    { "math": [ "u_spell_level('photokinetic_light_beam')", ">=", "7" ] }
                  ]
                }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_radio')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_radio" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_radio')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_radio" },
      {
        "u_message": "Use of your powers has led to an insight.  You read and broadcast radio waves, communicating with anyone else who is left out there, if you can figure out the technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_INVISIBILITY",
    "recurrence": [ "36 hours", "72 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 40 } },
            {
              "and": [
                {
                  "or": [
                    { "math": [ "u_spell_level('photokinetic_rad_immunity')", ">=", "6" ] },
                    { "math": [ "u_spell_level('photokinetic_light_image')", ">=", "6" ] }
                  ]
                },
                {
                  "or": [
                    { "math": [ "u_spell_level('photokinetic_camouflage')", ">=", "10" ] },
                    { "math": [ "u_spell_level('photokinetic_hide_ugly')", ">=", "6" ] }
                  ]
                }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_invisibility')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_invisibility" } }
      ]
    },
    "deactivate_condition": {
      "or": [
        { "not": { "u_has_trait": "PHOTOKINETIC" } },
        { "math": [ "u_spell_level('photokinetic_invisibility')", ">=", "1" ] }
      ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_invisibility" },
      {
        "u_message": "Use of your powers has led to an insight.  You could bend light completely around yourself, concealing your existence entirely, if you can figure out the technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_LIGHT_FLASH",
    "recurrence": [ "36 hours", "72 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 40 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_light_beam')", ">=", "8" ] },
                {
                  "or": [
                    { "math": [ "u_spell_level('photokinetic_rad_immunity')", ">=", "6" ] },
                    { "math": [ "u_spell_level('photokinetic_light_arms')", ">=", "6" ] }
                  ]
                }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_light_flash')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_light_flash" } }
      ]
    },
    "deactivate_condition": {
      "or": [ { "not": { "u_has_trait": "PHOTOKINETIC" } }, { "math": [ "u_spell_level('photokinetic_light_flash')", ">=", "1" ] } ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_light_flash" },
      {
        "u_message": "Use of your powers has led to an insight.  You could expand the usage of focused light, creating a wide beam capable of searing entire groups of enemies, if you can figure out the technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_LIGHT_BLINDING_GLARE",
    "recurrence": [ "96 hours", "168 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 80 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_create_light')", ">=", "12" ] },
                {
                  "or": [
                    { "math": [ "u_spell_level('photokinetic_light_flash')", ">=", "6" ] },
                    { "math": [ "u_spell_level('photokinetic_rad_immunity')", ">=", "10" ] }
                  ]
                }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_blinding_glare')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_light_blinding_glare" } }
      ]
    },
    "deactivate_condition": {
      "or": [
        { "not": { "u_has_trait": "PHOTOKINETIC" } },
        { "math": [ "u_spell_level('photokinetic_blinding_glare')", ">=", "1" ] }
      ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_light_blinding_glare" },
      {
        "u_message": "Use of your powers has led to an insight.  Enhancing your generation of light to an extreme level, you could glow brighter than a floodlight and blind anyone who attempts to attack you, if you can figure out the technique.",
        "popup": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PHOTOKIN_LEARNING_LIGHT_DISINTEGRATE",
    "recurrence": [ "96 hours", "168 hours" ],
    "condition": {
      "and": [
        { "u_has_trait": "PHOTOKINETIC" },
        { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "==", "1" ] },
        {
          "or": [
            { "x_in_y_chance": { "x": 1, "y": 80 } },
            {
              "and": [
                { "math": [ "u_spell_level('photokinetic_blinding_glare')", ">=", "5" ] },
                {
                  "or": [
                    { "math": [ "u_spell_level('photokinetic_light_flash')", ">=", "8" ] },
                    { "math": [ "u_spell_level('photokinetic_light_beam')", ">=", "14" ] }
                  ]
                }
              ]
            }
          ]
        },
        {
          "not": {
            "u_has_any_effect": [
              "sleep",
              "effect_psi_learning_new_power",
              "effect_vitakin_wakeful_resting",
              "infected",
              "spores",
              "taint",
              "visuals",
              "hallu",
              "motor_seizure",
              "frostbite",
              "blisters",
              "formication",
              "pre_common_cold",
              "common_cold",
              "pre_flu",
              "flu",
              "pre_conjunctivitis_viral",
              "conjunctivitis_viral",
              "pre_conjunctivitis_bacterial",
              "conjunctivitis_bacterial",
              "asthma",
              "brainworms",
              "bloodworms",
              "grabbed",
              "lack_sleep",
              "sleep_deprived",
              "under_operation",
              "zapped",
              "electrocuted",
              "anemia",
              "redcells_anemia",
              "scurvy",
              "toxin_buildup",
              "bad_food_ennui",
              "hypovolemia",
              "disabled",
              "foodpoison",
              "venom_pain",
              "venom_dmg",
              "badpoison",
              "onfire",
              "dazed",
              "stunned"
            ]
          }
        },
        { "math": [ "u_spell_level('photokinetic_light_disintegrate')", "<=", "0" ] },
        { "not": { "u_know_recipe": "practice_photokinetic_light_disintegrate" } }
      ]
    },
    "deactivate_condition": {
      "or": [
        { "not": { "u_has_trait": "PHOTOKINETIC" } },
        { "math": [ "u_spell_level('photokinetic_light_disintegrate')", ">=", "1" ] }
      ]
    },
    "effect": [
      { "math": [ "u_vitamin('vitamin_psi_learning_counter')", "=", "0" ] },
      { "u_learn_recipe": "practice_photokinetic_light_disintegrate" },
      {
        "u_message": "Use of your powers has led to an insight.  You could pour so much energy into a target that their body begins to disintegrate, doing immense damage, if you can figure out the technique.",
        "popup": true
      }
    ]
  }
]
