[
  {
    "type": "effect_on_condition",
    "id": "EOC_BIOKIN_MATRIX_BOOST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "u_has_trait": "BIOKINETIC" }, { "u_has_wielded_with_flag": "MATRIX_CRYSTAL_BIOKINESIS" } ] },
    "effect": [ { "math": [ "u_val('spell_level_adjustment', 'school: BIOKINETIC')", "=", "4" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_CLAIR_MATRIX_BOOST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "u_has_trait": "CLAIRSENTIENT" }, { "u_has_wielded_with_flag": "MATRIX_CRYSTAL_CLAIRSENTIENCE" } ] },
    "effect": [ { "math": [ "u_val('spell_level_adjustment', 'school: CLAIRSENTIENT')", "=", "4" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PYRO_MATRIX_BOOST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "u_has_trait": "PYROKINETIC" }, { "u_has_wielded_with_flag": "MATRIX_CRYSTAL_PYROKINESIS" } ] },
    "effect": [ { "math": [ "u_val('spell_level_adjustment', 'school: PYROKINETIC')", "=", "4" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_TELEKIN_MATRIX_BOOST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "u_has_trait": "TELEKINETIC" }, { "u_has_wielded_with_flag": "MATRIX_CRYSTAL_TELEKINESIS" } ] },
    "effect": [ { "math": [ "u_val('spell_level_adjustment', 'school: TELEKINETIC')", "=", "4" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_TEEP_MATRIX_BOOST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "u_has_trait": "TELEPATH" }, { "u_has_wielded_with_flag": "MATRIX_CRYSTAL_TELEPATHY" } ] },
    "effect": [ { "math": [ "u_val('spell_level_adjustment', 'school: TELEPATH')", "=", "4" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_TELEPORT_MATRIX_BOOST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "u_has_trait": "TELEPORTER" }, { "u_has_wielded_with_flag": "MATRIX_CRYSTAL_TELEPORTATION" } ] },
    "effect": [ { "math": [ "u_val('spell_level_adjustment', 'school: TELEPORTER')", "=", "4" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_VITAKIN_MATRIX_BOOST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "u_has_trait": "VITAKINETIC" }, { "u_has_wielded_with_flag": "MATRIX_CRYSTAL_VITAKINESIS" } ] },
    "effect": [ { "math": [ "u_val('spell_level_adjustment', 'school: VITAKINETIC')", "=", "4" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRAIN_RESIST_POTION_COMEDOWN_PENALTY",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "u_has_effect": "effect_noetic_resilience_comedown" },
    "effect": [
      { "math": [ "u_val('spell_level_adjustment', 'school: BIOKINETIC')", "=", "-3" ] },
      { "math": [ "u_val('spell_level_adjustment', 'school: CLAIRSENTIENT')", "=", "-3" ] },
      { "math": [ "u_val('spell_level_adjustment', 'school: PYROKINETIC')", "=", "-3" ] },
      { "math": [ "u_val('spell_level_adjustment', 'school: TELEKINETIC')", "=", "-3" ] },
      { "math": [ "u_val('spell_level_adjustment', 'school: TELEPATH')", "=", "-3" ] },
      { "math": [ "u_val('spell_level_adjustment', 'school: TELEPORTER')", "=", "-3" ] },
      { "math": [ "u_val('spell_level_adjustment', 'school: VITAKINETIC')", "=", "-3" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_END_PSI_POWERS",
    "//": "This should remove absolutely all powers.",
    "effect": [
      { "u_lose_effect": "effect_biokin_physical" },
      { "u_lose_effect": "effect_biokin_pkill_1" },
      { "u_lose_effect": "effect_biokin_pkill_2" },
      { "u_lose_effect": "effect_biokin_pkill_3" },
      { "u_lose_effect": "effect_biokin_pkill_4" },
      { "u_lose_effect": "effect_biokin_pkill_5" },
      { "u_lose_effect": "effect_biokin_pkill_6" },
      { "u_lose_effect": "effect_biokin_flexibility" },
      { "u_lose_effect": "effect_biokin_hammerhand" },
      { "u_remove_item_with": "biokin_hammerhand_item" },
      { "u_lose_effect": "effect_biokin_enhance_mobility" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_1" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_2" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_3" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_4" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_5" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_6" },
      { "u_lose_effect": "effect_biokin_armor_skin" },
      { "u_lose_effect": "effect_biokin_climate_control" },
      { "u_lose_effect": "effect_biokin_sealed" },
      { "u_lose_effect": "effect_biokin_combat_dance" },
      { "u_lose_effect": "effect_biokin_perfected_motion" },
      { "u_lose_effect": "effect_clair_night_eyes_1" },
      { "u_lose_effect": "effect_clair_night_eyes_2" },
      { "u_lose_effect": "effect_clair_night_eyes_3" },
      { "u_lose_effect": "effect_clair_night_eyes_4" },
      { "u_lose_effect": "effect_clair_night_eyes_5" },
      { "u_lose_effect": "effect_clair_night_eyes_6" },
      { "u_lose_effect": "effect_clair_night_eyes_7" },
      { "u_lose_effect": "effect_clair_night_eyes_8" },
      { "u_lose_effect": "effect_clair_premonition" },
      { "u_lose_trait": "CLAIR_SPEED_READ" },
      { "u_lose_effect": "effect_clair_speed_reader" },
      { "u_lose_effect": "effect_clair_ranged_enhance" },
      { "u_lose_effect": "effect_clair_sense_rads_self" },
      { "u_remove_item_with": "clair_sense_rad_item" },
      { "u_lose_effect": "effect_clair_dodge" },
      { "u_lose_effect": "effect_clair_clear_sight" },
      { "u_lose_effect": "effect_clair_omniscence" },
      { "u_lose_effect": "effect_photokin_dodge" },
      { "u_lose_effect": "effect_photokin_invisibility" },
      { "u_lose_effect": "effect_photokin_arms" },
      { "u_lose_effect": "effect_pyrokinetic_cloak" },
      { "u_remove_item_with": "pyrokinetic_fire_tool" },
      { "u_remove_item_with": "pyrokinetic_torch_weld" },
      { "u_lose_effect": "effect_pyrokinetic_aura" },
      { "u_lose_effect": "effect_pyrokinetic_flame_immunity" },
      { "u_lose_effect": "effect_telekinetic_momentum" },
      { "u_lose_effect": "effect_telekinetic_slowfall" },
      { "u_lose_effect": "effect_telekinetic_strength" },
      { "u_lose_effect": "effect_telekinetic_armor" },
      { "u_remove_item_with": "telekin_lifting_jack_1" },
      { "u_remove_item_with": "telekin_lifting_jack_2" },
      { "u_remove_item_with": "telekin_lifting_jack_3" },
      { "u_remove_item_with": "telekin_lifting_jack_4" },
      { "u_remove_item_with": "telekin_lifting_jack_5" },
      { "u_remove_item_with": "telekin_lifting_jack_6" },
      { "u_remove_item_with": "telekin_lifting_jack_7" },
      { "u_remove_item_with": "telekin_lifting_jack_8" },
      { "u_remove_item_with": "telekin_lifting_jack_9" },
      { "u_remove_item_with": "telekin_lifting_jack_10" },
      { "u_remove_item_with": "telekin_lifting_jack_11" },
      { "u_remove_item_with": "telekin_lifting_jack_12" },
      { "u_remove_item_with": "telekin_lifting_jack_13" },
      { "u_remove_item_with": "telekin_lifting_jack_14" },
      { "u_remove_item_with": "telekin_lifting_jack_15" },
      { "u_remove_item_with": "telekin_lifting_jack_16" },
      { "u_remove_item_with": "telekin_lifting_jack_17" },
      { "u_remove_item_with": "telekin_lifting_jack_18" },
      { "u_remove_item_with": "telekin_lifting_jack_19" },
      { "u_remove_item_with": "telekin_lifting_jack_20" },
      { "u_lose_effect": "effect_telekinetic_levitation" },
      { "u_lose_effect": "effect_telekinetic_aegis" },
      { "u_lose_effect": "effect_telepathic_learning_bonus" },
      { "u_lose_effect": "effect_telepath_sense_minds" },
      { "u_lose_effect": "effect_telepath_invisibility" },
      { "u_lose_effect": "effect_telepath_network_effect" },
      { "u_lose_effect": "effect_teleport_stride" },
      { "u_lose_effect": "effect_vita_health" },
      { "u_lose_effect": "effect_vitakin_purge_rads" },
      { "u_lose_effect": "effect_vita_super_heal" }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_END_PSI_POWERS_MAINTAINED",
    "//": "This should remove only those powers which are toggleable.",
    "effect": [
      { "u_lose_effect": "effect_biokin_pkill_1" },
      { "u_lose_effect": "effect_biokin_pkill_2" },
      { "u_lose_effect": "effect_biokin_pkill_3" },
      { "u_lose_effect": "effect_biokin_pkill_4" },
      { "u_lose_effect": "effect_biokin_pkill_5" },
      { "u_lose_effect": "effect_biokin_pkill_6" },
      { "u_lose_effect": "effect_biokin_hammerhand" },
      { "u_remove_item_with": "biokin_hammerhand_item" },
      { "u_lose_effect": "effect_biokin_enhance_mobility" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_1" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_2" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_3" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_4" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_5" },
      { "u_remove_item_with": "biokin_enhance_mobility_item_6" },
      { "u_lose_effect": "effect_biokin_climate_control" },
      { "u_lose_effect": "effect_clair_night_eyes_1" },
      { "u_lose_effect": "effect_clair_night_eyes_2" },
      { "u_lose_effect": "effect_clair_night_eyes_3" },
      { "u_lose_effect": "effect_clair_night_eyes_4" },
      { "u_lose_effect": "effect_clair_night_eyes_5" },
      { "u_lose_effect": "effect_clair_night_eyes_6" },
      { "u_lose_effect": "effect_clair_night_eyes_7" },
      { "u_lose_effect": "effect_clair_night_eyes_8" },
      { "u_lose_effect": "effect_clair_premonition" },
      { "u_lose_trait": "CLAIR_SPEED_READ" },
      { "u_lose_effect": "effect_clair_speed_reader" },
      { "u_remove_item_with": "photokinetic_rad_aura" },
      { "u_lose_effect": "effect_pyrokinetic_cloak" },
      { "u_remove_item_with": "pyrokinetic_fire_tool" },
      { "u_remove_item_with": "pyrokinetic_torch_weld" },
      { "u_lose_effect": "effect_pyrokinetic_aura" },
      { "u_lose_effect": "effect_telekinetic_strength" },
      { "u_remove_item_with": "telekin_lifting_jack_1" },
      { "u_remove_item_with": "telekin_lifting_jack_2" },
      { "u_remove_item_with": "telekin_lifting_jack_3" },
      { "u_remove_item_with": "telekin_lifting_jack_4" },
      { "u_remove_item_with": "telekin_lifting_jack_5" },
      { "u_remove_item_with": "telekin_lifting_jack_6" },
      { "u_remove_item_with": "telekin_lifting_jack_7" },
      { "u_remove_item_with": "telekin_lifting_jack_8" },
      { "u_remove_item_with": "telekin_lifting_jack_9" },
      { "u_remove_item_with": "telekin_lifting_jack_10" },
      { "u_remove_item_with": "telekin_lifting_jack_11" },
      { "u_remove_item_with": "telekin_lifting_jack_12" },
      { "u_remove_item_with": "telekin_lifting_jack_13" },
      { "u_remove_item_with": "telekin_lifting_jack_14" },
      { "u_remove_item_with": "telekin_lifting_jack_15" },
      { "u_remove_item_with": "telekin_lifting_jack_16" },
      { "u_remove_item_with": "telekin_lifting_jack_17" },
      { "u_remove_item_with": "telekin_lifting_jack_18" },
      { "u_remove_item_with": "telekin_lifting_jack_19" },
      { "u_remove_item_with": "telekin_lifting_jack_20" },
      { "u_lose_effect": "effect_telekinetic_levitation" },
      { "u_lose_effect": "effect_telepathic_learning_bonus" },
      { "u_lose_effect": "effect_vita_health" }
    ]
  }
]
