[
  {
    "type": "mapgen",
    "om_terrain": "mesa",
    "object": { "fill_ter": "t_sandstone" }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_edge_v1", "mesa_edge_v2" ] ],
    "//": "Z = 0",
    "//1": "These would probably be better done as conditional nests of mesa though z-level testing would need adding",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "rows": [
        "###########################     ################",
        "   #################                ##########  ",
        "      ##########                      ####      ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                "
      ],
      "terrain": { "#": "t_sandstone" }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_edge_top_v1", "mesa_edge_top_v2" ] ],
    "//": "Z = 2",
    "object": {
      "predecessor_mapgen": "field",
      "rows": [
        "###########################     ################",
        "   #################                ##########  ",
        "      ##########                      ####      ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                ",
        "                                                "
      ],
      "flags": [ "ERASE_ALL_BEFORE_PLACING_TERRAIN" ],
      "terrain": { "#": "t_null", " ": "t_open_air" }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_corner_v1", "mesa_corner_v2" ] ],
    "//": "Z = 0",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "rows": [
        "################################################",
        "   #############################################",
        "     ################### #######################",
        "        ################  ######################",
        "          ##############   #####################",
        "            ############    ####################",
        "             ###########    ####################",
        "              ##########     ###################",
        "              ##########       #################",
        "               #########        ################",
        "                ########          ##############",
        "                 #######           #############",
        "                   #####            ############",
        "                    ####            ############",
        "                    ####             ###########",
        "                     ###              ##########",
        "                     ###              ##########",
        "                     ###               #########",
        "                      ##                ########",
        "                      ##                  ######",
        "                      ##                   #####",
        "                       #                     ###",
        "                       #                      ##",
        "                       #                      ##"
      ],
      "terrain": { "#": "t_sandstone" }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_corner_top_v1", "mesa_corner_top_v2" ] ],
    "//": "Z = 2",
    "object": {
      "predecessor_mapgen": "field",
      "rows": [
        "################################################",
        "   #############################################",
        "     ################### #######################",
        "        ################  ######################",
        "          ##############   #####################",
        "            ############    ####################",
        "             ###########    ####################",
        "              ##########     ###################",
        "              ##########       #################",
        "               #########        ################",
        "                ########          ##############",
        "                 #######           #############",
        "                   #####            ############",
        "                    ####            ############",
        "                    ####             ###########",
        "                     ###              ##########",
        "                     ###              ##########",
        "                     ###               #########",
        "                      ##                ########",
        "                      ##                  ######",
        "                      ##                   #####",
        "                       #                     ###",
        "                       #                      ##",
        "                       #                      ##"
      ],
      "flags": [ "ERASE_ALL_BEFORE_PLACING_TERRAIN" ],
      "terrain": { "#": "t_null", " ": "t_open_air" }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_2way_v1", "mesa_2way_v2" ] ],
    "//": "Z = 0",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "rows": [
        "#                      ##                      #",
        "#                      ##                      #",
        "##                    ###                     ##",
        "##                    ####                    ##",
        "##                    ####                   ###",
        "###                  #####                   ###",
        "###                  #####                   ###",
        "####                 #####                  ####",
        "####                 #####                  ####",
        "####                 ######                 ####",
        "####                 ######                 ####",
        "####                #######                 ####",
        "###                 ########                ####",
        "###                 ########                 ###",
        "###                 ########                 ###",
        "##                  ########                 ###",
        "##                  ########                 ###",
        "##                   ######                  ###",
        "##                   ######                  ###",
        "##                   #####                    ##",
        "##                    ####                    ##",
        "#                     ####                    ##",
        "#                      ##                      #",
        "#                      ##                      #"
      ],
      "terrain": { "#": "t_sandstone" }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_2way_top_v1", "mesa_2way_top_v2" ] ],
    "//": "Z = 2",
    "//1": "Why does this use predecessor when it replaces the whole map?",
    "object": {
      "predecessor_mapgen": "field",
      "rows": [
        "#                      ##                      #",
        "#                      ##                      #",
        "##                    ###                     ##",
        "##                    ####                    ##",
        "##                    ####                   ###",
        "###                  #####                   ###",
        "###                  #####                   ###",
        "####                 #####                  ####",
        "####                 #####                  ####",
        "####                 ######                 ####",
        "####                 ######                 ####",
        "####                #######                 ####",
        "###                 ########                ####",
        "###                 ########                 ###",
        "###                 ########                 ###",
        "##                  ########                 ###",
        "##                  ########                 ###",
        "##                   ######                  ###",
        "##                   ######                  ###",
        "##                   #####                    ##",
        "##                    ####                    ##",
        "#                     ####                    ##",
        "#                      ##                      #",
        "#                      ##                      #"
      ],
      "flags": [ "ERASE_ALL_BEFORE_PLACING_TERRAIN" ],
      "terrain": { "#": "t_null", " ": "t_open_air" }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_3way_v1", "mesa_3way_v2" ] ],
    "//": "Z = 0",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "rows": [
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "##########    ##################################",
        "#######         ################################",
        "######           ###################      ######",
        "####             #################          ####",
        "####              ###############           ####",
        "###                ##############            ###",
        "###                 ############             ###",
        "###                  ##########              ###",
        "##                    #######                 ##",
        "##                     ###                    ##",
        "##                     ##                     ##"
      ],
      "terrain": { "#": "t_sandstone" }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": [ [ "mesa_3way_top_v1", "mesa_3way_top_v2" ] ],
    "//": "Z = 2",
    "object": {
      "predecessor_mapgen": "field",
      "rows": [
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "################################################",
        "##########    ##################################",
        "#######         ################################",
        "######           ###################      ######",
        "####             #################          ####",
        "####              ###############           ####",
        "###                ##############            ###",
        "###                 ############             ###",
        "###                  ##########              ###",
        "##                    #######                 ##",
        "##                     ###                    ##",
        "##                     ##                     ##"
      ],
      "flags": [ "ERASE_ALL_BEFORE_PLACING_TERRAIN" ],
      "terrain": { "#": "t_null", " ": "t_open_air" }
    }
  },
  {
    "type": "palette",
    "id": "canyon_edge_parameters",
    "parameters": {
      "variant": {
        "type": "nested_mapgen_id",
        "scope": "smallmap",
        "default": { "distribution": [ "24x24_canyon_edge_v1", "24x24_canyon_edge_v2" ] }
      }
    }
  },
  {
    "type": "mapgen",
    "//": "z0",
    "om_terrain": "canyon_edge_ground",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "palettes": [ "canyon_edge_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_edge_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "//": "z-1",
    "om_terrain": "canyon_edge",
    "object": {
      "predecessor_mapgen": "open_air",
      "palettes": [ "canyon_edge_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_edge_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "//": "z-2",
    "om_terrain": "canyon_edge_bottom",
    "object": {
      "predecessor_mapgen": "field",
      "palettes": [ "canyon_edge_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_edge_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "palette",
    "id": "canyon",
    "nested": {
      "#": { "else_chunks": [ "1x1_sandstone" ], "check_z": [ 0 ] },
      " ": { "chunks": [ "1x1_open_air" ], "check_z": [ 0 ] }
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_edge_v1",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        "                        ",
        "###                 ####",
        "######          ########",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################"
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_edge_v2",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        "   #####                ",
        "############          ##",
        "##############    ######",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################",
        "########################"
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "palette",
    "id": "canyon_corner_parameters",
    "parameters": {
      "variant": {
        "type": "nested_mapgen_id",
        "scope": "smallmap",
        "default": { "distribution": [ "24x24_canyon_corner_v1", "24x24_canyon_corner_v2" ] }
      }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_corner_ground",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "palettes": [ "canyon_corner_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_corner_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_corner",
    "object": {
      "predecessor_mapgen": "open_air",
      "palettes": [ "canyon_corner_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_corner_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_corner_bottom",
    "object": {
      "predecessor_mapgen": "field",
      "palettes": [ "canyon_corner_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_corner_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_corner_v1",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        "                        ",
        "###                     ",
        "#####                   ",
        "########                ",
        "##########              ",
        "############            ",
        "#############           ",
        "##############          ",
        "##############          ",
        "###############         ",
        "################        ",
        "#################       ",
        "###################     ",
        "####################    ",
        "####################    ",
        "#####################   ",
        "#####################   ",
        "#####################   ",
        "######################  ",
        "######################  ",
        "######################  ",
        "####################### ",
        "####################### ",
        "####################### "
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_corner_v2",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        "                        ",
        "                        ",
        "#                       ",
        "##                      ",
        "###                     ",
        "####                    ",
        "####                    ",
        "#####                   ",
        "#######                 ",
        "########                ",
        "##########              ",
        "###########             ",
        "############            ",
        "############            ",
        "#############           ",
        "##############          ",
        "##############          ",
        "###############         ",
        "################        ",
        "##################      ",
        "###################     ",
        "#####################   ",
        "######################  ",
        "######################  "
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "palette",
    "id": "canyon_2way_parameters",
    "parameters": {
      "variant": {
        "type": "nested_mapgen_id",
        "scope": "smallmap",
        "default": { "distribution": [ "24x24_canyon_2way_v1", "24x24_canyon_2way_v2" ] }
      }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_2way_ground",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "palettes": [ "canyon_corner_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_2way_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_2way",
    "object": {
      "predecessor_mapgen": "open_air",
      "palettes": [ "canyon_corner_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_2way_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_2way_bottom",
    "object": {
      "predecessor_mapgen": "field",
      "palettes": [ "canyon_corner_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_2way_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_2way_v1",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        " ###################### ",
        " ###################### ",
        "  ####################  ",
        "  ####################  ",
        "  ####################  ",
        "   ##################   ",
        "   ##################   ",
        "    #################   ",
        "    #################   ",
        "    #################   ",
        "    #################   ",
        "    ################    ",
        "   #################    ",
        "   #################    ",
        "   #################    ",
        "  ##################    ",
        "  ##################    ",
        "  ###################   ",
        "  ###################   ",
        "  ###################   ",
        "  ####################  ",
        " #####################  ",
        " ###################### ",
        " ###################### "
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_2way_v2",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        " ###################### ",
        " ###################### ",
        " #####################  ",
        "  ####################  ",
        "  ###################   ",
        "  ###################   ",
        "  ###################   ",
        "  ##################    ",
        "  ##################    ",
        "   #################    ",
        "   #################    ",
        "   #################    ",
        "    ################    ",
        "    #################   ",
        "    #################   ",
        "    #################   ",
        "    #################   ",
        "   ##################   ",
        "   ##################   ",
        "  ####################  ",
        "  ####################  ",
        "  ####################  ",
        " ###################### ",
        " ###################### "
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "palette",
    "id": "canyon_3way_parameters",
    "parameters": {
      "variant": {
        "type": "nested_mapgen_id",
        "scope": "smallmap",
        "default": { "distribution": [ "24x24_canyon_3way_v1", "24x24_canyon_3way_v2" ] }
      }
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_3way_ground",
    "object": {
      "fallback_predecessor_mapgen": "field",
      "palettes": [ "canyon_3way_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_3way_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_3way",
    "object": {
      "predecessor_mapgen": "open_air",
      "palettes": [ "canyon_3way_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_3way_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "om_terrain": "canyon_3way_bottom",
    "object": {
      "predecessor_mapgen": "field",
      "palettes": [ "canyon_3way_parameters" ],
      "place_nested": [ { "chunks": [ { "param": "variant", "fallback": "24x24_canyon_3way_v1" } ], "x": 0, "y": 0 } ]
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_3way_v1",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "          ####          ",
        "       #########        ",
        "      ###########       ",
        "    #############       ",
        "    ##############      ",
        "   ################     ",
        "   #################    ",
        "   ##################   ",
        "  ####################  ",
        "  ##################### ",
        "  ##################### "
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "24x24_canyon_3way_v2",
    "object": {
      "mapgensize": [ 24, 24 ],
      "rows": [
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "                        ",
        "            ######      ",
        "          ##########    ",
        "         ###########    ",
        "         ############   ",
        "        #############   ",
        "       ##############   ",
        "     #################  ",
        "  ####################  ",
        " #####################  "
      ],
      "palettes": [ "canyon" ]
    }
  },
  {
    "type": "palette",
    "id": "trail_width_palette",
    "//": "Number indicates number of tiles from center",
    "nested": {
      "0": { "chunks": [ "1x1_trail" ] },
      "1": { "chunks": [ [ "1x1_trail", 1 ], [ "null", 1 ] ] },
      "2": { "chunks": [ [ "1x1_trail", 0 ], [ "null", 1 ] ] },
      "3": { "chunks": [ [ "1x1_trail", 0 ], [ "null", 1 ] ] },
      "4": { "chunks": [ [ "1x1_trail", 0 ], [ "null", 1 ] ] }
    }
  },
  {
    "type": "palette",
    "id": "trail_path_palette",
    "terrain": { ".": "t_railroad_rubble" }
  },
  {
    "type": "mapgen",
    "nested_mapgen_id": "1x1_sandstone",
    "object": { "mapgensize": [ 1, 1 ], "terrain": { " ": "t_sandstone" }, "flags": [ "ERASE_ALL_BEFORE_PLACING_TERRAIN" ] }
  }
]
