[
    {
    "type" : "item_group",
    "id" : "chalice_cult_books",
    "items":[
      ["essay_book", 6],
      ["poetry_book", 6],
      ["plays_book", 3],
      ["philosophy_book", 2],
      ["novel_experimental", 1],
      ["book_sacrifice", 6],
      ["book_summoning", 1],
      ["book_scrollcraft", 1]
    ]
  },{
    "type" : "item_group",
    "id" : "chalice_cult_gear",
    "items":[
      ["essence", 3],
      ["essence_blood", 3],
      ["offering_chalice", 2],
      ["offering_chalice_used", 2],
      ["book_sacrifice", 1],
      ["spear_pestilence", 2],
      ["robe_shadow", 1],
      ["thunder_sigil", 1],
      ["gauntlets_necro", 2]
    ]
  },{
        "type" : "item_group",
        "subtype": "collection",
        "id": "cult_sacrifice",
        "entries":
        [
            { "item": "essence_blood", "prob": 25},
            { "item": "corpse"}
        ]
  },{
        "type" : "item_group",
        "subtype": "collection",
        "id": "chalice_cult_casualty_special",
        "entries":
        [
            { "group": "underwear", "damage": [1, 4]},
            { "group": "shirts", "damage": [1, 4]},
            { "group": "pants", "damage": [1, 4]},
            { "group": "shoes", "damage": [1, 4]},
            { "item": "stormbringer"},
            { "item": "corpse"}
        ]
  },{
        "type" : "item_group",
        "subtype": "collection",
        "id": "chalice_cult_casualties",
        "entries":
        [
            { "group": "underwear", "damage": [1, 4]},
            { "group": "shirts", "damage": [1, 4]},
            { "group": "pants", "damage": [1, 4]},
            { "group": "shoes", "damage": [1, 4]},
            { "group": "chalice_cult_gear", "prob": 25},
            { "item": "corpse"}
        ]
  },{
        "type" : "mapgen",
        "om_terrain" : ["impact_site"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "........................",
            "..........^..^..........",
            ".........^^..^^.........",
            "....^^^^^^^..^^^^^^^....",
            "...^^^^^^^^..^^^^^^^^...",
            "...^^^............^^^...",
            "...^^.P          P.^^...",
            "...^^.            .^^...",
            "...^^.  B      B  .^^...",
            "..^^^.            .^^^..",
            ".^^^^.            .^^^^.",
            "......     <<     ......",
            "......     <<     ......",
            ".^^^^.            .^^^^.",
            "..^^^.            .^^^..",
            "...^^.  B      B  .^^...",
            "...^^.            .^^...",
            "...^^.P          P.^^...",
            "...^^^............^^^...",
            "...^^^^^^^^..^^^^^^^^...",
            "....^^^^^^^..^^^^^^^....",
            ".........^^..^^.........",
            "..........^..^..........",
            "........................"
            ],
            "terrain": {
            ".": "t_dirt",
            " ": "t_rock_floor",
            "B": "t_rock_floor",
            "P": "t_little_column",
            "^": "t_pit_shallow",
            "<": "t_stairs_up"
            },
            "place_loot": [
                { "group": "cult_sacrifice", "chance": 100, "x": 8, "y": 8 },
                { "group": "cult_sacrifice", "chance": 100, "x": 15, "y": 8 },
                { "group": "cult_sacrifice", "chance": 100, "x": 8, "y": 15 },
                { "group": "cult_sacrifice", "chance": 100, "x": 15, "y": 15 }
            ],
            "set": [
                { "point": "trap", "id": "tr_brazier", "x": 8, "y": 8},
                { "point": "trap", "id": "tr_brazier", "x": 15, "y": 8},
                { "point": "trap", "id": "tr_brazier", "x": 8, "y": 15},
                { "point": "trap", "id": "tr_brazier", "x": 15, "y": 15}
            ],
            "place_monsters": [
                { "monster": "GROUP_IMPACT", "x": [ 6, 17 ], "y": [ 6, 17 ], "density": 0.1 }
            ]
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_platforms_center"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "///////////            /",
            "//  ,,,,,,,  ///////// /",
            "//  ,,,,,,,  /         /",
            "//  ///////  / /////////",
            "//  ///////  /        //",
            "//  //PPPPP  PPPPP//  //",
            "//  //P          P//  //",
            "//  //P          P//  //",
            "//  //P          P//  //",
            "//  //P          P//  //",
            "    //P    >>    P//    ",
            "    //P    >>    P//    ",
            "//  //P          P//  //",
            "//  //P          P//  //",
            "//  //P          P//  //",
            "//  //P          P//  //",
            "//  //PPPPP  PPPPP//  //",
            "//        /  ///////  //",
            "///////// /  ///////  //",
            "/         /  ,,,,,,,  //",
            "/ /////////  ,,,,,,,  //",
            "/            ///////////",
            "////////////////////////"
            ],
            "terrain": {
            " ": "t_rock_floor",
            ",": "t_floor_red",
            "P": "t_column",
            "/": "t_open_air",
            ">": "t_stairs_down"
            },
            "add": [
                { "item": "note_chalice",  "x": [8, 15], "y": [8, 15], "amount":1 }
            ],
            "set": [
                { "point": "trap", "id": "tr_glow", "x": [ 4, 10 ], "y": [ 2, 3 ], "repeat": [ 2, 6 ] },
                { "point": "trap", "id": "tr_hum", "x": [ 13, 19 ], "y": [ 20, 21 ], "repeat": [ 2, 6 ] }
            ],
            "place_monsters": [
                { "monster": "GROUP_IMPACT_FLYING", "x": [ 0, 23 ], "y": [ 0, 23 ], "density": 0.15 }
            ]
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_platforms_left"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////####////",
            "///////////////##  ##///",
            "//////////////##    ##//",
            "//////////////#  <<  +  ",
            "//////////////#  <<  +  ",
            "//////////////##    ##//",
            "///////////////##  ##///",
            "////////////////####////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////"
            ],
            "terrain": {
            " ": "t_rock_floor",
            "+": "t_door_c",
            "#": "t_column",
            "/": "t_open_air",
            "<": "t_stairs_up"
            },
            "place_monsters": [
                { "monster": "GROUP_IMPACT_FLYING", "x": [ 0, 23 ], "y": [ 0, 23 ], "density": 0.1 }
            ]
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_platforms_right"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////####////////////////",
            "///##  ##///////////////",
            "//##    ##//////////////",
            "  +  <<  #//////////////",
            "  +  <<  #//////////////",
            "//##    ##//////////////",
            "///##  ##///////////////",
            "////####////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////"
            ],
            "terrain": {
            " ": "t_rock_floor",
            "+": "t_door_c",
            "#": "t_column",
            "/": "t_open_air",
            "<": "t_stairs_up"
            },
            "place_monsters": [
                { "monster": "GROUP_IMPACT_FLYING", "x": [ 0, 23 ], "y": [ 0, 23 ], "density": 0.1 }
            ]
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_temple_left"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////####///#",
            "///////////////##  ##/##",
            "//////////////##    ### ",
            "//////////////#  >>  +  ",
            "//////////////#  >>  +  ",
            "//////////////##    ### ",
            "///////////////##  ##/##",
            "////////////////####///#",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////"
            ],
            "terrain": {
            " ": "t_rock_floor",
            "+": "t_door_c",
            "#": "t_rock",
            "/": "t_open_air",
            ">": "t_stairs_down"
            }
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_temple_right"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "#///####////////////////",
            "##/##  ##///////////////",
            " ###    ##//////////////",
            "  +  >>  #//////////////",
            "  +  >>  #//////////////",
            " ###    ##//////////////",
            "##/##  ##///////////////",
            "#///####////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////"
            ],
            "terrain": {
            " ": "t_rock_floor",
            "+": "t_door_c",
            "#": "t_rock",
            "/": "t_open_air",
            ">": "t_stairs_down"
            }
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_temple_center"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////########////////",
            "////////#B,,,,B#////////",
            "////////#,,  ,,#////////",
            "////////#,    ,#////////",
            "////////#,    ,#////////",
            "////////#,,  ,,#////////",
            "/########B,,,,B########/",
            "##======###XX###======##",
            "           ,,           ",
            "  ======  P,,P  ======  ",
            "         ,,,,,,         ",
            "         ,,,,,,         ",
            "  ======  P,,P  ======  ",
            "           ,,           ",
            "##======###++###======##",
            "/########d    d########/",
            "////////#b cc b#////////",
            "////////#d cc d#////////",
            "////////#b    b#////////",
            "////////#d CC d#////////",
            "////////#b DD b#////////",
            "////////########////////",
            "////////////////////////"
            ],
            "terrain": {
            " ": "t_rock_floor",
            "+": "t_door_c",
            ",": "t_carpet_red",
            "P": "t_little_column",
            "X": "t_door_locked_interior",
            "=": "t_rock_floor",
            "#": "t_rock",
            "B": "t_rock_floor",
            "c": "t_rock_floor",
            "b": "t_rock_floor",
            "d": "t_rock_floor",
            "C": "t_rock_floor",
            "D": "t_rock_floor",
            "/": "t_open_air"
            },
            "furniture": {
                "b": "f_bed",
                "d": "f_dresser",
                "c": "f_bookcase",
                "C": "f_chair",
                "D": "f_desk",
                "=": "f_bench"
            },
            "mapping": {
                "c": {
                    "items": { "item": "chalice_cult_books", "chance": 50 },
                    "furniture": "f_bookcase"
                },
                "d": {
                    "items": { "item": "dresser", "chance": 40 },
                    "furniture": "f_dresser"
                },
                "b": {
                    "items": [
                        { "item": "bed", "chance": 60 }
                    ],
                    "furniture": "f_bed"
                }
            },
            "place_loot": [
                { "group": "chalice_cult_casualty_special", "x": 11, "y": 4 },
                { "group": "chalice_cult_casualties", "x": [ 1,22 ], "y": [ 9,12 ], "repeat": [ 2,5 ] },
                { "group": "add_apprentice", "chance": 50, "x": [ 11,12 ], "y": [ 21,21 ] }
            ],
            "set": [
                { "point": "trap", "id": "tr_brazier", "x": 9, "y": 2},
                { "point": "trap", "id": "tr_brazier", "x": 9, "y": 7},
                { "point": "trap", "id": "tr_brazier", "x": 14, "y": 2},
                { "point": "trap", "id": "tr_brazier", "x": 14, "y": 7}
            ],
            "place_monster": [
                { "x": 11, "y": 11, "monster": "mon_archon" }
            ]
        }
    },


    {
        "type" : "mapgen",
        "om_terrain" : ["impact_roof_left"],
        "//": "Only way to give temple a roof without changing layout",
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////####///#",
            "///////////////######/##",
            "//////////////##########",
            "//////////////##########",
            "//////////////##########",
            "//////////////##########",
            "///////////////######/##",
            "////////////////####///#",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////"
            ],
            "terrain": {
            "#": "t_rock",
            "/": "t_open_air"
            }
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_roof_right"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "#///####////////////////",
            "##/######///////////////",
            "##########//////////////",
            "##########//////////////",
            "##########//////////////",
            "##########//////////////",
            "##/######///////////////",
            "#///####////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////",
            "////////////////////////"
            ],
            "terrain": {
            "#": "t_rock",
            "/": "t_open_air"
            }
        }
    },
    {
        "type" : "mapgen",
        "om_terrain" : ["impact_roof_center"],
        "method": "json",
        "weight": 100,
        "object": {
            "rows": [
            "////////////////////////",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "/######################/",
            "########################",
            "########################",
            "########################",
            "########################",
            "########################",
            "########################",
            "########################",
            "########################",
            "/######################/",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "////////########////////",
            "////////////////////////"
            ],
            "terrain": {
            "#": "t_rock",
            "/": "t_open_air"
            }
        }
    }
]
