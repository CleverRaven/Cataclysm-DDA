[
    {
      "type": "talk_topic",
      "id": "TALK_PERK_MENU_MAIN",
      "dynamic_line": "<global_val:num_perks> perk points to spend.",
      "responses": [
        {
          "condition": {
            "and": [
              { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
              { "not": { "u_has_trait": "perk_STR_UP" } }
            ]
          },
          "text": "Gain [Stronger]",
          "topic": "TALK_PERK_MENU_STRONGER"
        },
        {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_DEX_UP" } }
              ]
            },
            "text": "Gain [Faster]",
            "topic": "TALK_PERK_MENU_FASTER"
          },
          {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_INT_UP" } }
              ]
            },
            "text": "Gain [Smarter]",
            "topic": "TALK_PERK_MENU_SMARTER"
          },
          {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_PER_UP" } }
              ]
            },
            "text": "Gain [Sharper]",
            "topic": "TALK_PERK_MENU_SHARPER"
          },
          {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_holdout_pocket" } }
              ]
            },
            "text": "Gain [Holdout Pocket]",
            "topic": "TALK_PERK_MENU_HOLDOUT_POCKET"
          },
          {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_built_tough" } }
              ]
            },
            "text": "Gain [Built Tough]",
            "topic": "TALK_PERK_MENU_BUILT_TOUGH"
          },
          {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_hauler" } }
              ]
            },
            "text": "Gain [Hauler]",
            "topic": "TALK_PERK_MENU_HAULER"
          },
          {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_vacationer" } }
              ]
            },
            "text": "Gain [Vacationer]",
            "topic": "TALK_PERK_MENU_VACATIONER"
          },
          {
            "condition": {
              "and": [
                { "compare_num": [ { "global_val": "var", "var_name": "num_perks" }, ">", { "const": 0 } ] },
                { "not": { "u_has_trait": "perk_thick_skull" } }
              ]
            },
            "text": "Gain [Thick Skull]",
            "topic": "TALK_PERK_MENU_THICK_SKULL"
          },
        { "text": "Quit.", "topic": "TALK_DONE" }
      ]
    },
    {
      "type": "talk_topic",
      "id": "TALK_PERK_MENU_STRONGER",
      "dynamic_line": "Stronger: \"Have you been working out?  +1 Strength.\"",
      "responses": [
        {
          "text": "Select Perk.",
          "topic": "TALK_PERK_MENU_MAIN",
          "effect": [
            { "u_add_trait": "perk_STR_UP" },
            {
              "arithmetic": [
                { "global_val": "var", "var_name": "num_perks" },
                "=",
                { "global_val": "var", "var_name": "num_perks" },
                "-",
                { "const": 1 }
              ]
            }
          ]
        },
        { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
        { "text": "Quit.", "topic": "TALK_DONE" }
      ]
    },
    {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_FASTER",
        "dynamic_line": "Faster: \"Have you been doing cardio?  +1 Dexterity.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_DEX_UP" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      },
      {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_SMARTER",
        "dynamic_line": "Smarter: \"Have you been reading?  +1 Intelligence.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_INT_UP" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      },
      {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_SHARPER",
        "dynamic_line": "Sharper: \"Have you been staring out into the middle distance?  +1 Perception.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_PER_UP" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      },
      {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_HOLDOUT_POCKET",
        "dynamic_line": "Holdout Pocket: \"Never leave home without it!  You have a secret pocket no one knows about that can easily store a weapon.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_holdout_pocket" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      },
      {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_BUILT_TOUGH",
        "dynamic_line": "Built Tough: \"Your like a walking tank!  Take 10% less damage from all sources.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_built_tough" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      },
      {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_HAULER",
        "dynamic_line": "Hauler: \"All that hauling has paid off.  You can carry 10kg of additional items.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_hauler" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      },
      {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_VACATIONER",
        "dynamic_line": "Vacationer: \"Everyday in the apocalpyse is just like the beach.  You are more comfortable in cold and warm weather.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_vacationer" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      },
      {
        "type": "talk_topic",
        "id": "TALK_PERK_MENU_THICK_SKULL",
        "dynamic_line": "Thick Skull: \"You've taken so many blows to the head you've lost count.  You've got additional skull armor.\"",
        "responses": [
          {
            "text": "Select Perk.",
            "topic": "TALK_PERK_MENU_MAIN",
            "effect": [
              { "u_add_trait": "perk_thick_skull" },
              {
                "arithmetic": [
                  { "global_val": "var", "var_name": "num_perks" },
                  "=",
                  { "global_val": "var", "var_name": "num_perks" },
                  "-",
                  { "const": 1 }
                ]
              }
            ]
          },
          { "text": "Go Back.", "topic": "TALK_PERK_MENU_MAIN" },
          { "text": "Quit.", "topic": "TALK_DONE" }
        ]
      }
  ]
  