[
  {
    "type": "effect_type",
    "id": "effect_perk_situational_uncanny_dodge_remover",
    "//": "Hidden effect, turns off Uncanny Dodge when you get hit",
    "name": [ "" ],
    "desc": [ "" ]
  },
  {
    "type": "effect_type",
    "id": "effect_perk_situational_uncanny_dodge",
    "//": "Hidden effect, gives you Uncanny Dodge",
    "name": [ "" ],
    "desc": [ "" ],
    "flags": [ "UNCANNY_DODGE" ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_PERK_SITUATIONAL_UNCANNY_DODGE_TAKE_DAMAGE",
    "eoc_type": "EVENT",
    "required_event": "character_takes_damage",
    "condition": {
      "and": [
        { "u_has_trait": "perk_situational_uncanny_dodge" },
        { "not": { "u_has_effect": "effect_perk_situational_uncanny_dodge_remover" } }
      ]
    },
    "effect": [
      {
        "u_add_effect": "effect_perk_situational_uncanny_dodge_remover",
        "duration": { "math": [ "180 + (rand(120) + ( (u_skill('dodge') - 8) * -30)" ] }
      }
    ]
  }
]
