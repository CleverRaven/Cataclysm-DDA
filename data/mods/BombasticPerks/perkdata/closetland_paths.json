[
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND",
    "condition": { "not": { "current_dimension": "dimension_perk_closetland" } },
    "effect": [
      { "math": [ "u_closetland_perk_nearby_walls = 0" ] },
      { "math": [ "u_closetland_perk_nearby_doors = 0" ] },
      {
        "u_map_run_eocs": [
          {
            "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_WALL_CHECK",
            "effect": [ { "math": [ "u_closetland_perk_nearby_walls += 1" ] } ]
          }
        ],
        "range": 1,
        "store_coordinates_in": { "context_val": "closetland_terrain_check" },
        "stop_at_first": false,
        "condition": {
          "or": [
            { "map_furniture_with_flag": "BLOCKSDOOR", "loc": { "context_val": "closetland_terrain_check" } },
            { "map_furniture_id": "f_safe_l", "loc": { "context_val": "closetland_terrain_check" } },
            { "map_furniture_id": "f_safe_c", "loc": { "context_val": "closetland_terrain_check" } },
            { "map_terrain_with_flag": "WALL", "loc": { "context_val": "closetland_terrain_check" } }
          ]
        }
      },
      {
        "u_map_run_eocs": [
          {
            "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_DOOR_CHECK",
            "effect": [ { "math": [ "u_closetland_perk_nearby_doors += 1" ] } ]
          }
        ],
        "range": 1,
        "store_coordinates_in": { "context_val": "closetland_terrain_check" },
        "stop_at_first": true,
        "condition": {
          "or": [
            { "map_terrain_with_flag": "DOOR", "loc": { "context_val": "closetland_terrain_check" } },
            { "map_terrain_with_flag": "LOCKED", "loc": { "context_val": "closetland_terrain_check" } }
          ]
        }
      },
      {
        "if": {
          "and": [ { "math": [ "u_closetland_perk_nearby_walls == 7" ] }, { "math": [ "u_closetland_perk_nearby_doors == 1" ] } ]
        },
        "then": [ { "run_eocs": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_MEMORIZE" } ],
        "else": [ { "u_message": "You're not in a closet, and there's no path here to remember." } ]
      }
    ],
    "false_effect": [ { "run_eocs": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_MEMORIZE",
    "effect": [
      {
        "run_eoc_selector": [
          "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_SELECTOR_01",
          "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_SELECTOR_02",
          "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_SELECTOR_03"
        ],
        "names": [
          "Remember Closetland Path: <u_val:perk_closetland_paths_destination_name_1>",
          "Remember Closetland Path: <u_val:perk_closetland_paths_destination_name_2>",
          "Remember Closetland Path: <u_val:perk_closetland_paths_destination_name_3>"
        ],
        "keys": [ "1", "2", "3" ],
        "descriptions": [ "Remember this Closetpath.", "Remember this Closetpath.", "Remember this Closetpath." ],
        "hide_failing": true,
        "allow_cancel": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_SELECTOR_01",
    "effect": [
      {
        "set_string_var": "Destination 1",
        "string_input": { "title": "Input a destination name:", "description": "Destination Name:", "width": 35 },
        "target_var": { "u_val": "perk_closetland_paths_destination_name_1" }
      },
      { "u_location_variable": { "u_val": "perk_closetland_paths_destination_1" }, "min_radius": 0, "max_radius": 0 }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_SELECTOR_02",
    "effect": [
      {
        "set_string_var": "Destination 1",
        "string_input": { "title": "Input a destination name:", "description": "Destination Name:", "width": 35 },
        "target_var": { "u_val": "perk_closetland_paths_destination_name_2" }
      },
      { "u_location_variable": { "u_val": "perk_closetland_paths_destination_2" }, "min_radius": 0, "max_radius": 0 }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_SELECTOR_03",
    "effect": [
      {
        "set_string_var": "Destination 1",
        "string_input": { "title": "Input a destination name:", "description": "Destination Name:", "width": 35 },
        "target_var": { "u_val": "perk_closetland_paths_destination_name_3" }
      },
      { "u_location_variable": { "u_val": "perk_closetland_paths_destination_3" }, "min_radius": 0, "max_radius": 0 }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL",
    "effect": [
      {
        "run_eoc_selector": [
          "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL_SELECTOR_01",
          "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL_SELECTOR_02",
          "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL_SELECTOR_03"
        ],
        "names": [
          "Travel Closetland Path: <u_val:perk_closetland_paths_destination_name_1>",
          "Travel Closetland Path: <u_val:perk_closetland_paths_destination_name_2>",
          "Travel Closetland Path: <u_val:perk_closetland_paths_destination_name_3>"
        ],
        "keys": [ "1", "2", "3" ],
        "descriptions": [ "Travel this Closetpath.", "Travel this Closetpath.", "Travel this Closetpath." ],
        "hide_failing": true,
        "allow_cancel": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL_SELECTOR_01",
    "condition": { "math": [ "has_var(u_perk_closetland_paths_destination_1)" ] },
    "effect": [
      { "u_add_effect": "blind", "duration": 0 },
      { "u_travel_to_dimension": "default" },
      { "u_teleport": { "u_val": "perk_closetland_paths_destination_1" } },
      { "u_lose_effect": "blind" },
      { "u_lose_effect": "effect_perk_closetland_sleepiness" },
      { "run_eocs": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_TRAVEL_TO_CLOSETLAND_DEACTIVATE_FUTURE", "time_in_future": 0 }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL_SELECTOR_02",
    "condition": { "math": [ "has_var(u_perk_closetland_paths_destination_2)" ] },
    "effect": [
      { "u_add_effect": "blind", "duration": 0 },
      { "u_travel_to_dimension": "default" },
      { "u_teleport": { "u_val": "perk_closetland_paths_destination_2" } },
      { "u_lose_effect": "blind" },
      { "u_lose_effect": "effect_perk_closetland_sleepiness" },
      { "run_eocs": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_TRAVEL_TO_CLOSETLAND_DEACTIVATE_FUTURE", "time_in_future": 0 }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_DIFFERENT_PATHS_OF_CLOSETLAND_TRAVEL_SELECTOR_03",
    "condition": { "math": [ "has_var(u_perk_closetland_paths_destination_3)" ] },
    "effect": [
      { "u_add_effect": "blind", "duration": 0 },
      { "u_travel_to_dimension": "default" },
      { "u_teleport": { "u_val": "perk_closetland_paths_destination_3" } },
      { "u_lose_effect": "blind" },
      { "u_lose_effect": "effect_perk_closetland_sleepiness" },
      { "run_eocs": "EOC_BOMBASTIC_PERKS_CLOSET_STORAGE_TRAVEL_TO_CLOSETLAND_DEACTIVATE_FUTURE", "time_in_future": 0 }
    ]
  }
]
