[
  {
    "type": "effect_on_condition",
    "id": "EOC_TEST_CHANGELING_COMMONER_INITIAL_CONDITIONS",
    "condition": {
      "and": [
        { "u_has_trait": "UNKNOWING_CHANGELING_COMMONER" },
        { "not": { "u_has_trait": "UNKNOWING_CHANGELING_COMMONER_CHOICE" } },
        {
          "not": {
            "u_has_any_trait": [ "FAIR_FOLK_COMMONER_BROWNIE", "FAIR_FOLK_COMMONER_POOKA", "FAIR_FOLK_COMMONER_SELKIE", "FAIR_FOLK_COMMONER_TROW" ]
          }
        }
      ]
    },
    "effect": [  ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_TEST_CHANGELING_COMMON_POOL_TRAIT_LIST",
    "condition": {
      "and": [
        { "u_has_trait": "PARACLESIAN_STR_DEX_2" },
        { "u_has_trait": "PARACLESIAN_INT_PER_2" },
        { "u_has_trait": "PARACLESIAN_MAKE_GOSSAMER" },
        { "u_has_trait": "PARACLESIAN_FAE_SIGHT_2" }
      ]
    },
    "effect": [  ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_XE_CHANGELING_GRANT_POWER_VITAMIN_RECURRING",
    "recurrence": [ "14 days", "28 days" ],
    "condition": {
      "and": [
        { "u_has_any_trait": [ "UNKNOWING_CHANGELING_NOBLE", "UNKNOWING_CHANGELING_COMMONER" ] },
        { "math": [ "u_vitamin('changeling_dreams')", "==", "0" ] }
      ]
    },
    "effect": { "math": [ "u_vitamin('changeling_dreams')", "+=", "1" ] }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_UNKNOWING_CHANGELING_WEARING_IRON_OR_STEEL",
    "eoc_type": "EVENT",
    "required_event": "character_wears_item",
    "condition": { "u_has_any_trait": [ "UNKNOWING_CHANGELING_NOBLE", "UNKNOWING_CHANGELING_COMMONER" ] },
    "effect": [
      { "run_eocs": [ "EOC_UNKNOWING_CHANGELING_WEARING_IRON_FOLLOWUP", "EOC_UNKNOWING_CHANGELING_WEARING_STEEL_FOLLOWUP" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_UNKNOWING_CHANGELING_WIELDING_IRON_OR_STEEL",
    "eoc_type": "EVENT",
    "required_event": "character_wields_item",
    "condition": { "u_has_any_trait": [ "UNKNOWING_CHANGELING_NOBLE", "UNKNOWING_CHANGELING_COMMONER" ] },
    "effect": [
      { "run_eocs": [ "EOC_UNKNOWING_CHANGELING_WEARING_IRON_FOLLOWUP", "EOC_UNKNOWING_CHANGELING_WEARING_STEEL_FOLLOWUP" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_UNKNOWING_CHANGELING_WEARING_IRON_FOLLOWUP",
    "effect": {
      "u_run_inv_eocs": "all",
      "search_data": [ { "material": "iron", "worn_only": true }, { "material": "iron", "wielded_only": true } ],
      "true_eocs": [
        {
          "id": "EOC_UNKNOWING_CHANGELING_WEARING_IRON_RESULT_TRUE",
          "effect": [
            { "u_add_effect": "effect_changeling_wearing_iron", "duration": "PERMANENT" },
            { "queue_eocs": "EOC_UNKNOWING_CHANGELING_WEARING_IRON_FOLLOWUP", "time_in_future": 60 }
          ]
        }
      ],
      "false_eocs": [
        {
          "id": "EOC_UNKNOWING_CHANGELING_WEARING_IRON_RESULT_FALSE",
          "effect": [ { "u_lose_effect": "effect_changeling_wearing_iron" } ]
        }
      ]
    }
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_UNKNOWING_CHANGELING_WEARING_STEEL_FOLLOWUP",
    "effect": {
      "u_run_inv_eocs": "all",
      "search_data": [
        { "material": "steel", "worn_only": true },
        { "material": "lc_steel", "worn_only": true },
        { "material": "mc_steel", "worn_only": true },
        { "material": "hc_steel", "worn_only": true },
        { "material": "ch_steel", "worn_only": true },
        { "material": "lc_steel_chain", "worn_only": true },
        { "material": "mc_steel_chain", "worn_only": true },
        { "material": "hc_steel_chain", "worn_only": true },
        { "material": "ch_steel_chain", "worn_only": true },
        { "material": "steel", "wielded_only": true },
        { "material": "lc_steel", "wielded_only": true },
        { "material": "mc_steel", "wielded_only": true },
        { "material": "hc_steel", "wielded_only": true },
        { "material": "ch_steel", "wielded_only": true },
        { "material": "lc_steel_chain", "wielded_only": true },
        { "material": "mc_steel_chain", "wielded_only": true },
        { "material": "hc_steel_chain", "wielded_only": true },
        { "material": "ch_steel_chain", "wielded_only": true }
      ],
      "true_eocs": [
        {
          "id": "EOC_UNKNOWING_CHANGELING_WEARING_STEEL_RESULT_TRUE",
          "effect": [
            { "u_add_effect": "effect_changeling_wearing_steel", "duration": "PERMANENT" },
            { "queue_eocs": "EOC_UNKNOWING_CHANGELING_WEARING_STEEL_FOLLOWUP", "time_in_future": 60 }
          ],
          "false_effect": [ { "u_lose_effect": "effect_changeling_wearing_steel" } ]
        }
      ],
      "false_eocs": [
        {
          "id": "EOC_UNKNOWING_CHANGELING_WEARING_STEEL_RESULT_FALSE",
          "effect": [ { "u_lose_effect": "effect_changeling_wearing_steel" } ]
        }
      ]
    }
  }
]
