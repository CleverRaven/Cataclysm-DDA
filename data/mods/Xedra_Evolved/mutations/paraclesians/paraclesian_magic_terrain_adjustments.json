[
  {
    "type": "effect_on_condition",
    "id": "EOC_ARVORE_ELEMENTAL_MAGIC_ADJUSTMENT",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": {
      "and": [
        {
          "and": [
            "u_is_outside",
            {
              "or": [
                { "u_is_on_terrain_with_flag": "SHRUB" },
                { "u_is_on_terrain_with_flag": "DIGGABLE" },
                { "u_is_on_terrain_with_flag": "YOUNG" }
              ]
            },
            { "not": { "u_near_om_location": "road_curved", "range": 1 } },
            { "not": { "u_near_om_location": "road_four_way", "range": 1 } },
            { "not": { "u_near_om_location": "road_tee", "range": 1 } },
            { "not": { "u_near_om_location": "road_straight", "range": 1 } },
            { "not": { "u_near_om_location": "road_end", "range": 1 } },
            { "not": { "u_near_om_location": "road_sw", "range": 1 } },
            { "not": { "u_near_om_location": "road_ne", "range": 1 } },
            { "not": { "u_near_om_location": "road_ew", "range": 1 } },
            { "not": { "u_near_om_location": "road_ns", "range": 1 } },
            { "not": { "u_near_om_location": "road_nesw", "range": 1 } },
            { "not": { "u_near_om_location": "road", "range": 1 } }
          ]
        },
        { "u_has_trait": "ARVORE" }
      ]
    },
    "effect": [ { "math": [ "u_spellcasting_adjustment('difficulty', 'school': 'ARVORE' )", "=", "-2" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ARVORE_ELEMENTAL_MAGIC_ADJUSTMENT_HEAVY_FOREST",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": {
      "and": [
        {
          "and": [
            { "or": [ "u_is_outside", { "u_is_on_terrain": "t_barkfloor" } ] },
            {
              "or": [
                { "u_at_om_location": "forest_thick" },
                { "u_at_om_location": "arvore_genius_loci_NW" },
                { "u_at_om_location": "arvore_genius_loci_NE" },
                { "u_at_om_location": "arvore_genius_loci_SW" },
                { "u_at_om_location": "arvore_genius_loci_SE" },
                { "u_near_om_location": "great_tree_z0_nw", "range": 2 },
                { "u_near_om_location": "great_tree_z0_se", "range": 2 },
                { "u_near_om_location": "great_tree_z1_nw", "range": 2 },
                { "u_near_om_location": "great_tree_z1_se", "range": 2 },
                { "u_near_om_location": "great_tree_z2_nw", "range": 2 },
                { "u_near_om_location": "great_tree_z2_se", "range": 2 },
                { "u_near_om_location": "great_tree_z3_06", "range": 2 },
                { "u_near_om_location": "great_tree_z3_11", "range": 2 },
                { "u_near_om_location": "great_tree_z4_06", "range": 2 },
                { "u_near_om_location": "great_tree_z4_11", "range": 2 },
                { "u_near_om_location": "great_tree_z5_06", "range": 2 },
                { "u_near_om_location": "great_tree_z5_11", "range": 2 },
                { "u_near_om_location": "great_tree_z6_nw", "range": 2 },
                { "u_near_om_location": "great_tree_z6_se", "range": 2 },
                { "u_near_om_location": "great_tree_z6_n2", "range": 2 },
                { "u_near_om_location": "great_tree_z6_se", "range": 2 },
                { "u_near_om_location": "great_tree_z7_nw", "range": 2 },
                { "u_near_om_location": "great_tree_z7_se", "range": 2 },
                { "u_near_om_location": "great_tree_crown_06", "range": 2 },
                { "u_near_om_location": "great_tree_crown_11", "range": 2 },
                { "u_near_om_location": "great_tree_crown_top_01", "range": 2 },
                { "u_near_om_location": "great_tree_crown_top_04", "range": 2 },
                { "u_near_om_location": "great_tree_roots", "range": 2 },
                { "u_near_om_location": "great_tree_roots_se", "range": 2 },
                { "u_near_om_location": "great_tree_roots_nw", "range": 2 }
              ]
            },
            { "not": { "u_near_om_location": "road_curved", "range": 1 } },
            { "not": { "u_near_om_location": "road_four_way", "range": 1 } },
            { "not": { "u_near_om_location": "road_tee", "range": 1 } },
            { "not": { "u_near_om_location": "road_straight", "range": 1 } },
            { "not": { "u_near_om_location": "road_end", "range": 1 } },
            { "not": { "u_near_om_location": "road_sw", "range": 1 } },
            { "not": { "u_near_om_location": "road_ne", "range": 1 } },
            { "not": { "u_near_om_location": "road_ew", "range": 1 } },
            { "not": { "u_near_om_location": "road_ns", "range": 1 } },
            { "not": { "u_near_om_location": "road_nesw", "range": 1 } },
            { "not": { "u_near_om_location": "road", "range": 1 } }
          ]
        },
        { "u_has_trait": "ARVORE" }
      ]
    },
    "effect": [ { "math": [ "u_spellcasting_adjustment('difficulty', 'school': 'ARVORE' )", "=", "-1" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_IERDE_ELEMENTAL_MAGIC_ADJUSTMENT",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": {
      "and": [
        {
          "or": [
            { "u_is_on_terrain_with_flag": "DIGGABLE" },
            { "u_is_on_terrain": "t_rock_floor" },
            { "u_is_on_terrain": "t_railroad_rubble" },
            { "u_is_on_terrain": "t_dirt_underground" }
          ]
        },
        { "not": { "u_is_on_terrain": "t_vitrified_sand" } },
        { "not": { "u_is_on_terrain": "t_pit_corpsed" } },
        { "not": { "u_is_on_terrain": "t_fungus" } },
        { "not": { "u_is_on_terrain": "t_glassed_sand" } },
        { "not": { "u_is_on_terrain": "t_rubber_mulch" } },
        { "not": { "u_is_on_terrain": "t_swater_surf" } },
        { "not": { "u_is_on_terrain": "t_woodchips" } },
        { "u_has_trait": "IERDE" }
      ]
    },
    "effect": [ { "math": [ "u_spellcasting_adjustment('difficulty', 'school': 'IERDE' )", "=", "-2" ] } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_IERDE_ELEMENTAL_MAGIC_ADJUSTMENT_UNDERGROUND",
    "eoc_type": "EVENT",
    "required_event": "opens_spellbook",
    "condition": { "and": [ { "math": [ "u_val('pos_z')", "<=", "-1" ] }, { "u_has_trait": "IERDE" } ] },
    "effect": [ { "math": [ "u_spellcasting_adjustment('difficulty', 'school': 'IERDE' )", "=", "-1" ] } ]
  }
]
