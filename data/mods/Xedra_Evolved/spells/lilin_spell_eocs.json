[
  {
    "type": "effect_on_condition",
    "id": "EOC_LILIN_RUACH_DRAIN",
    "condition": "u_is_character",
    "effect": [  ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LILIN_CHANGE_WEATHER_DENSE_FOG",
    "condition": { "math": [ "magic_weather_dense_fog", "!=", "1" ] },
    "effect": [
      {
        "run_eocs": [
          {
            "id": "EOC_LILIN_CHANGE_WEATHER_DENSE_FOG_2",
            "condition": { "math": [ "n_vitamin('lilin_ruach_vitamin')", ">=", "240" ] },
            "effect": [
              { "math": [ "n_vitamin('lilin_ruach_vitamin')", "-=", "240" ] },
              { "u_message": "A thick fog begins to rise.", "type": "neutral" },
              { "math": [ "magic_weather_dense_fog", "=", "1" ] },
              { "u_add_effect": "effect_controlling_weather_fog", "duration": "6 hours" },
              { "queue_eocs": "EOC_CALL_NEXT_WEATHER", "time_in_future": [ "15 seconds", "45 seconds" ] },
              {
                "queue_eocs": "EOC_LILIN_CHANGE_WEATHER_DENSE_FOG_REMOVE",
                "time_in_future": [
                  {
                    "math": [
                      "450 + (u_vitamin('lilin_ruach_vitamin') / 10) + ( moon_phase() > 4 ? moon_phase() - 4 : (moon_phase() - 4) * -1) * 360)"
                    ]
                  },
                  {
                    "math": [
                      "1800 + (u_vitamin('lilin_ruach_vitamin') / 3) + ( moon_phase() > 4 ? moon_phase() - 4 : (moon_phase() - 4) * -1) * 600)"
                    ]
                  }
                ]
              }
            ],
            "false_effect": [ { "u_message": "You don't have enough ruach to call a fog.", "type": "bad" } ]
          }
        ]
      }
    ],
    "false_effect": [
      { "u_message": "You release your command over the fog and it begins to disperse.", "type": "neutral" },
      { "math": [ "magic_weather_dense_fog", "=", "0" ] },
      { "u_lose_effect": "effect_controlling_weather_fog" },
      { "queue_eocs": "EOC_CALL_NEXT_WEATHER", "time_in_future": [ "15 seconds", "45 seconds" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LILIN_CHANGE_WEATHER_DENSE_FOG_REMOVE",
    "condition": { "math": [ "magic_weather_dense_fog", "==", "1" ] },
    "effect": [
      { "u_message": "The thick fog begins to disperse.", "type": "neutral" },
      { "u_lose_effect": "effect_controlling_weather_fog" },
      { "queue_eocs": "EOC_CALL_NEXT_WEATHER", "time_in_future": [ "15 seconds", "45 seconds" ] },
      { "math": [ "magic_weather_dense_fog", "=", "0" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LILIN_SPEED_BOOST",
    "condition": { "math": [ "n_vitamin('lilin_ruach_vitamin')", ">=", "120" ] },
    "effect": [
      { "math": [ "n_vitamin('lilin_ruach_vitamin')", "-=", "120" ] },
      {
        "u_add_effect": "effect_lilin_speed_boost",
        "duration": { "math": [ "30 + (u_has_trait('THRESH_LILIN') * 30) + (u_vitamin('lilin_ruach_vitamin') / 24)" ] }
      },
      { "u_message": "The world around you slows down immensely.", "type": "good" }
    ],
    "false_effect": [ { "npc_message": "You don't have enough ruach to reap the whirlwind.", "type": "bad" } ]
  }
]
