[
  {
    "type": "jmath_function",
    "id": "dreamer_level",
    "num_args": 1,
    "return": "(u_val('intelligence') + u_val('perception')) * (_0)"
  },
  {
    "type": "jmath_function",
    "id": "eater_level",
    "num_args": 1,
    "return": "(u_val('strength') + u_val('dexterity')) * (_0)"
  },
  {
    "type": "jmath_function",
    "id": "xedra_chronomancer_level",
    "num_args": 1,
    "return": "(2 * u_val('intelligence') ) * (_0)"
  },
  {
    "type": "jmath_function",
    "id": "xedra_chron_spell_calc",
    "num_args": 3,
    "return": " ((_0 * _1) + _2) * scaling_factor(u_val('intelligence'))"
  },
  {
    "type": "jmath_function",
    "id": "spell_time",
    "num_args": 1,
    "//": "used to transform the variable time (the smallest measure is 1 second) to the spell time (the smallest measure is 1 move, 1 second = 100 moves)",
    "return": "_0 * 100"
  },
  {
    "type": "jmath_function",
    "id": "xedra_chronomancer_formula_get_level",
    "num_args": 1,
    "return": "( sqrt( ( 2 / 375 ) * _0 + 0.25 )  ) - 0.5"
  },
  {
    "type": "jmath_function",
    "id": "xedra_chronomancer_formula_exp_for_level",
    "num_args": 1,
    "return": "375 * 0.5 * _0 * (_0 + 1)"
  },
  {
    "type": "jmath_function",
    "id": "spell_train_factor",
    "num_args": 1,
    "//": "accept the spell _cost, return how much spellcasts required to level the spell",
    "//2": "formula assumes 1000 (plus 500 for eaters) as half of player's default mana pool, and 40 is flat modifier to prevent cheap spells cost ungodly lot of time and micromanagement to level them",
    "return": "(( u_has_trait('EATER')*500)+1000)/(_0 > 0 ? _0 + 40 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "int_to_level",
    "num_args": 1,
    "return": "(u_val('intelligence') * 1.5) * (_0)"
  },
  {
    "type": "jmath_function",
    "id": "dex_to_level",
    "num_args": 1,
    "return": "(u_val('dexterity') * 1.5) * (_0)"
  },
  {
    "type": "jmath_function",
    "id": "per_to_level",
    "num_args": 1,
    "return": "(u_val('perception') * 1.5) * (_0)"
  },
  {
    "type": "jmath_function",
    "id": "str_to_level",
    "num_args": 1,
    "return": "(u_val('strength') * 1.5) * (_0)"
  },
  {
    "type": "jmath_function",
    "id": "scaling_factor",
    "num_args": 1,
    "return": "( ( _0 + 10) / 20 )"
  },
  {
    "type": "jmath_function",
    "id": "paraclesian_passive_spell_exp",
    "num_args": 1,
    "return": "u_skill('deduction') * 100 + _0"
  },
  {
    "type": "jmath_function",
    "id": "xedra_chron_toggled_spell_count",
    "num_args": 0,
    "return": "( u_effect_intensity('effect_xedra_chronomancer_chronal_accel') > 0 ? 1 : 0 ) + ( u_effect_intensity('effect_xedra_chronomancer_destabilizing_strikes') > 0 ? 1 : 0 ) + ( u_effect_intensity('effect_xedra_chronomancer_stabilize_timeline') > 0 ? 1 : 0 ) + ( u_effect_intensity('effect_xedra_chronomancer_reverse_entropy') > 0 ? 1 : 0 ) + ( u_effect_intensity('effect_xedra_chronomancer_stable_timeloop') > 0 ? 1 : 0 )"
  },
  {
    "type": "jmath_function",
    "id": "paraclesian_post_threshold_doubler",
    "//": "Used to double various factors for a post-threshold bonus.  Should never more than double the initial input.",
    "num_args": 1,
    "return": "_0 + (1 * (u_has_trait('THRESH_ARVORE') + u_has_trait('THRESH_IERDE') + u_has_trait('THRESH_HOMULLUS') + u_has_trait('THRESH_SALAMANDER') + u_has_trait('THRESH_SYLPH') + u_has_trait('THRESH_UNDINE')) )"
  },
  {
    "type": "jmath_function",
    "id": "temperature_speed_mod_salamander",
    "//": "copy of temperature_speed_mod(), but allows both speed increase and speed decrease - positive value would decrease your speed if temperature is low, and increase, if temperature is high.",
    "//_0": "Temperature limit, after which the speed starts to change, in farenheit",
    "//_1": "How big the speed changes per 1 degree",
    "num_args": 2,
    "return": "(fahrenheit(weather('temperature')) - _0 + u_climate_control_str_heat()) * _1"
  },
  {
    "type": "jmath_function",
    "id": "paraclesian_homullus_total_mutations",
    "//": "Yes, this is horrible, but there's apparently no way to check the total number of mutations in a category otherwise.",
    "num_args": 1,
    "return": "_0 + u_has_trait('HOMULLUS_DURABILITY_MULT_1') + u_has_trait('HOMULLUS_DURABILITY_MULT_2') + u_has_trait('HOMULLUS_SKIN_1') + u_has_trait('HOMULLUS_SKIN_2') + u_has_trait('HOMULLUS_SKIN_3') + u_has_trait('HOMULLUS_EYES') + u_has_trait('HOMULLUS_BETTER_AT_LYING') + u_has_trait('HOMULLUS_DREAMWALKER') + u_has_trait('HOMULLUS_CHARM_FERALS') + u_has_trait('HOMULLUS_SUMMON_FERALS') + u_has_trait('HOMULLUS_SELF_DECEPTION') + u_has_trait('HOMULLUS_INVISIBLE_TO_HUMANS') + u_has_trait('HOMULLUS_REDUCED_VISIBILITY_ALLY') + u_has_trait('HOMULLUS_RESTORE_POWER') + u_has_trait('HOMULLUS_ADD_LEARNING_FOCUS') + u_has_trait('HOMULLUS_CULTIVATE_GOBLIN_FRUIT') + u_has_trait('NO_TRACE_YET_I_WISH') + u_has_trait('HOMULLUS_BACKSTAGE') + u_has_trait('HOMULLUS_CBM_INSTALL') + u_has_trait('HOMULLUS_CBM_MANA_1') + u_has_trait('HOMULLUS_CBM_MANA_2') + u_has_trait('HOMULLUS_PASSIVE_BIONIC_POWER') + u_has_trait('HOMULLUS_ARMOR_MULT_1') + u_has_trait('HOMULLUS_ARMOR_MULT_2') + u_has_trait('HOMULLUS_GAIN_BIONIC_POWER') + u_has_trait('HOMULLUS_GAIN_BIONIC_POWER_AND_MANA') + u_has_trait('HOMULLUS_CITY_STRIDER') + u_has_trait('HOMULLUS_THE_HUNTER') + u_has_trait('HOMULLUS_EAT_DEMIHUMANS') + u_has_trait('HOMULLUS_TEMPERATURE_TOLERANCE') + u_has_trait('HOMULLUS_CRAFTING_BONUS_1') + u_has_trait('HOMULLUS_CRAFTING_BONUS_2') + u_has_trait('HOMULLUS_CRAFTING_BONUS_3') + u_has_trait('HOMULLUS_GAIN_INTEGRATED_TOOLS') + u_has_trait('HOMULLUS_GAIN_INTEGRATED_HACKER') + u_has_trait('HOMULLUS_EXPANDED_MUTATIONS') + u_has_trait('HOMULLUS_THE_HUNTER2') + u_has_trait('HOMULLUS_DOLL_FORM') + u_has_trait('SOCIAL1') + u_has_trait('SOCIAL2') + u_has_trait('PRETTY') + u_has_trait('BEAUTIFUL') + u_has_trait('BEAUTIFUL2') + u_has_trait('BEAUTIFUL3') + u_has_trait('STR_UP') + u_has_trait('STR_UP_2') + u_has_trait('STR_ALPHA') + u_has_trait('DEX_UP')+ u_has_trait('DEX_UP_2') + u_has_trait('DEX_ALPHA') + u_has_trait('INT_UP') + u_has_trait('INT_UP_2') + u_has_trait('INT_ALPHA') + u_has_trait('PER_UP') + u_has_trait('PER_UP_2') + u_has_trait('PER_ALPHA')"
  },
  {
    "type": "jmath_function",
    "id": "vampire_total_tier_one_traits",
    "num_args": 0,
    "return": "u_has_trait('EYEGLEAM') + u_has_trait('BLOOD_FUN') + u_has_trait('STAMINAFORBLOOD') + u_has_trait('COMMUNE_NIGHT') + u_has_trait('VAMPIRIC_STRENGTH') + u_has_trait('VAMPIRIC_RESILIENCE') + u_has_trait('VAMPIRE_HEIGHTENED_SENSES') + u_has_trait('VAMPIRE_SILENT_MOVE')"
  },
  {
    "type": "jmath_function",
    "id": "vampire_total_tier_two_traits",
    "num_args": 0,
    "return": "u_has_trait('BLOODHEAL') + u_has_trait('COAGULANTWEAVE') + u_has_trait('VAMPIRIC_DODGE') + u_has_trait('VAMPIRE_FEAR_GAZE') + u_has_trait('VAMPIRE_WALK_ON_WALLS') + u_has_trait('VAMPIRE_BEAST_CLAWS') + u_has_trait('VAMPIRE_SEE_HEAT')"
  },
  {
    "type": "jmath_function",
    "id": "vampire_total_tier_three_traits",
    "num_args": 0,
    "return": "u_has_trait('BLOODHASTE') + u_has_trait('HYPNOTIC_GAZE') + u_has_trait('MAGICFORBLOOD') + u_has_trait('BLOODBANK') + u_has_trait('VAMPIRE_COMMAND_BEAST') + u_has_trait('VAMPIRE_EARTH_SLUMBER')"
  },
  {
    "type": "jmath_function",
    "id": "vampire_total_tier_four_traits",
    "//": "This is where all new added tier four traits should be placed",
    "num_args": 0,
    "return": "u_has_trait('TRUE_VAMPIRE_POWER') + u_has_trait('VAMPIRE_TORPOR') + u_has_trait('VAMPIRE_DOMINATE') + u_has_trait('VAMPIRE_NO_BREATHE') + u_has_trait('VAMPIRE_NO_ILLNESS') + u_has_trait('VAMPIRE_BAT_FORM') + u_has_trait('VAMPIRE_WOLF_FORM') + u_has_trait('VAMPIRE_MIST_FORM')"
  },
  {
    "type": "jmath_function",
    "id": "vampire_total_tier_four_traits_plus_potence",
    "//": "This is the statement that should be used in power scaling calculations, to make sure that True Vampire's Potence is properly accounted for without blocking the gaining of additional powers",
    "num_args": 0,
    "return": "vampire_total_tier_four_traits() + (u_has_trait('TRUE_VAMPIRE_POWER') * 5)"
  },
  {
    "type": "jmath_function",
    "id": "vampire_total_tier_five_traits",
    "//": "This is where all newly-added tier five traits should be placed",
    "num_args": 0,
    "return": "u_has_trait('VAMPIRE_MASTER_MORTAL_MIND') + u_has_trait('VAMPIRE_DISTILLATE_INNER_BLOOD') + u_has_trait('VAMPIRE_SHADOW_FORM') + u_has_trait('VAMPIRE_LAST_BREATH_MIST') + u_has_trait('VAMPIRE_IRON_MIND') + u_has_trait('VAMPIRE_BLIND_THE_SUN')"
  },
  {
    "type": "jmath_function",
    "id": "changeling_common_traits",
    "//": "This is to make sure no individual changeling has a mutation count twice",
    "num_args": 0,
    "return": "(u_has_trait('UNKNOWING_CHANGELING_NOBLE') * u_sum_traits_of_category_char_has('FAIR_FOLK_NOBLE') ) + (u_has_trait('UNKNOWING_CHANGELING_COMMONER_BROWNIE') * u_sum_traits_of_category_char_has('FAIR_FOLK_COMMONER_BROWNIE') ) + (u_has_trait('UNKNOWING_CHANGELING_COMMONER_POOKA') * u_sum_traits_of_category_char_has('FAIR_FOLK_COMMONER_POOKA') ) + (u_has_trait('UNKNOWING_CHANGELING_COMMONER_SELKIE') * u_sum_traits_of_category_char_has('FAIR_FOLK_COMMONER_SELKIE') ) + (u_has_trait('UNKNOWING_CHANGELING_COMMONER_TROW') * u_sum_traits_of_category_char_has('FAIR_FOLK_COMMONER_TROW') )"
  },
  {
    "type": "jmath_function",
    "id": "pooka_shapeshift_traits",
    "num_args": 0,
    "return": "u_has_trait('ANTLERS') + u_has_trait('HORNS_CURLED') + u_has_trait('LUPINE_EARS') + u_has_trait('FELINE_EARS') + u_has_trait('CLAWS') + u_has_trait('CLAWS_ST') + u_has_trait('WINGS_BIRD') + u_has_trait('URSINE_FUR') + u_has_trait('CHITIN2') + u_has_trait('POOKA_QUADRUPED_TRAITS') + u_has_trait('LEAPING_LEGS') + u_has_trait('TAIL_FLUFFY') + u_has_trait('TAIL_LONG')"
  },
  {
    "type": "jmath_function",
    "id": "selkie_has_weather_mastery",
    "num_args": 0,
    "return": "1 + (u_has_trait('SELKIE_CHANGE_WEATHER_MASTER') * 1.5)"
  },
  {
    "type": "jmath_function",
    "id": "lilin_has_ruach_efficiency",
    "num_args": 0,
    "return": "1 - min( ( (u_has_trait('LILIN_RUACH_EFFICIENCY') * 0.15) + (u_has_trait('LILIN_RUACH_EFFICIENCY_UPGRADE') * 0.15) + ( u_has_trait('LILIN_RUACH_EFFICIENCY_UPGRADE') * max( ( (u_vitamin('lilin_ruach_vitamin') - 3500 ) / 12000 ), 0) ) ), 0.33)"
  },
  {
    "type": "jmath_function",
    "id": "lilin_has_ruach_efficiency_beta",
    "//": "For use when the lilit is the beta talker of the spell EoC, such as when it's targeting someone else",
    "num_args": 0,
    "return": "1 - min( ( (n_has_trait('LILIN_RUACH_EFFICIENCY') * 0.15) + (n_has_trait('LILIN_RUACH_EFFICIENCY_UPGRADE') * 0.15) + ( n_has_trait('LILIN_RUACH_EFFICIENCY_UPGRADE') * max( ( (n_vitamin('lilin_ruach_vitamin') - 3500 ) / 12000 ), 0) ) ), 0.33)"
  }
]
