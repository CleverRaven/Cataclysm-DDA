[
  {
    "type": "effect_on_condition",
    "id": "EOC_AM_BECOME_BIRD_INITIAL",
    "effect": [
      { "math": [ "u_vitamin('mutagen')", "=", "200" ] },
      { "math": [ "u_vitamin('mutagen_bird')", "=", "200" ] },
      { "math": [ "mutagen_gland = 1" ] },
      { "math": [ "bird_mutagen_gland = 1" ] },
      { "math": [ "recently_mutated = 0" ] },
      { "run_eocs": [ "EOC_AM_BECOME_BIRD" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_AM_BECOME_BIRD",
    "deactivate_condition": { "math": [ "recently_mutated == 1" ] },
    "recurrence": 3600,
    "condition": { "math": [ "u_vitamin('mutagen_bird') < 500" ] },
    "effect": [
      {
        "if": { "math": [ "rng( 0, u_has_trait('THRESH_BIRD') ? 29 : 4) == 0" ] },
        "then": [ { "math": [ "u_vitamin('mutagen_bird') += 51" ] }, { "math": [ "u_vitamin('mutagen') += 51" ] } ],
        "else": [ { "math": [ "u_vitamin('mutagen_bird') += 1" ] }, { "math": [ "u_vitamin('mutagen') += 1" ] } ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_GLAND_CLEANSE",
    "eoc_type": "EVENT",
    "required_event": "gains_mutation",
    "condition": { "and": [ "u_is_avatar", { "math": [ "mutagen_gland == 1" ] } ] },
    "effect": [
      { "math": [ "recently_mutated = 1" ] },
      { "math": [ "u_vitamin('mutagen') = max( 0, u_vitamin('mutagen') - 500 )" ] },
      {
        "if": { "math": [ "bird_mutagen_gland == 1" ] },
        "then": [
          { "math": [ "u_vitamin('mutagen_bird') = max( 0, u_vitamin('mutagen_bird') - 500 )" ] },
          { "run_eocs": [ "EOC_AM_BECOME_BIRD_INITIAL" ], "time_in_future": "3 days" }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_GLAND_CLEANSE",
    "eoc_type": "EVENT",
    "required_event": "gains_mutation",
    "condition": { "and": [ "u_is_avatar", { "math": [ "mutagen_gland == 1" ] } ] },
    "effect": [
      { "math": [ "recently_mutated = 1" ] },
      { "math": [ "u_vitamin('mutagen') = max( 0, u_vitamin('mutagen') - 500 )" ] },
      {
        "if": { "math": [ "bird_mutagen_gland == 1" ] },
        "then": [
          { "math": [ "u_vitamin('mutagen_bird') = max( 0, u_vitamin('mutagen_bird') - 500 )" ] },
          { "run_eocs": [ "EOC_AM_BECOME_BIRD_INITIAL" ], "time_in_future": "3 days" }
        ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_GLAND_CLEANSE",
    "eoc_type": "EVENT",
    "required_event": "gains_mutation",
    "condition": { "and": [ "u_is_avatar", { "math": [ "mutagen_gland == 1" ] } ] },
    "effect": [
      { "math": [ "recently_mutated = 1" ] },
      { "math": [ "u_vitamin('mutagen') = max( 0, u_vitamin('mutagen') - 500 )" ] },
      {
        "if": { "math": [ "bird_mutagen_gland == 1" ] },
        "then": [
          { "math": [ "u_vitamin('mutagen_bird') = max( 0, u_vitamin('mutagen_bird') - 500 )" ] },
          { "run_eocs": [ "EOC_AM_BECOME_BIRD_INITIAL" ], "time_in_future": "3 days" }
        ]
      }
    ]
  }
]
