[
  {
    "type": "jmath_function",
    "id": "magiclysm_standard_spell_failure_equation",
    "num_args": 0,
    "return": "0.6 + (u_effect_intensity('effect_magiclysm_spellcasting_aid_item_wielded') > 0 ? -0.3 : 0) + (u_val('intelligence') * -0.03) + (u_spell_level(_spell_id) * -0.02) + clamp( ( (u_pain() / 100) + ( (u_pain() > 4) ? (u_spell_level(_spell_id) * -0.04) : 0) ), 0, 1) + magiclysm_spell_failure_spellcraft_adjustments()"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_spellcraft_adjustments",
    "num_args": 0,
    "return": "(u_spell_difficulty(_spell_id) * 0.04) + (u_skill('spellcraft') * -0.08) + (u_spell_difficulty(_spell_id) > u_skill('spellcraft') ) ? ( (u_spell_difficulty(_spell_id) - u_skill('spellcraft') ) * 0.12 ) : 0"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_evocation_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_evocation_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_evocation_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_evocation_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_evocation_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_evocation_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_channeling_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_channeling_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_channeling_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_channel_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_channel_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_channel_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_summoning_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_summoning_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_summoning_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_summon_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_summon_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_summon_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_enhancement_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_enhancement_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_enhancement_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_enhancement_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_enhancement_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_enhancement_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_enervation_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_enervation_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_enervation_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_enervation_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_enervation_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_enervation_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_conveyance_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_conveyance_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_conveyance_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_conveyance_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_conveyance_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_conveyance_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_restoration_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_restoration_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_restoration_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_restoration_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_restoration_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_restoration_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_transformation_formula",
    "num_args": 0,
    "return": "clamp( (magiclysm_standard_spell_failure_equation() + magiclysm_spell_failure_transformation_proficiency_adjustments() ), 0, 1)"
  },
  {
    "type": "jmath_function",
    "id": "magiclysm_spell_failure_transformation_proficiency_adjustments",
    "num_args": 0,
    "return": "(u_has_proficiency('prof_magic_transformation_beginner') ? -0.1 : 0) + (u_has_proficiency('prof_magic_transformation_apprentice') ? -0.15 : 0) + (u_has_proficiency('prof_magic_transformation_master') ? -0.2 : 0)"
  },
  {
    "type": "jmath_function",
    "id": "evocation_proficiency_modifier",
    "num_args": 0,
    "return": "1 + ( (u_proficiency('prof_magic_evocation_beginner', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_evocation_apprentice', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_evocation_master', 'format': 'percent') / 1000) )"
  },
  {
    "type": "jmath_function",
    "id": "channeling_proficiency_modifier",
    "num_args": 0,
    "return": "1 + ( (u_proficiency('prof_magic_channel_beginner', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_channel_apprentice', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_channel_master', 'format': 'percent') / 1000) )"
  },
  {
    "type": "jmath_function",
    "id": "summoning_proficiency_modifier",
    "num_args": 0,
    "return": "1 + ( (u_proficiency('prof_magic_summon_beginner', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_summon_apprentice', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_summon_master', 'format': 'percent') / 1000) )"
  },
  {
    "type": "jmath_function",
    "id": "enhancement_proficiency_modifier",
    "num_args": 0,
    "return": "1 + ( (u_proficiency('prof_magic_enhancement_beginner', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_enhancement_apprentice', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_enhancement_master', 'format': 'percent') / 1000) )"
  },
  {
    "type": "jmath_function",
    "id": "restoration_proficiency_modifier",
    "num_args": 0,
    "return": "1 + ( (u_proficiency('prof_magic_restoration_beginner', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_restoration_apprentice', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_restoration_master', 'format': 'percent') / 1000) )"
  },
  {
    "type": "jmath_function",
    "id": "conveyance_proficiency_modifier",
    "num_args": 0,
    "return": "1 + ( (u_proficiency('prof_magic_conveyance_beginner', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_conveyance_apprentice', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_conveyance_master', 'format': 'percent') / 1000) )"
  },
  {
    "type": "jmath_function",
    "id": "transformation_proficiency_modifier",
    "num_args": 0,
    "return": "1 + ( (u_proficiency('prof_magic_transformation_beginner', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_transformation_apprentice', 'format': 'percent') / 1000) + (u_proficiency('prof_magic_transformation_master', 'format': 'percent') / 1000) )"
  },
  {
    "type": "jmath_function",
    "id": "casting_proficiency_beginner_xp_modifier",
    "num_args": 0,
    "return": "(rng(1,4) / 16) * casting_proficiency_adjustments()"
  },
  {
    "type": "jmath_function",
    "id": "casting_proficiency_apprentice_xp_modifier",
    "num_args": 0,
    "return": "(rng(1,4) / 32) * casting_proficiency_adjustments()"
  },
  {
    "type": "jmath_function",
    "id": "casting_proficiency_master_xp_modifier",
    "num_args": 0,
    "return": "(rng(1,4) / 64) * casting_proficiency_adjustments()"
  },
  {
    "type": "jmath_function",
    "id": "casting_proficiency_adjustments",
    "num_args": 0,
    "return": "u_last_spell_cast_difficulty * (sqrt(u_last_spell_cast_casting_time / 100) )"
  }
]
