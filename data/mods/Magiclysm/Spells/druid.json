[
  {
    "id": "druid_veggrasp",
    "type": "SPELL",
    "name": "Vegetative Grasp",
    "description": "This spell causes roots and vines to burst forth from the ground and grab your foes, slowing them and doing a small amount of damage as they dig in.\n\nLarger targets will be <color_yellow>less affected</color> by the spell, and it has <color_red>no effect</color> on targets not on natural ground.",
    "valid_targets": [ "hostile", "ground" ],
    "flags": [ "EVOCATION_SPELL", "LOUD", "SOMATIC", "VERBAL", "RANDOM_DAMAGE", "NO_LEGS", "NO_PROJECTILE", "SPLIT_DAMAGE" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_VEGGRASP_ENTANGLED",
    "shape": "blast",
    "spell_class": "DRUID",
    "base_casting_time": 100,
    "base_energy_cost": 175,
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 2,
    "max_level": 20,
    "min_damage": { "math": [ "(u_spell_level('druid_veggrasp') * 0.1) + 1" ] },
    "max_damage": { "math": [ "(u_spell_level('druid_veggrasp') * 0.4) + 2" ] },
    "min_aoe": 2,
    "max_aoe": 8,
    "aoe_increment": 0.5,
    "min_range": 3,
    "max_range": 10,
    "range_increment": 1.0,
    "min_duration": 1000,
    "max_duration": 10000,
    "duration_increment": 500,
    "min_pierce": 1,
    "max_pierce": 5,
    "pierce_increment": 0.25,
    "min_dot": 0.1,
    "max_dot": 0.3,
    "dot_increment": 0.01,
    "extra_effects": [ { "id": "eoc_evocation_setup", "hit_self": true } ],
    "damage_type": "stab"
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_VEGGRASP_ENTANGLED",
    "condition": "has_alpha",
    "effect": [
      { "math": [ "u_vegetative_grasp_affected_level = n_spell_level('druid_veggrasp')" ] },
      {
        "math": [
          "u_evocation_spell_affected_proficiency = (1 + (n_has_proficiency('prof_magic_evocation_beginner') * 0.1 ) + (n_has_proficiency('prof_magic_evocation_apprentice') * 0.1 ) + (n_has_proficiency('prof_magic_evocation_master') * 0.1 ) )"
        ]
      },
      { "u_add_effect": "entangled", "duration": { "math": [ "10 + (u_vegetative_grasp_affected_level * 5)" ] } }
    ]
  },
  {
    "id": "druid_rootstrike",
    "type": "SPELL",
    "name": "Root Strike",
    "description": "This spell causes roots to spear out of the ground in a cone and stab into your foes, impaling them.",
    "valid_targets": [ "hostile", "ground" ],
    "flags": [ "EVOCATION_SPELL", "RANDOM_DAMAGE", "LOUD", "SOMATIC", "VERBAL", "NO_LEGS", "SPLIT_DAMAGE" ],
    "effect": "attack",
    "effect_str": "root_impale",
    "shape": "cone",
    "spell_class": "DRUID",
    "base_casting_time": 100,
    "base_energy_cost": 100,
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 4,
    "max_level": 20,
    "min_damage": { "math": [ "(u_spell_level('druid_rootstrike') * 0.8) + 8" ] },
    "max_damage": { "math": [ "(u_spell_level('druid_rootstrike') * 1.5) + 14" ] },
    "min_aoe": 25,
    "max_aoe": 45,
    "aoe_increment": 1.0,
    "min_range": 4,
    "max_range": 10,
    "range_increment": 0.5,
    "min_dot": 1,
    "max_dot": 2,
    "dot_increment": 0.1,
    "min_duration": 1000,
    "max_duration": 10000,
    "duration_increment": 500,
    "min_pierce": 10,
    "max_pierce": 20,
    "pierce_increment": 0.5,
    "extra_effects": [ { "id": "eoc_evocation_setup", "hit_self": true } ],
    "damage_type": "stab"
  },
  {
    "id": "druid_woodshaft",
    "type": "SPELL",
    "name": "Wooden Shaft",
    "description": "This spell creates a projectile of hardwood that shoots forth from the caster's hand at high speed to stab into an enemy.",
    "valid_targets": [ "hostile" ],
    "flags": [ "EVOCATION_SPELL", "RANDOM_DAMAGE", "LOUD", "SOMATIC", "VERBAL", "NO_LEGS" ],
    "effect": "attack",
    "shape": "blast",
    "spell_class": "DRUID",
    "base_casting_time": 100,
    "base_energy_cost": 50,
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 1,
    "max_level": 20,
    "min_damage": { "math": [ "(u_spell_level('druid_woodshaft') * 0.333) + 1" ] },
    "max_damage": { "math": [ "(u_spell_level('druid_woodshaft') * 0.9) + 3" ] },
    "min_range": 5,
    "max_range": 15,
    "range_increment": 0.75,
    "min_pierce": 1,
    "max_pierce": 5,
    "pierce_increment": 0.5,
    "extra_effects": [ { "id": "eoc_evocation_setup", "hit_self": true } ],
    "damage_type": "bash"
  },
  {
    "id": "druid_naturebow1",
    "type": "SPELL",
    "name": "Nature's Bow",
    "description": "This spell conjures a magical wooden recurve bow, as well as a quiver and a set of arrows to go with it.",
    "valid_targets": [ "none" ],
    "flags": [ "CONJURATION_SPELL", "CONCENTRATE", "SOMATIC", "VERBAL", "NO_LEGS" ],
    "extra_effects": [ { "id": "druid_naturequiver1" }, { "id": "druid_naturearrows1" }, { "id": "eoc_summon_setup", "hit_self": true } ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "druid_recurve",
    "shape": "blast",
    "base_casting_time": 200,
    "base_energy_cost": 250,
    "min_duration": 24000,
    "max_duration": 360000,
    "duration_increment": 24000,
    "difficulty": 5,
    "max_level": 15,
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "learn_spells": { "druid_naturebow1_plus": 15 }
  },
  {
    "id": "druid_naturequiver1",
    "type": "SPELL",
    "name": { "str": "Nature's Quiver", "//~": "NO_I18N" },
    "description": {
      "str": "This spell conjures a magical quiver as part of the nature's bow spell.  It's a bug if you have it directly.",
      "//~": "NO_I18N"
    },
    "valid_targets": [ "none" ],
    "flags": [ "CONJURATION_SPELL", "SILENT" ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "druid_quiver",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_spell_level('druid_naturebow1') * 24000) + 24000) * (summoning_proficiency_modifier())" ] },
    "max_duration": { "math": [ "( (u_spell_level('druid_naturebow1') * 24000) + 24000) * (summoning_proficiency_modifier())" ] }
  },
  {
    "id": "druid_naturearrows1",
    "type": "SPELL",
    "name": { "str": "Nature's Arrows", "//~": "NO_I18N" },
    "description": {
      "str": "This spell conjures magical arrows as part of the nature's bow spell.  It's a bug if you have it directly.",
      "//~": "NO_I18N"
    },
    "valid_targets": [ "none" ],
    "flags": [ "CONJURATION_SPELL", "SILENT" ],
    "min_damage": { "math": [ "( (u_spell_level('druid_naturebow1') * 3) + 15) * (summoning_proficiency_modifier())" ] },
    "max_damage": { "math": [ "( (u_spell_level('druid_naturebow1') * 3) + 15) * (summoning_proficiency_modifier())" ] },
    "effect": "spawn_item",
    "effect_str": "druid_naturearrows1",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_spell_level('druid_naturebow1') * 24000) + 24000) * (summoning_proficiency_modifier())" ] },
    "max_duration": { "math": [ "( (u_spell_level('druid_naturebow1') * 24000) + 24000) * (summoning_proficiency_modifier())" ] }
  },
  {
    "id": "druid_naturebow1_plus",
    "type": "SPELL",
    "name": "Improved Nature's Bow",
    "description": "This spell conjures a magical wooden recurve bow, as well as a quiver and a set of arrows to go with it.  Now you know this spell like the back of your hand, and have started to design your own version.",
    "valid_targets": [ "none" ],
    "flags": [ "CONJURATION_SPELL", "SOMATIC", "VERBAL", "NO_LEGS", "NO_FAIL" ],
    "extra_effects": [
      { "id": "druid_naturequiver1_plus" },
      { "id": "druid_naturearrows1_plus" },
      { "id": "eoc_summon_setup", "hit_self": true }
    ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "druid_recurve",
    "shape": "blast",
    "base_casting_time": 200,
    "final_casting_time": 100,
    "casting_time_increment": -4,
    "base_energy_cost": 250,
    "final_energy_cost": 100,
    "energy_increment": -6,
    "min_duration": 360000,
    "max_duration": 2160000,
    "duration_increment": 72000,
    "difficulty": 7,
    "max_level": 25,
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic"
  },
  {
    "id": "druid_naturequiver1_plus",
    "type": "SPELL",
    "name": { "str": "Nature's Quiver", "//~": "NO_I18N" },
    "description": {
      "str": "This spell conjures a magical quiver as part of the nature's bow spell.  It's a bug if you have it directly.",
      "//~": "NO_I18N"
    },
    "valid_targets": [ "none" ],
    "flags": [ "CONJURATION_SPELL", "SILENT" ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "druid_quiver_plus",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_spell_level('druid_naturebow1_plus') * 72000) + 360000) * (summoning_proficiency_modifier())" ] },
    "max_duration": { "math": [ "( (u_spell_level('druid_naturebow1_plus') * 72000) + 360000) * (summoning_proficiency_modifier())" ] }
  },
  {
    "id": "druid_naturearrows1_plus",
    "type": "SPELL",
    "name": { "str": "Nature's Arrows", "//~": "NO_I18N" },
    "description": {
      "str": "This spell conjures magical arrows as part of the nature's bow spell.  It's a bug if you have it directly.",
      "//~": "NO_I18N"
    },
    "valid_targets": [ "none" ],
    "flags": [ "CONJURATION_SPELL", "SILENT" ],
    "min_damage": { "math": [ "( (u_spell_level('druid_naturebow1_plus') * 4) + 30) * (summoning_proficiency_modifier())" ] },
    "max_damage": { "math": [ "( (u_spell_level('druid_naturebow1_plus') * 4) + 30) * (summoning_proficiency_modifier())" ] },
    "effect": "spawn_item",
    "effect_str": "druid_naturearrows1",
    "shape": "blast",
    "min_duration": { "math": [ "( (u_spell_level('druid_naturebow1_plus') * 72000) + 360000) * (summoning_proficiency_modifier())" ] },
    "max_duration": { "math": [ "( (u_spell_level('druid_naturebow1_plus') * 72000) + 360000) * (summoning_proficiency_modifier())" ] }
  },
  {
    "id": "recover_sleepiness",
    "type": "SPELL",
    "name": "Nature's Trance",
    "description": "Your connection to living things allows you to go into a magical trance.  This allows you to recover from fatigue quickly in exchange for mana.",
    "valid_targets": [ "self" ],
    "flags": [ "RESTORATION_SPELL", "RANDOM_DAMAGE", "CONCENTRATE", "SILENT", "NO_HANDS" ],
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "effect": "recover_energy",
    "effect_str": "SLEEPINESS",
    "shape": "blast",
    "base_casting_time": 10000,
    "min_damage": { "math": [ "(u_spell_level('recover_sleepiness') * 4) + 10" ] },
    "max_damage": { "math": [ "(u_spell_level('recover_sleepiness') * 8) + 25" ] },
    "max_level": 25,
    "extra_effects": [ { "id": "eoc_restoration_setup", "hit_self": true } ],
    "base_energy_cost": 500,
    "energy_increment": 25,
    "final_energy_cost": 1125,
    "difficulty": 4
  },
  {
    "id": "summon_cats",
    "type": "SPELL",
    "name": { "str": "Bag of Cats" },
    "description": "Are you the crazy cat lady?",
    "valid_targets": [ "ground" ],
    "flags": [ "CONJURATION_SPELL", "LOUD", "SOMATIC", "SPAWN_GROUP", "NO_CORPSE_QUIET" ],
    "min_damage": 1,
    "max_damage": 12,
    "damage_increment": 1.0,
    "min_range": 3,
    "range_increment": 0.8,
    "max_range": 7,
    "min_aoe": 3,
    "max_aoe": 3,
    "spell_class": "DRUID",
    "base_casting_time": 250,
    "magic_type": "magiclysm_generic_magic",
    "max_level": 25,
    "extra_effects": [ { "id": "eoc_summon_setup", "hit_self": true } ],
    "min_duration": 6000,
    "max_duration": 60000,
    "duration_increment": 1000,
    "difficulty": 1,
    "base_energy_cost": 265,
    "shape": "blast",
    "effect": "summon",
    "effect_str": "GROUP_STRAY_CATS"
  },
  {
    "id": "summon_bear",
    "type": "SPELL",
    "name": "Cause Bear",
    "description": "This spell appears to be very smudged.  You're fairly sure the name should be Cause Fear, but you're also fairly sure it won't have the desired effect because the instructions are hardly legible.  No time like the Cataclysm to find out, though!",
    "valid_targets": [ "ground" ],
    "min_damage": 1,
    "max_damage": 1,
    "min_range": 3,
    "max_range": 5,
    "range_increment": 0.1,
    "spell_class": "DRUID",
    "base_casting_time": 500,
    "magic_type": "magiclysm_generic_magic",
    "max_level": 25,
    "difficulty": 10,
    "min_duration": 6000,
    "max_duration": 30000,
    "duration_increment": 1000,
    "base_energy_cost": 675,
    "extra_effects": [ { "id": "eoc_summon_setup", "hit_self": true } ],
    "final_energy_cost": 475,
    "energy_increment": -5.0,
    "flags": [ "CONJURATION_SPELL", "HOSTILE_50", "CONCENTRATE", "SOMATIC", "VERBAL", "NO_LEGS", "NO_CORPSE_QUIET" ],
    "shape": "blast",
    "effect": "summon",
    "effect_str": "mon_bear"
  },
  {
    "id": "fungicide",
    "type": "SPELL",
    "name": "Kill Fungus",
    "description": "Kills fungus affected areas.",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "ter_transform",
    "effect_str": "fungicide",
    "shape": "blast",
    "min_aoe": 5,
    "max_aoe": 25,
    "aoe_increment": 1.0,
    "max_level": 20,
    "difficulty": 4,
    "magic_type": "magiclysm_generic_magic",
    "base_energy_cost": 175,
    "base_casting_time": 550,
    "extra_effects": [ { "id": "eoc_channeling_setup", "hit_self": true } ],
    "flags": [ "CHANNELING_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC", "NO_LEGS", "NO_HANDS", "NO_PROJECTILE" ]
  },
  {
    "id": "create_rune_druid",
    "type": "SPELL",
    "name": "Druid Rune",
    "description": "A ritual in which you conjure forth roots and vines in order to make a druidic rune.  You can use the rune as a catalyst for recipes.",
    "valid_targets": [ "self" ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "rune_druid",
    "shape": "blast",
    "base_casting_time": 5000,
    "base_energy_cost": 5,
    "min_duration": 1,
    "max_duration": 2,
    "duration_increment": 1,
    "difficulty": 0,
    "max_level": 0,
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "extra_effects": [ { "id": "eoc_channeling_setup", "hit_self": true } ],
    "flags": [ "CHANNELING_SPELL", "PERMANENT", "NO_LEGS", "CONCENTRATE" ]
  },
  {
    "id": "purify_seed",
    "type": "SPELL",
    "name": "Purification Seed",
    "description": "You summon a gift of the earth which will purify water.  Rapidly degrades if not utilized.",
    "valid_targets": [ "self" ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "druid_seed",
    "shape": "blast",
    "base_casting_time": 30000,
    "final_casting_time": 6000,
    "casting_time_increment": -1200.0,
    "base_energy_cost": 1000,
    "final_energy_cost": 1000,
    "min_duration": 6000,
    "max_duration": 6000,
    "extra_effects": [ { "id": "eoc_summon_setup", "hit_self": true } ],
    "difficulty": 6,
    "max_level": 20,
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "flags": [ "CONJURATION_SPELL", "NO_LEGS", "CONCENTRATE" ]
  },
  {
    "id": "druidic_regrowth",
    "type": "SPELL",
    "name": "Sacrificial Regrowth",
    "description": "Through giving of one's own life force, you restore withered and barren plant life nearby.  What remains will need time to regrow its full strength.",
    "valid_targets": [ "ground" ],
    "effect": "ter_transform",
    "effect_str": "druidic_renewal",
    "shape": "blast",
    "flags": [ "RESTORATION_SPELL", "CONCENTRATE", "IGNORE_WALLS", "VERBAL", "SOMATIC", "NO_LEGS", "NO_HANDS", "NO_PROJECTILE" ],
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "energy_source": "HP",
    "difficulty": 6,
    "base_casting_time": 600,
    "base_energy_cost": 25,
    "final_energy_cost": 10,
    "energy_increment": -1,
    "extra_effects": [ { "id": "eoc_restoration_setup", "hit_self": true } ],
    "max_level": 20,
    "min_aoe": 1,
    "max_aoe": 5,
    "aoe_increment": 0.2,
    "min_range": 3,
    "max_range": 6,
    "range_increment": 0.3
  },
  {
    "id": "druidic_healing",
    "type": "SPELL",
    "name": "Sacrificial Healing",
    "description": "Channels some of the user's own life force into healing energy, for the sake of one's allies.",
    "valid_targets": [ "ally" ],
    "effect": "attack",
    "shape": "blast",
    "flags": [ "RESTORATION_SPELL", "CONCENTRATE", "RANDOM_DAMAGE", "VERBAL", "SOMATIC", "NO_LEGS", "NO_HANDS", "NO_PROJECTILE" ],
    "spell_class": "DRUID",
    "energy_source": "HP",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 5,
    "base_casting_time": 400,
    "base_energy_cost": 35,
    "final_energy_cost": 15,
    "energy_increment": -2,
    "extra_effects": [ { "id": "eoc_restoration_setup", "hit_self": true } ],
    "max_level": 10,
    "min_damage": { "math": [ "(u_spell_level('druidic_healing') * -1) - 2" ] },
    "max_damage": { "math": [ "(u_spell_level('druidic_healing') * -2) - 5" ] },
    "damage_increment": -1.6,
    "min_aoe": 0,
    "max_aoe": 2,
    "aoe_increment": 0.2,
    "min_range": 2,
    "max_range": 4,
    "range_increment": 0.2
  },
  {
    "id": "druid_tornskin",
    "type": "SPELL",
    "name": "Tornskin",
    "description": "This spell, which resembles Thornskin through the sap & needles covering the page, seemed to involve thorns and bleeding wounds.  The marred words may have altered the function.",
    "valid_targets": [ "hostile", "ground", "ally", "self" ],
    "flags": [ "EVOCATION_SPELL", "RANDOM_DAMAGE", "SOMATIC" ],
    "effect": "attack",
    "effect_str": "tornskin_pain",
    "shape": "blast",
    "affected_body_parts": [ "head", "torso", "mouth", "eyes", "arm_l", "arm_r", "hand_r", "hand_l", "leg_l", "foot_l", "foot_r" ],
    "min_dot": 1,
    "max_dot": 4,
    "dot_increment": 0.3,
    "extra_effects": [ { "id": "eoc_evocation_setup", "hit_self": true } ],
    "spell_class": "DRUID",
    "base_casting_time": 300,
    "base_energy_cost": 100,
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 4,
    "max_level": 10,
    "min_damage": 1,
    "max_damage": 4,
    "min_aoe": 1,
    "max_aoe": 2,
    "aoe_increment": 0.1,
    "min_range": 1,
    "max_range": 2,
    "range_increment": 0.1,
    "min_duration": 200,
    "max_duration": 600,
    "duration_increment": 40,
    "min_pierce": 0,
    "max_pierce": 3,
    "pierce_increment": 0.3,
    "damage_type": "cut"
  },
  {
    "id": "druid_feralform",
    "type": "SPELL",
    "name": "Feral Form",
    "description": "This spell unleashes your inner beast, growing claws & fangs to rend your foes limb from limb.",
    "valid_targets": [ "self" ],
    "effect": "spawn_item",
    "effect_str": "aura_feral",
    "shape": "blast",
    "flags": [ "TRANSFORMATION_SPELL", "SOMATIC", "VERBAL" ],
    "components": "spell_components_feralform",
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 4,
    "base_casting_time": 400,
    "base_energy_cost": 200,
    "max_level": 15,
    "min_damage": 1,
    "max_damage": 1,
    "min_duration": 24000,
    "max_duration": 360000,
    "duration_increment": 24000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ],
    "learn_spells": { "druid_feralform_plus": 15 }
  },
  {
    "id": "druid_feralform_plus",
    "type": "SPELL",
    "name": "Enhanced Feral Form",
    "description": "This spell unleashes your inner beast, growing claws & fangs to rend your foes limb from limb.  Now you know this spell like the back of your hand, and start to design your own version.",
    "valid_targets": [ "self" ],
    "effect": "spawn_item",
    "effect_str": "aura_feral_plus",
    "shape": "blast",
    "flags": [ "TRANSFORMATION_SPELL", "SOMATIC", "NO_FAIL" ],
    "components": "spell_components_feralform",
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 6,
    "base_casting_time": 400,
    "final_casting_time": 100,
    "casting_time_increment": -12,
    "base_energy_cost": 200,
    "final_energy_cost": 100,
    "energy_increment": -4,
    "max_level": 25,
    "min_damage": 1,
    "max_damage": 1,
    "min_duration": 360000,
    "max_duration": 2160000,
    "duration_increment": 72000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "id": "summon_wolf_druid",
    "type": "SPELL",
    "name": "Summon Wolf",
    "description": "Call to the wilds for aid from some wolves.",
    "valid_targets": [ "ground" ],
    "min_damage": 1,
    "max_damage": 3,
    "damage_increment": 0.08,
    "min_range": 2,
    "max_range": 7,
    "min_aoe": 2,
    "max_aoe": 2,
    "range_increment": 0.2,
    "spell_class": "DRUID",
    "base_casting_time": 500,
    "magic_type": "magiclysm_generic_magic",
    "max_level": 30,
    "difficulty": 6,
    "min_duration": 36000,
    "max_duration": 1080000,
    "duration_increment": 36000,
    "base_energy_cost": 400,
    "extra_effects": [ { "id": "eoc_summon_setup", "hit_self": true } ],
    "flags": [ "CONJURATION_SPELL", "SOMATIC", "VERBAL", "NO_LEGS", "NO_CORPSE_QUIET" ],
    "shape": "blast",
    "effect": "summon",
    "effect_str": "mon_wolf"
  },
  {
    "id": "druid_natures_commune",
    "type": "SPELL",
    "name": "Communion with Nature",
    "description": "You focus on the bounty of nature around you and commune with it, improving your health and mood and calming nearby wildlife.  This spell may only be cast outdoors away from civilization.",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_NATURE_COMMUNE",
    "shape": "blast",
    "flags": [ "CHANNELING_SPELL", "CONCENTRATE", "SOMATIC", "VERBAL", "NO_LEGS", "NO_HANDS" ],
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 4,
    "base_casting_time": 12000,
    "base_energy_cost": 250,
    "final_energy_cost": 400,
    "energy_increment": 10,
    "extra_effects": [ { "id": "eoc_channeling_setup", "hit_self": true } ],
    "max_level": 20,
    "min_duration": 30000,
    "max_duration": 360000,
    "duration_increment": 16500
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_NATURE_COMMUNE",
    "condition": {
      "and": [
        "u_is_outside",
        {
          "or": [
            { "u_is_on_terrain_with_flag": "SHRUB" },
            { "u_is_on_terrain_with_flag": "DIGGABLE" },
            { "u_is_on_terrain_with_flag": "YOUNG" }
          ]
        },
        { "not": { "u_near_om_location": "road", "range": 1 } }
      ]
    },
    "effect": [
      {
        "u_add_effect": "natures_commune",
        "duration": { "math": [ "( 300 + (u_spell_level('druid_natures_commune') * 165)) * ( channeling_proficiency_modifier() )" ] }
      },
      { "u_lose_morale": "morale_forest_unity" },
      {
        "u_add_morale": "morale_forest_unity",
        "bonus": { "math": [ "5 + (u_spell_level('druid_natures_commune') * 3)  * ( channeling_proficiency_modifier() )" ] },
        "max_bonus": 50,
        "duration": { "math": [ "( 300 + (u_spell_level('druid_natures_commune') * 165) )  * ( channeling_proficiency_modifier() )" ] },
        "decay_start": {
          "math": [ "(( 300 + (u_spell_level('druid_natures_commune') * 165) ) / 2)  * ( channeling_proficiency_modifier() )" ]
        }
      }
    ],
    "false_effect": [ { "u_message": "You must be surrounded by nature to commune with nature", "type": "bad" } ]
  },
  {
    "id": "druid_growth",
    "type": "SPELL",
    "spell_class": "DRUID",
    "name": "Seed of Growth",
    "description": "Offer some of your life in a ritual to get tokens of growth in return.",
    "valid_targets": [ "self" ],
    "effect": "spawn_item",
    "effect_str": "druid_fertilizer",
    "shape": "blast",
    "base_casting_time": 360000,
    "final_casting_time": 90000,
    "casting_time_increment": -15000,
    "base_energy_cost": 5,
    "extra_effects": [ { "id": "eoc_summon_setup", "hit_self": true } ],
    "energy_source": "HP",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 4,
    "max_level": 20,
    "min_damage": 5,
    "max_damage": 80,
    "damage_increment": 4,
    "//": "The spell can only be permanent without being at maximum level because of how items with charges work",
    "flags": [ "CONJURATION_SPELL", "SOMATIC", "NO_LEGS", "PERMANENT" ]
  },
  {
    "id": "cause_rot",
    "type": "SPELL",
    "name": "Cause Rot",
    "description": "A spell from a darker sect of druidry, created to forcibly begin the circle of life anew.  For without rot, you cannot have growth.  Affects a huge area, but is indiscriminate; even rusting machines into nothing but dust and slow both in casting and effect.  Once lost entirely to the passage of time, this spell was thought to be no more than a myth, the stuff of fairy tales, albeit grim ones.",
    "effect": "attack",
    "extra_effects": [ { "id": "druid_cause_rot_terrain" }, { "id": "eoc_channeling_setup", "hit_self": true } ],
    "shape": "blast",
    "valid_targets": [ "hostile", "ground" ],
    "flags": [ "CHANNELING_SPELL", "SOMATIC", "NO_PROJECTILE", "CONCENTRATE", "VERBAL", "IGNORE_WALLS" ],
    "max_level": 25,
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 8,
    "damage_type": "necrotic",
    "base_casting_time": 10000,
    "final_casting_time": 500,
    "casting_time_increment": -380,
    "base_energy_cost": 1000,
    "final_energy_cost": 400,
    "energy_increment": -24,
    "min_aoe": 5,
    "max_aoe": 50,
    "aoe_increment": 1.8,
    "min_damage": 1,
    "max_damage": 1,
    "min_bash_scaling": 20,
    "max_bash_scaling": 170,
    "min_dot": 1,
    "max_dot": 5,
    "dot_increment": 0.2,
    "min_duration": 500,
    "max_duration": 5000,
    "duration_increment": 180
  },
  {
    "id": "druid_cause_rot_terrain",
    "type": "SPELL",
    "name": { "str": "Cause Rot Terrain Rot", "//~": "NO_I18N" },
    "description": { "str": "The ruin terrain effect of the Cause Rot spell.  It's a bug if you have it directly.", "//~": "NO_I18N" },
    "effect": "ter_transform",
    "effect_str": "ter_druid_cause_rot_terrain",
    "shape": "blast",
    "valid_targets": [ "hostile", "ground" ],
    "flags": [ "CHANNELING_SPELL", "SOMATIC", "NO_PROJECTILE", "CONCENTRATE", "VERBAL", "IGNORE_WALLS" ],
    "max_level": 25,
    "spell_class": "DRUID",
    "min_aoe": 5,
    "max_aoe": 50,
    "aoe_increment": 1.8
  },
  {
    "id": "druid_healing",
    "type": "SPELL",
    "name": "Restoration",
    "description": "Slowly heal your wounds by drawing on the power of nature.\n\nYou must be <color_yellow>outdoors and in a natural area</color> away from civilization to cast Restoration.",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_RESTORATION",
    "shape": "blast",
    "flags": [ "RESTORATION_SPELL", "CONCENTRATE", "SOMATIC", "VERBAL", "NO_LEGS" ],
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 8,
    "base_casting_time": 12000,
    "final_casting_time": 3000,
    "casting_time_increment": -360,
    "base_energy_cost": 800,
    "final_energy_cost": 500,
    "energy_increment": -12,
    "extra_effects": [ { "id": "eoc_restoration_setup", "hit_self": true } ],
    "max_level": 25,
    "//": "each 3000 (30 second) heal 1 hp. 5 hp on level 0 (2.5m), 30 hp on level 25 (15 m), ignoring proficiency modifiers",
    "min_duration": 15000,
    "max_duration": 90000,
    "duration_increment": 3000
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_RESTORATION",
    "condition": {
      "and": [
        "u_is_outside",
        {
          "or": [
            { "u_is_on_terrain_with_flag": "SHRUB" },
            { "u_is_on_terrain_with_flag": "DIGGABLE" },
            { "u_is_on_terrain_with_flag": "YOUNG" }
          ]
        },
        { "not": { "u_near_om_location": "road", "range": 1 } }
      ]
    },
    "effect": [
      {
        "u_add_effect": "flask_regeneration",
        "duration": { "math": [ "( 150 + (u_spell_level('druid_healing') * 30)) * ( restoration_proficiency_modifier() )" ] }
      }
    ],
    "false_effect": [ { "u_message": "You must be surrounded by nature to use its power to heal.", "type": "bad" } ]
  },
  {
    "id": "druid_healing_herb",
    "type": "SPELL",
    "name": "Floral Healing",
    "description": "Use some magic herbs to heal yourself.",
    "components": "spell_components_healing_herb",
    "valid_targets": [ "self" ],
    "effect": "attack",
    "shape": "blast",
    "flags": [ "RESTORATION_SPELL", "CONCENTRATE", "RANDOM_DAMAGE", "SOMATIC", "VERBAL", "NO_LEGS" ],
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "min_damage": { "math": [ "(u_spell_level('druid_healing_herb') * -0.7) - 2" ] },
    "max_damage": { "math": [ "(u_spell_level('druid_healing_herb') * -1.5) - 5" ] },
    "difficulty": 5,
    "base_casting_time": 800,
    "base_energy_cost": 400,
    "final_energy_cost": 150,
    "energy_increment": -16.7,
    "extra_effects": [ { "id": "eoc_restoration_setup", "hit_self": true } ],
    "max_level": 15
  },
  {
    "id": "druid_bandage_heal",
    "type": "SPELL",
    "name": "Vegetative Poultice",
    "description": "This spell turns a mixture of bark and leaves into a powerful salve capable of stopping even grievous wounds from bleeding.",
    "valid_targets": [ "none" ],
    "flags": [ "TRANSFORMATION_SPELL", "CONCENTRATE", "SOMATIC", "VERBAL", "NO_LEGS" ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "druid_bandages",
    "components": "spell_components_druid_bandage",
    "shape": "blast",
    "base_casting_time": 400,
    "base_energy_cost": 450,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ],
    "min_duration": 48000,
    "max_duration": 720000,
    "duration_increment": 44800,
    "difficulty": 5,
    "max_level": 15,
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic"
  },
  {
    "id": "druid_whisper_leaves",
    "type": "SPELL",
    "name": "Whisper of the Leaves",
    "description": "This spell allows you to hear the trees' wisdom in the rustle of the leaves and the creaking of their roots, discerning the layout of the forest.",
    "valid_targets": [ "self" ],
    "flags": [ "CHANNELING_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_GAIN_WHISPER_LEAVES",
    "shape": "blast",
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 6,
    "max_level": 15,
    "base_casting_time": 6000,
    "final_casting_time": 1000,
    "casting_time_increment": -350,
    "base_energy_cost": 800,
    "final_energy_cost": 500,
    "energy_increment": -40,
    "extra_effects": [ { "id": "eoc_channeling_setup", "hit_self": true } ],
    "min_duration": 6000,
    "max_duration": 6000
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_GAIN_WHISPER_LEAVES",
    "condition": { "not": { "u_has_trait": "TREE_COMMUNION" } },
    "effect": [
      { "u_add_trait": "TREE_COMMUNION" },
      { "u_activate_trait": "TREE_COMMUNION" },
      { "run_eocs": "EOC_LOSE_WHISPER_LEAVES", "time_in_future": [ "1 seconds", "1 seconds" ] }
    ],
    "false_effect": [
      {
        "u_message": "You are already in tune with the rhythms of the forest.  Further magic cannot deepen your bond.",
        "type": "good"
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_LOSE_WHISPER_LEAVES",
    "effect": [ { "u_lose_trait": "TREE_COMMUNION" } ]
  },
  {
    "id": "druid_harvest_hunter",
    "type": "SPELL",
    "name": "Harvest of the Hunter",
    "description": "This spell creates a grouping of odd-looking but functional arrows out of forest detritus.",
    "valid_targets": [ "none" ],
    "flags": [ "TRANSFORMATION_SPELL", "RANDOM_DAMAGE", "CONCENTRATE", "NO_HANDS", "VERBAL", "NO_LEGS" ],
    "spell_class": "DRUID",
    "difficulty": 4,
    "max_level": 15,
    "effect": "spawn_item",
    "effect_str": "arrow_druid",
    "components": "spell_components_druid_arrow",
    "shape": "blast",
    "min_damage": { "math": [ "(u_spell_level('druid_harvest_hunter') * 1) + 2" ] },
    "max_damage": { "math": [ "(u_spell_level('druid_harvest_hunter') * 3) + 6" ] },
    "base_casting_time": 6000,
    "final_casting_time": 600,
    "casting_time_increment": -360,
    "magic_type": "magiclysm_generic_magic",
    "base_energy_cost": 250,
    "min_duration": 180000,
    "max_duration": 1440000,
    "duration_increment": 84000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "id": "druid_summon_tanglevine",
    "type": "SPELL",
    "name": "Summon Tanglevine",
    "description": "This spell causes an animated vine to burst from the ground and attempt to seize a nearby target and hold it fast.",
    "valid_targets": [ "ground" ],
    "flags": [ "CONJURATION_SPELL", "VERBAL", "SOMATIC" ],
    "effect": "summon",
    "effect_str": "mon_tanglevine",
    "shape": "blast",
    "spell_class": "DRUID",
    "difficulty": 6,
    "max_level": 15,
    "min_damage": 1,
    "max_damage": 1,
    "min_range": 5,
    "max_range": 15,
    "range_increment": 0.8,
    "base_casting_time": 250,
    "magic_type": "magiclysm_generic_magic",
    "min_duration": 12000,
    "max_duration": 42000,
    "duration_increment": 2000,
    "base_energy_cost": 650,
    "final_energy_cost": 400,
    "energy_increment": -16.666,
    "extra_effects": [ { "id": "eoc_summon_setup", "hit_self": true } ]
  },
  {
    "id": "druid_beguile_savage_beast",
    "type": "SPELL",
    "name": "Beguiling the Savage Beast",
    "description": "Using your connection to nature, you can sway an animal to your service.  This spell even works on mutated animals.",
    "valid_targets": [ "hostile" ],
    "flags": [ "ENERVATION_SPELL", "VERBAL", "SOMATIC", "SILENT" ],
    "effect": "charm_monster",
    "shape": "blast",
    "spell_class": "DRUID",
    "difficulty": 9,
    "max_level": 15,
    "min_damage": 30,
    "max_damage": 400,
    "damage_increment": 25,
    "extra_effects": [ { "id": "eoc_enervation_setup", "hit_self": true } ],
    "min_range": 5,
    "max_range": 30,
    "range_increment": 1.67,
    "base_casting_time": 150,
    "magic_type": "magiclysm_generic_magic",
    "base_energy_cost": 900,
    "final_energy_cost": 600,
    "energy_increment": -20,
    "min_duration": 30000,
    "max_duration": 90000,
    "duration_increment": 4000,
    "targeted_monster_species": [ "MAMMAL", "BIRD" ]
  },
  {
    "id": "druid_bramble_spear",
    "type": "SPELL",
    "name": "Spear of Brambles",
    "description": "This spell turns a stick into a vicious spear that drips with sticky sap.",
    "valid_targets": [ "none" ],
    "flags": [ "TRANSFORMATION_SPELL", "CONCENTRATE", "VERBAL", "NO_HANDS" ],
    "//": "NO_HANDS so you can hold on to the stick and cast the spell and then be holding the spear",
    "effect": "spawn_item",
    "effect_str": "druid_bramble_spear_item",
    "components": "spell_components_druid_bramble_spear",
    "shape": "blast",
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 4,
    "min_damage": 1,
    "max_damage": 1,
    "max_level": 15,
    "base_casting_time": 1000,
    "base_energy_cost": 350,
    "min_duration": 24000,
    "max_duration": 360000,
    "duration_increment": 24000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ],
    "learn_spells": { "druid_bramble_spear_enhanced": 15 }
  },
  {
    "id": "druid_bramble_spear_enhanced",
    "type": "SPELL",
    "name": "Enhanced Spear of Brambles",
    "description": "This spell turns a bit of bark or a twig into a vicious spear that drips with sticky sap.  You now know this spell like the back of your hand, and no longer need such massive spell components as you did previously.",
    "valid_targets": [ "none" ],
    "flags": [ "TRANSFORMATION_SPELL", "CONCENTRATE", "VERBAL", "NO_HANDS", "NO_FAIL" ],
    "effect": "spawn_item",
    "effect_str": "druid_bramble_spear_item",
    "shape": "blast",
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 5,
    "min_damage": 1,
    "max_damage": 1,
    "max_level": 15,
    "base_casting_time": 1000,
    "base_energy_cost": 250,
    "min_duration": 360000,
    "max_duration": 2160000,
    "duration_increment": 72000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "id": "druid_summon_brambles",
    "type": "SPELL",
    "name": "Stranglethorns",
    "description": "Call up thick, swiftly growing brambles, either in a line to form a wall or an arc to trap an enemy.",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_BRAMBLES_SELECTOR",
    "shape": "blast",
    "flags": [ "EVOCATION_SPELL", "SOMATIC", "VERBAL" ],
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 5,
    "base_casting_time": 150,
    "base_energy_cost": 400,
    "extra_effects": [ { "id": "eoc_evocation_setup", "hit_self": true } ],
    "max_level": 15
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_BRAMBLES_SELECTOR",
    "effect": [
      {
        "run_eoc_selector": [ "EOC_DRUID_BRAMBLES_SELECTOR_ARC", "EOC_DRUID_BRAMBLES_SELECTOR_LINE" ],
        "names": [ "Thorny Arc", "Wall of Brambles" ],
        "keys": [ "1", "2" ],
        "descriptions": [ "Summon a spray of brambles to entrap an enemy.", "Summon a wall of thorns to fortify a location." ]
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_BRAMBLES_SELECTOR_ARC",
    "effect": [ { "u_cast_spell": { "id": "druid_summon_brambles_arc" }, "targeted": true } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_BRAMBLES_SELECTOR_LINE",
    "effect": [ { "u_cast_spell": { "id": "druid_summon_brambles_line" }, "targeted": true } ]
  },
  {
    "id": "druid_summon_brambles_arc",
    "type": "SPELL",
    "name": "Summon Brambles Arc",
    "description": "Call up thick, swiftly growing brambles, either in a line to form a wall or an arc to trap an enemy.",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "ter_transform",
    "effect_str": "druid_summoned_brambles",
    "shape": "cone",
    "flags": [ "EVOCATION_SPELL", "SILENT", "NO_PROJECTILE" ],
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "max_level": 15,
    "min_range": { "math": [ "(u_spell_level('druid_summon_brambles') * 0.6) * ( evocation_proficiency_modifier() )" ] },
    "max_range": { "math": [ "(u_spell_level('druid_summon_brambles') * 0.6) * ( evocation_proficiency_modifier() )" ] },
    "min_aoe": { "math": [ "(u_spell_level('druid_summon_brambles') * 1.9) * ( evocation_proficiency_modifier() )" ] },
    "max_aoe": { "math": [ "(u_spell_level('druid_summon_brambles') * 1.9) * ( evocation_proficiency_modifier() )" ] }
  },
  {
    "id": "druid_summon_brambles_line",
    "type": "SPELL",
    "name": "Summon Brambles Line",
    "description": "Call up thick, swiftly growing brambles, either in a line to form a wall or an arc to trap an enemy.",
    "valid_targets": [ "ground", "hostile" ],
    "effect": "ter_transform",
    "effect_str": "druid_summoned_brambles",
    "shape": "line",
    "flags": [ "EVOCATION_SPELL", "SILENT", "NO_PROJECTILE" ],
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "max_level": 15,
    "min_range": { "math": [ "(u_spell_level('druid_summon_brambles') * 1) * ( evocation_proficiency_modifier() )" ] },
    "max_range": { "math": [ "(u_spell_level('druid_summon_brambles') * 1) * ( evocation_proficiency_modifier() )" ] }
  },
  {
    "id": "druid_thorn_skin",
    "type": "SPELL",
    "name": "Thornskin",
    "description": "This spell transforms the druid's skin into a bark-like material covered in large thorns.  It provides excellent protection but slightly slows you and makes you vulnerable to fire.",
    "valid_targets": [ "self" ],
    "flags": [ "TRANSFORMATION_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC" ],
    "effect": "spawn_item",
    "effect_str": "druid_thorn_skin_item",
    "shape": "blast",
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 8,
    "min_damage": 1,
    "max_damage": 1,
    "max_level": 15,
    "base_casting_time": 600,
    "base_energy_cost": 500,
    "min_duration": 24000,
    "max_duration": 360000,
    "duration_increment": 24000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "id": "druid_renew_forest_spell",
    "type": "SPELL",
    "name": "Renewing the Forest",
    "description": "While outdoors and not underground, the druid can create a profusion of life around themselves, causing grass to grow through pavement, bushes and flowers to sprout, and trees to grow to full height in moments.\n\nIn <color_yellow>addition to</color> mana, this spell also requires <color_red>hit points</color> to cast and <color_yellow>will fail</color> if you are too injured.",
    "flags": [ "CHANNELING_SPELL", "SOMATIC", "VERBAL" ],
    "valid_targets": [ "self" ],
    "max_level": 25,
    "spell_class": "DRUID",
    "shape": "blast",
    "difficulty": 10,
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_RENEW_FOREST_SPELL",
    "magic_type": "magiclysm_generic_magic",
    "base_energy_cost": 150,
    "base_casting_time": 6000,
    "extra_effects": [ { "id": "eoc_channeling_setup", "hit_self": true } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_RENEW_FOREST_SPELL",
    "condition": "u_is_outside",
    "effect": {
      "run_eocs": [
        {
          "id": "EOC_DRUID_RENEW_FOREST_SPELL_2",
          "condition": { "math": [ "u_val('pos_z') == 0" ] },
          "effect": [
            { "math": [ "u_renew_forest_hp_cost = max( (25 - (u_spell_level('druid_renew_forest_spell') / 2 ) ), 15 )" ] },
            {
              "if": {
                "and": [
                  { "math": [ "u_hp('arm_l') > u_renew_forest_hp_cost" ] },
                  { "math": [ "u_hp('arm_r') > u_renew_forest_hp_cost" ] },
                  { "math": [ "u_hp('leg_l') > u_renew_forest_hp_cost" ] },
                  { "math": [ "u_hp('leg_r') > u_renew_forest_hp_cost" ] },
                  { "math": [ "u_hp('torso') > u_renew_forest_hp_cost" ] },
                  { "math": [ "u_hp('head') > u_renew_forest_hp_cost" ] }
                ]
              },
              "then": [
                {
                  "u_transform_radius": {
                    "math": [ "( (u_spell_level('druid_renew_forest_spell') * rng(0.8,1.2) ) + rng(1.5,4)) * channeling_proficiency_modifier()" ]
                  },
                  "ter_furn_transform": "ter_druid_renew_forest"
                },
                { "math": [ "u_hp('arm_l') -= u_renew_forest_hp_cost" ] },
                { "math": [ "u_hp('arm_r') -= u_renew_forest_hp_cost" ] },
                { "math": [ "u_hp('leg_l') -= u_renew_forest_hp_cost" ] },
                { "math": [ "u_hp('leg_r') -= u_renew_forest_hp_cost" ] },
                { "math": [ "u_hp('torso') -= u_renew_forest_hp_cost" ] },
                { "math": [ "u_hp('head') -= u_renew_forest_hp_cost" ] }
              ],
              "else": [ { "u_message": "You do not have enough life force to donate it to renew the forest!", "type": "bad" } ]
            }
          ],
          "false_effect": {
            "u_message": "You must be on the surface and not on a building's upper stories to cast Renewing the Forest!",
            "type": "bad"
          }
        }
      ]
    },
    "false_effect": [ { "u_message": "You must be outside to cast Renewing the Forest!", "type": "bad" } ]
  },
  {
    "id": "druid_wood_living_tree_spell",
    "type": "SPELL",
    "name": "Shape Wood",
    "description": "Using druidic magic, shape living wood into a log that you can use for other projects without harming the tree.  You must cast this spell on a living tree.",
    "flags": [ "CHANNELING_SPELL", "CONCENTRATE", "SILENT", "VERBAL" ],
    "valid_targets": [ "self" ],
    "spell_class": "DRUID",
    "difficulty": 5,
    "max_level": 15,
    "effect": "effect_on_condition",
    "effect_str": "EOC_EOC_DRUID_SHAPE_WOOD",
    "shape": "blast",
    "magic_type": "magiclysm_generic_magic",
    "base_casting_time": 180000,
    "base_energy_cost": 600,
    "extra_effects": [ { "id": "eoc_channeling_setup", "hit_self": true } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_EOC_DRUID_SHAPE_WOOD",
    "effect": [
      {
        "u_choose_adjacent_highlight": { "context_val": "druid_treeshape_location" },
        "condition": { "map_terrain_with_flag": "TREE", "loc": { "context_val": "loc" } },
        "message": "Select nearby tree",
        "failure_message": "You must be near a tree to shape it."
      },
      {
        "if": { "math": [ "has_var(_druid_treeshape_location)" ] },
        "then": [
          {
            "u_message": "The wood of the tree grows and forms as you cast the spell and when it ends, there is a log lying on the ground, entirely covered in bark but otherwise straight and ready to be used in other projects.",
            "type": "good"
          },
          { "u_spawn_item": "log", "count": 1, "suppress_message": true }
        ],
        "else": { "u_message": "Never mind." }
      }
    ]
  },
  {
    "id": "druid_anti_heat",
    "type": "SPELL",
    "name": "Water's Cooling Touch",
    "description": "Draw on some of the essence of water, providing protection against the summer's heat.",
    "valid_targets": [ "self" ],
    "spell_class": "DRUID",
    "flags": [ "ENHANCEMENT_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC" ],
    "effect": "attack",
    "effect_str": "effect_druid_anti_heat",
    "shape": "blast",
    "components": "spell_components_druid_anti_heat",
    "difficulty": 2,
    "max_level": 15,
    "min_duration": 90000,
    "max_duration": 900000,
    "duration_increment": 54000,
    "magic_type": "magiclysm_generic_magic",
    "base_energy_cost": 200,
    "extra_effects": [ { "id": "eoc_enhancement_setup", "hit_self": true } ],
    "base_casting_time": 6000
  },
  {
    "id": "druid_breathing_underwater",
    "type": "SPELL",
    "name": "Aquatic Mantle",
    "description": "Cover yourself in a thin layer of magical seaweed, preventing you from getting wet and allowing you to breathe underwater.",
    "valid_targets": [ "self" ],
    "flags": [ "ENHANCEMENT_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC", "NO_LEGS" ],
    "min_damage": 1,
    "max_damage": 1,
    "effect": "spawn_item",
    "effect_str": "aura_druid_breathing_water",
    "shape": "blast",
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 5,
    "max_level": 10,
    "base_casting_time": 3000,
    "base_energy_cost": 350,
    "min_duration": 36000,
    "max_duration": 360000,
    "duration_increment": 36000,
    "extra_effects": [ { "id": "eoc_enhancement_setup", "hit_self": true } ]
  },
  {
    "id": "druid_disinfectant",
    "type": "SPELL",
    "name": "Wash the Wounds Clean",
    "description": "Transform a bit of water into a magical disinfectant as you pour it over your wounds.",
    "//": "Using spawn_item with a liquid just dumps it on the floor at the moment.  Once that's fixed, this can be extended so it can be used on NPCs.",
    "valid_targets": [ "self" ],
    "spell_class": "DRUID",
    "flags": [ "TRANSFORMATION_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_DISINFECTANT",
    "shape": "blast",
    "components": "spell_components_druid_anti_heat",
    "difficulty": 4,
    "max_level": 15,
    "magic_type": "magiclysm_generic_magic",
    "base_energy_cost": 200,
    "base_casting_time": 1000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_DISINFECTANT",
    "effect": [
      { "u_spawn_item": "item_druid_disinfectant", "suppress_message": true },
      {
        "u_run_inv_eocs": "random",
        "search_data": [ { "id": "item_druid_disinfectant" } ],
        "true_eocs": [ { "id": "EOC_DRUID_DISINFECTANT_ITEM_ACTIVATE", "effect": { "u_activate": "heal" } } ]
      },
      { "run_eocs": "EOC_DRUID_DISINFECTANT_REMOVE", "time_in_future": [ "1 seconds", "1 seconds" ] }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_DISINFECTANT_REMOVE",
    "effect": [ { "u_remove_item_with": "item_druid_disinfectant" } ]
  },
  {
    "id": "druid_water_walking",
    "type": "SPELL",
    "name": "Water Strider's Walk",
    "description": "Enchant yourself so that the water will buoy you up and prevent you from sinking, allowing you to walk on its surface.",
    "valid_targets": [ "self" ],
    "flags": [ "ENHANCEMENT_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC", "NO_LEGS" ],
    "effect": "attack",
    "effect_str": "effect_druid_water_walking",
    "shape": "blast",
    "magic_type": "magiclysm_generic_magic",
    "spell_class": "DRUID",
    "difficulty": 4,
    "max_level": 15,
    "base_casting_time": 250,
    "base_energy_cost": 250,
    "min_duration": 30000,
    "max_duration": 480000,
    "duration_increment": 30000,
    "extra_effects": [ { "id": "eoc_enhancement_setup", "hit_self": true } ]
  },
  {
    "id": "druid_traverse_the_wilds",
    "type": "SPELL",
    "name": "Traverse the Wilds",
    "description": "Blend in the wilds and urge them to speed your passage.  Trees bend out of the way, bushes do not hinder you, and even grass subtly moves your feet along.  The spell cannot be cast near civilization and similarly will fade if your travels take you out of the wilds.",
    "valid_targets": [ "self" ],
    "spell_class": "DRUID",
    "flags": [ "ENHANCEMENT_SPELL", "CONCENTRATE", "VERBAL", "SOMATIC" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_TRAVERSE_THE_WILDS",
    "shape": "blast",
    "difficulty": 3,
    "max_level": 15,
    "min_duration": 90000,
    "max_duration": 1440000,
    "duration_increment": 90000,
    "magic_type": "magiclysm_generic_magic",
    "base_energy_cost": 150,
    "base_casting_time": 250,
    "extra_effects": [ { "id": "eoc_enhancement_setup", "hit_self": true } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_TRAVERSE_THE_WILDS",
    "condition": {
      "and": [
        "u_is_outside",
        {
          "or": [
            { "u_is_on_terrain_with_flag": "SHRUB" },
            { "u_is_on_terrain_with_flag": "DIGGABLE" },
            { "u_is_on_terrain_with_flag": "YOUNG" }
          ]
        },
        { "not": { "u_near_om_location": "road", "range": 1 } }
      ]
    },
    "effect": [
      {
        "u_add_effect": "effect_druid_traverse_the_wilds",
        "duration": { "math": [ "( 900 + (u_spell_level('druid_traverse_the_wilds') * 900)) * enhancement_proficiency_modifier()" ] }
      }
    ],
    "false_effect": [ { "u_message": "You must be surrounded by the wilds to traverse them.", "type": "bad" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_TRAVERSE_THE_WILDS_REMOVER",
    "eoc_type": "EVENT",
    "required_event": "avatar_moves",
    "condition": {
      "and": [
        { "u_has_effect": "effect_druid_traverse_the_wilds" },
        {
          "or": [
            { "not": "u_is_outside" },
            {
              "and": [
                { "not": { "u_is_on_terrain_with_flag": "SHRUB" } },
                { "not": { "u_is_on_terrain_with_flag": "DIGGABLE" } },
                { "not": { "u_is_on_terrain_with_flag": "YOUNG" } }
              ]
            },
            { "u_near_om_location": "road", "range": 1 }
          ]
        }
      ]
    },
    "effect": [
      { "u_lose_effect": "effect_druid_traverse_the_wilds" },
      { "u_message": "As you approach civilization, your spell fades.", "type": "bad" }
    ]
  },
  {
    "id": "druid_bearmantle",
    "type": "SPELL",
    "name": "Bearmantle",
    "description": "Adopt some of the aspect of the bear, protecting you from cold and preparing you for winter.",
    "valid_targets": [ "self" ],
    "effect": "spawn_item",
    "effect_str": "aura_bearmantle",
    "shape": "blast",
    "flags": [ "TRANSFORMATION_SPELL", "SOMATIC", "VERBAL" ],
    "components": "spell_components_feralform",
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 4,
    "base_casting_time": 1500,
    "base_energy_cost": 200,
    "max_level": 15,
    "min_damage": 1,
    "max_damage": 1,
    "min_duration": 96000,
    "max_duration": 1440000,
    "duration_increment": 96000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "id": "druid_goodberry",
    "type": "SPELL",
    "name": "Goodberry",
    "description": "Enchant a set of berries, transforming them into magical fruit that will provide a hearty meal's worth of nutrition and a small amount of healing when eaten.  The goodberries will rot away within 24 hours if not eaten.",
    "valid_targets": [ "self" ],
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_GOODBERRY",
    "shape": "blast",
    "flags": [ "TRANSFORMATION_SPELL", "SOMATIC", "VERBAL" ],
    "components": "spell_components_goodberry",
    "spell_class": "DRUID",
    "magic_type": "magiclysm_generic_magic",
    "difficulty": 3,
    "base_casting_time": 30000,
    "base_energy_cost": 350,
    "max_level": 15,
    "min_duration": 8640000,
    "max_duration": 8640000,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "type": "effect_on_condition",
    "//": "EoC to summon because summoned comestibles don't have timers",
    "id": "EOC_DRUID_GOODBERRY",
    "effect": [ { "u_spawn_item": "item_druid_goodberry", "count": 1, "suppress_message": true } ]
  },
  {
    "id": "druid_create_temporary_spring",
    "type": "SPELL",
    "name": "Fountain of the Depths",
    "description": "Call to the waters beneath the earth and bring them to the surface, creating a natural spring.  The waters will subside when the spell's duration ends.",
    "flags": [ "CHANNELING_SPELL", "CONCENTRATE", "SILENT", "VERBAL" ],
    "valid_targets": [ "self" ],
    "spell_class": "DRUID",
    "difficulty": 9,
    "max_level": 15,
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_TEMPORARY_SPRING",
    "shape": "blast",
    "min_duration": 30000,
    "max_duration": 255000,
    "duration_increment": 15000,
    "magic_type": "magiclysm_generic_magic",
    "base_casting_time": 9000,
    "base_energy_cost": 750,
    "extra_effects": [ { "id": "eoc_channeling_setup", "hit_self": true } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_TEMPORARY_SPRING",
    "effect": [
      {
        "u_choose_adjacent_highlight": { "context_val": "druid_temporary_spring_location" },
        "condition": { "map_terrain_with_flag": "DIGGABLE", "loc": { "context_val": "loc" } },
        "message": "Select natural earth",
        "failure_message": "You can only call up a spring on natural earth."
      },
      {
        "if": { "math": [ "has_var(_druid_temporary_spring_location)" ] },
        "then": [
          {
            "u_transform_radius": 0,
            "ter_furn_transform": "ter_druid_create_spring",
            "target_var": { "context_val": "druid_temporary_spring_location" }
          },
          {
            "u_transform_radius": 60,
            "ter_furn_transform": "ter_druid_remove_spring",
            "target_var": { "context_val": "druid_temporary_spring_location" },
            "time_in_future": {
              "math": [ "( (u_spell_level('druid_create_temporary_spring') * 150) + 300 ) * ( channeling_proficiency_modifier() )" ]
            }
          }
        ],
        "else": { "u_message": "Canceled" }
      }
    ]
  },
  {
    "id": "druid_turn_tree_into_treant",
    "type": "SPELL",
    "name": "Awakening of the Forest Guardian",
    "description": "Grant a nearby tree awareness and mobility, letting it shake free from the soil and rise up to crush your enemies.  It will root itself again when the spell expires.\n\nYou must be <color_yellow>standing next to a tree</color> for the spell to take effect.",
    "flags": [ "TRANSFORMATION_SPELL", "CONCENTRATE", "SILENT", "VERBAL" ],
    "valid_targets": [ "self" ],
    "spell_class": "DRUID",
    "difficulty": 12,
    "max_level": 20,
    "effect": "effect_on_condition",
    "effect_str": "EOC_DRUID_TREE_AWAKENING",
    "shape": "blast",
    "min_duration": 15000,
    "max_duration": 155000,
    "duration_increment": 7000,
    "magic_type": "magiclysm_generic_magic",
    "base_casting_time": 500,
    "base_energy_cost": 850,
    "extra_effects": [ { "id": "eoc_transformation_setup", "hit_self": true } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_DRUID_TREE_AWAKENING",
    "effect": [
      {
        "u_map_run_eocs": [
          {
            "id": "EOC_DRUID_TREE_AWAKENING_ACTION",
            "effect": [
              {
                "u_transform_radius": 0,
                "ter_furn_transform": "ter_druid_tree_guardian_turn",
                "target_var": { "context_val": "druid_tree_awakening_check" }
              },
              {
                "u_spawn_monster": "mon_treant_druid",
                "real_count": 1,
                "min_radius": 0,
                "max_radius": 0,
                "temporary_drop_items": true,
                "lifespan": {
                  "math": [ "( (u_spell_level('druid_turn_tree_into_treant') * 70) + 150 ) * ( transformation_proficiency_modifier() )" ]
                },
                "target_var": { "context_val": "druid_tree_awakening_check" }
              }
            ],
            "false_effect": { "u_message": "You need to be standing next to a tree to awaken it.", "type": "bad" }
          }
        ],
        "range": 1,
        "store_coordinates_in": { "context_val": "druid_tree_awakening_check" },
        "stop_at_first": true,
        "condition": { "map_terrain_with_flag": "TREE", "loc": { "context_val": "druid_tree_awakening_check" } }
      }
    ]
  }
]
