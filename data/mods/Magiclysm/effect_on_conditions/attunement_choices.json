[
  {
    "type": "effect_on_condition",
    "id": "EOC_CHECK_ATTUNEMENTS",
    "effect": [
      { "math": [ "_required_spell_count = 12" ] },
      { "math": [ "_required_spell_levels = 200" ] },
      {
        "run_eoc_selector": [
          "EOC_GIVE_ATTUNEMENT_ARTIFICER",
          "EOC_GIVE_ATTUNEMENT_ALCHEMIST",
          "EOC_GIVE_ATTUNEMENT_BIOTEK",
          "EOC_GIVE_ATTUNEMENT_BLOOD_MAGE",
          "EOC_GIVE_ATTUNEMENT_BOREAL_MAGE",
          "EOC_GIVE_ATTUNEMENT_CLEANSING_FLAME",
          "EOC_GIVE_ATTUNEMENT_CRUSADER",
          "EOC_GIVE_ATTUNEMENT_EARTH_ELEMENTAL",
          "EOC_GIVE_ATTUNEMENT_FIRE_ELEMENTAL",
          "EOC_GIVE_ATTUNEMENT_FORCE_MAGE",
          "EOC_GIVE_ATTUNEMENT_GAIAS_CHOSEN",
          "EOC_GIVE_ATTUNEMENT_GLACIER_MAGE",
          "EOC_GIVE_ATTUNEMENT_GOLEMANCER",
          "EOC_GIVE_ATTUNEMENT_GRAVITY_MAGE",
          "EOC_GIVE_ATTUNEMENT_ICE_ELEMENTAL",
          "EOC_GIVE_ATTUNEMENT_ILLUSIONIST",
          "EOC_GIVE_ATTUNEMENT_MAGNETISM_MAGE",
          "EOC_GIVE_ATTUNEMENT_OVERCLOCKER",
          "EOC_GIVE_ATTUNEMENT_PERMAFROST_MAGE",
          "EOC_GIVE_ATTUNEMENT_RADIATION_MAGE",
          "EOC_GIVE_ATTUNEMENT_SHAMAN",
          "EOC_GIVE_ATTUNEMENT_SHAPESHIFTER",
          "EOC_GIVE_ATTUNEMENT_SOULFIRE",
          "EOC_GIVE_ATTUNEMENT_STORM_ELEMENTAL",
          "EOC_GIVE_ATTUNEMENT_STORMCALLER",
          "EOC_GIVE_ATTUNEMENT_SUN_MAGE",
          "EOC_GIVE_ATTUNEMENT_TUNDRA_MAGE",
          "EOC_GIVE_ATTUNEMENT_VOID_MAGE",
          "EOC_GIVE_ATTUNEMENT_VULCANIST",
          "EOC_GIVE_ATTUNEMENT_WITHER_MAGE",
          "EOC_CANT_GIVE_ATTUNEMENT_NOT_A_MAGE",
          "EOC_CANT_GIVE_ATTUNEMENT_NOT_ENOUGH_SPELLS",
          "EOC_CANT_GIVE_ATTUNEMENT_NOT_ENOUGH_SPELL_LEVELS",
          "EOC_CANT_GIVE_ATTUNEMENT_NOT_ENOUGH_PROFICIENCIES"
        ],
        "title": "Pick an Attunement to show the world your Worth.",
        "names": [
          "<trait_name:ARTIFICER>",
          "<trait_name:ALCHEMIST>",
          "<trait_name:BIOTEK>",
          "<trait_name:BLOOD_MAGE>",
          "<trait_name:BOREAL_MAGE>",
          "<trait_name:CLEANSING_FLAME>",
          "<trait_name:CRUSADER>",
          "<trait_name:EARTH_ELEMENTAL>",
          "<trait_name:FIRE_ELEMENTAL>",
          "<trait_name:FORCE_MAGE>",
          "<trait_name:GAIAS_CHOSEN>",
          "<trait_name:GLACIER_MAGE>",
          "<trait_name:GOLEMANCER>",
          "<trait_name:GRAVITY_MAGE>",
          "<trait_name:OVERCLOCKER>",
          "<trait_name:ICE_ELEMENTAL>",
          "<trait_name:ILLUSIONIST>",
          "<trait_name:MAGNETISM_MAGE>",
          "<trait_name:PERMAFROST_MAGE>",
          "<trait_name:RADIATION_MAGE>",
          "<trait_name:SHAMAN>",
          "<trait_name:SHAPESHIFTER>",
          "<trait_name:SOULFIRE>",
          "<trait_name:STORM_ELEMENTAL>",
          "<trait_name:STORMCALLER>",
          "<trait_name:SUN_MAGE>",
          "<trait_name:TUNDRA_MAGE>",
          "<trait_name:VOID_MAGE>",
          "<trait_name:VULCANIST>",
          "<trait_name:WITHER_MAGE>"
        ],
        "descriptions": [
          "<trait_description:ARTIFICER>",
          "<trait_description:ALCHEMIST>",
          "<trait_description:BIOTEK>",
          "<trait_description:BLOOD_MAGE>",
          "<trait_description:BOREAL_MAGE>",
          "<trait_description:CLEANSING_FLAME>",
          "<trait_description:CRUSADER>",
          "<trait_description:EARTH_ELEMENTAL>",
          "<trait_description:FIRE_ELEMENTAL>",
          "<trait_description:FORCE_MAGE>",
          "<trait_description:GAIAS_CHOSEN>",
          "<trait_description:GLACIER_MAGE>",
          "<trait_description:GOLEMANCER>",
          "<trait_description:GRAVITY_MAGE>",
          "<trait_description:OVERCLOCKER>",
          "<trait_description:ICE_ELEMENTAL>",
          "<trait_description:ILLUSIONIST>",
          "<trait_description:MAGNETISM_MAGE>",
          "<trait_description:PERMAFROST_MAGE>",
          "<trait_description:RADIATION_MAGE>",
          "<trait_description:SHAMAN>",
          "<trait_description:SHAPESHIFTER>",
          "<trait_description:SOULFIRE>",
          "<trait_description:STORM_ELEMENTAL>",
          "<trait_description:STORMCALLER>",
          "<trait_description:SUN_MAGE>",
          "<trait_description:TUNDRA_MAGE>",
          "<trait_description:VOID_MAGE>",
          "<trait_description:VULCANIST>",
          "<trait_description:WITHER_MAGE>"
        ],
        "allow_cancel": true,
        "hide_failing": true
      }
    ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_GIVE_ATTUNEMENT_ARTIFICER",
    "condition": {
      "and": [
        { "u_has_trait": "STORMSHAPER" },
        { "u_has_trait": "TECHNOMANCER" },
        {
          "not": {
            "u_has_any_trait": [
              "ALCHEMIST",
              "BIOTEK",
              "BOREAL_MAGE",
              "CRUSADER",
              "CLEANSING_FLAME",
              "EARTH_ELEMENTAL",
              "FIRE_ELEMENTAL",
              "FORCE_MAGE",
              "GAIAS_CHOSEN",
              "GLACIER_MAGE",
              "GOLEMANCER",
              "GRAVITY_MAGE",
              "OVERCLOCKER",
              "ICE_ELEMENTAL",
              "ILLUSIONIST",
              "MAGNETISM_MAGE",
              "PERMAFROST_MAGE",
              "RADIATION_MAGE",
              "STORM_ELEMENTAL",
              "STORMCALLER",
              "SUN_MAGE",
              "TUNDRA_MAGE",
              "VOID_MAGE",
              "VULCANIST",
              "SOULFIRE",
              "MAGIC_EMPTY"
            ]
          }
        },
        { "math": [ "u_spell_count('school': 'STORMSHAPER') >= _required_spell_count" ] },
        { "math": [ "u_spell_count('school': 'TECHNOMANCER') >= _required_spell_count" ] },
        { "math": [ "u_spell_level_sum('school': 'STORMSHAPER') >= _required_spell_levels" ] },
        { "math": [ "u_spell_level_sum('school': 'TECHNOMANCER') >= _required_spell_levels" ] },
        { "test_eoc": "EOC_CONDITION_ATTUNEMENT_CHECK_PROFICIENCY_MASTERY" }
      ]
    },
    "effect": [ { "u_add_trait": "ARTIFICER" }, { "run_eocs": "EOC_ATTUNEMENT_SUCCESS_MESSAGE" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_GIVE_ATTUNEMENT_ALCHEMIST",
    "condition": {
      "and": [
        { "u_has_trait": "ANIMIST" },
        { "u_has_trait": "TECHNOMANCER" },
        {
          "not": {
            "u_has_any_trait": [
              "ARTIFICER",
              "BIOTEK",
              "BLOOD_MAGE",
              "BOREAL_MAGE",
              "CRUSADER",
              "EARTH_ELEMENTAL",
              "FORCE_MAGE",
              "GAIAS_CHOSEN",
              "GLACIER_MAGE",
              "GOLEMANCER",
              "GRAVITY_MAGE",
              "OVERCLOCKER",
              "ILLUSIONIST",
              "MAGNETISM_MAGE",
              "PERMAFROST_MAGE",
              "RADIATION_MAGE",
              "SHAMAN",
              "SHAPESHIFTER",
              "SUN_MAGE",
              "VOID_MAGE",
              "VULCANIST",
              "SOULFIRE",
              "WITHER_MAGE",
              "MAGIC_EMPTY"
            ]
          }
        },
        { "math": [ "u_spell_count('school': 'ANIMIST') >= _required_spell_count" ] },
        { "math": [ "u_spell_count('school': 'TECHNOMANCER') >= _required_spell_count" ] },
        { "math": [ "u_spell_level_sum('school': 'ANIMIST') >= _required_spell_levels" ] },
        { "math": [ "u_spell_level_sum('school': 'TECHNOMANCER') >= _required_spell_levels" ] },
        { "test_eoc": "EOC_CONDITION_ATTUNEMENT_CHECK_PROFICIENCY_MASTERY" }
      ]
    },
    "effect": [ { "u_add_trait": "ARTIFICER" }, { "run_eocs": "EOC_ATTUNEMENT_SUCCESS_MESSAGE" } ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_CONDITION_ATTUNEMENT_CHECK_PROFICIENCY_MASTERY",
    "condition": {
      "or": [
        { "u_has_proficiency": "prof_magic_evocation_master" },
        { "u_has_proficiency": "prof_magic_channel_master" },
        { "u_has_proficiency": "prof_magic_summon_master" },
        { "u_has_proficiency": "prof_magic_enhancement_master" },
        { "u_has_proficiency": "prof_magic_enervation_master" },
        { "u_has_proficiency": "prof_magic_conveyance_master" },
        { "u_has_proficiency": "prof_magic_restoration_master" },
        { "u_has_proficiency": "prof_magic_transformation_master" }
      ]
    },
    "effect": [  ]
  },
  {
    "type": "effect_on_condition",
    "id": "EOC_ATTUNEMENT_SUCCESS_MESSAGE",
    "effect": [
      {
        "u_message": "As you touch the altar, you feel your ley lines twitch before they reconfigure themselves into new patterns.  Power flows through your body in a torrent along the new channels.  You have attained attunement.",
        "type": "good"
      }
    ]
  }
]
